  [1m[35m (0.6ms)[0m  [1m[35mCREATE DATABASE "FinpayAPI_development" ENCODING = 'unicode'[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE DATABASE "FinpayAPI_test" ENCODING = 'unicode'[0m
  [1m[35m (188.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (6.7ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_try_advisory_lock(7684012389382155225)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (1.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateTenants (20260219080021)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (13.3ms)[0m  [1m[35mCREATE TABLE "tenants" ("id" bigserial primary key, "name" character varying, "subdomain" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (1.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20260219080021"]]
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.6ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (1.5ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2026-02-19 08:01:04.058386"], ["updated_at", "2026-02-19 08:01:04.058386"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(7684012389382155225)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_try_advisory_lock(7684012389382155225)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (1.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateCompanies (20260219080617)
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (14.6ms)[0m  [1m[35mCREATE TABLE "companies" ("id" bigserial primary key, "name" character varying, "subdomain" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20260219080617"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.7ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(7684012389382155225)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTenant Pluck (0.6ms)[0m  [1m[34mSELECT "public"."tenants"."subdomain" FROM "public"."tenants"[0m
  â†³ config/initializers/apartment.rb:58:in `block (2 levels) in <main>'
  [1m[36mTenant Pluck (0.1ms)[0m  [1m[34mSELECT "public"."tenants"."subdomain" FROM "public"."tenants"[0m
  â†³ config/initializers/apartment.rb:58:in `block (2 levels) in <main>'
DEPRECATION WARNING: ActiveRecord::Base.dump_schema_after_migration is deprecated and will be removed in Rails 7.1.
Use `ActiveRecord.dump_schema_after_migration` instead.
 (called from require at <internal:/Users/srinivas/.rbenv/versions/3.2.2/lib/ruby/3.2.0/rubygems/core_ext/kernel_require.rb>:37)
[Apartment] Dumping schema from default tenant...
  [1m[36mActiveRecord::SchemaMigration Pluck (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[Apartment] Schema dump completed.
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCompany Create (2.4ms)[0m  [1m[32mINSERT INTO "public"."companies" ("name", "subdomain", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "TestCorp"], ["subdomain", "testcorp"], ["created_at", "2026-02-19 08:11:30.627769"], ["updated_at", "2026-02-19 08:11:30.627769"]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_try_advisory_lock(7684012389382155225)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (2.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateUsers (20260219090116)
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (6.8ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "name" character varying, "email" character varying, "role" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20260219090116"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateCategories (20260219090209)
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE TABLE "categories" ("id" bigserial primary key, "name" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20260219090209"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateExpenses (20260219090304)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (8.2ms)[0m  [1m[35mCREATE TABLE "expenses" ("id" bigserial primary key, "amount" decimal, "description" text, "status" character varying, "user_id" bigint NOT NULL, "category_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_c3ee69df61"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
, CONSTRAINT "fk_rails_06966d0da0"
FOREIGN KEY ("category_id")
  REFERENCES "categories" ("id")
)[0m
  [1m[35m (1.9ms)[0m  [1m[35mCREATE INDEX "index_expenses_on_user_id" ON "expenses" ("user_id")[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE INDEX "index_expenses_on_category_id" ON "expenses" ("category_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20260219090304"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateApprovals (20260219090321)
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (4.1ms)[0m  [1m[35mCREATE TABLE "approvals" ("id" bigserial primary key, "expense_id" bigint NOT NULL, "approver_id" bigint, "status" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_a8b2d49d72"
FOREIGN KEY ("expense_id")
  REFERENCES "expenses" ("id")
)[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE INDEX "index_approvals_on_expense_id" ON "approvals" ("expense_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20260219090321"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateAccounts (20260219090333)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE TABLE "accounts" ("id" bigserial primary key, "name" character varying, "balance" decimal, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.7ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20260219090333"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateTransactions (20260219090403)
  [1m[36mTRANSACTION (11.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.8ms)[0m  [1m[35mCREATE TABLE "transactions" ("id" bigserial primary key, "amount" decimal, "transaction_type" character varying, "account_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_01f020e267"
FOREIGN KEY ("account_id")
  REFERENCES "accounts" ("id")
)[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE INDEX "index_transactions_on_account_id" ON "transactions" ("account_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20260219090403"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT pg_advisory_unlock(7684012389382155225)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTenant Pluck (0.4ms)[0m  [1m[34mSELECT "public"."tenants"."subdomain" FROM "public"."tenants"[0m
  â†³ config/initializers/apartment.rb:58:in `block (2 levels) in <main>'
  [1m[36mTenant Pluck (0.1ms)[0m  [1m[34mSELECT "public"."tenants"."subdomain" FROM "public"."tenants"[0m
  â†³ config/initializers/apartment.rb:58:in `block (2 levels) in <main>'
DEPRECATION WARNING: ActiveRecord::Base.dump_schema_after_migration is deprecated and will be removed in Rails 7.1.
Use `ActiveRecord.dump_schema_after_migration` instead.
 (called from require at <internal:/Users/srinivas/.rbenv/versions/3.2.2/lib/ruby/3.2.0/rubygems/core_ext/kernel_require.rb>:37)
[Apartment] Dumping schema from default tenant...
  [1m[36mActiveRecord::SchemaMigration Pluck (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[Apartment] Schema dump completed.
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTenant Create (4.5ms)[0m  [1m[32mINSERT INTO "public"."tenants" ("name", "subdomain", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Company One"], ["subdomain", "company1"], ["created_at", "2026-02-19 09:35:45.222578"], ["updated_at", "2026-02-19 09:35:45.222578"]]
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (3.5ms)[0m  [1m[35mBEGIN;
          CREATE SCHEMA "company1";
          COMMIT;[0m
  [1m[35mSQL (12.7ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (1.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "accounts" CASCADE[0m
  [1m[35m (24.0ms)[0m  [1m[35mCREATE TABLE "accounts" ("id" bigserial primary key, "name" character varying, "balance" decimal, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "approvals" CASCADE[0m
  [1m[35m (4.2ms)[0m  [1m[35mCREATE TABLE "approvals" ("id" bigserial primary key, "expense_id" bigint NOT NULL, "approver_id" bigint, "status" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE INDEX "index_approvals_on_expense_id" ON "approvals" ("expense_id")[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "categories" CASCADE[0m
  [1m[35m (3.1ms)[0m  [1m[35mCREATE TABLE "categories" ("id" bigserial primary key, "name" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "companies" CASCADE[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE TABLE "companies" ("id" bigserial primary key, "name" character varying, "subdomain" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "expenses" CASCADE[0m
  [1m[35m (2.5ms)[0m  [1m[35mCREATE TABLE "expenses" ("id" bigserial primary key, "amount" decimal, "description" text, "status" character varying, "user_id" bigint NOT NULL, "category_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE INDEX "index_expenses_on_category_id" ON "expenses" ("category_id")[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE INDEX "index_expenses_on_user_id" ON "expenses" ("user_id")[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "tenants" CASCADE[0m
  [1m[35m (4.0ms)[0m  [1m[35mCREATE TABLE "tenants" ("id" bigserial primary key, "name" character varying, "subdomain" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "transactions" CASCADE[0m
  [1m[35m (4.7ms)[0m  [1m[35mCREATE TABLE "transactions" ("id" bigserial primary key, "amount" decimal, "transaction_type" character varying, "account_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE INDEX "index_transactions_on_account_id" ON "transactions" ("account_id")[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "users" CASCADE[0m
  [1m[35m (4.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "name" character varying, "email" character varying, "role" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (3.8ms)[0m  [1m[35mALTER TABLE "approvals" ADD CONSTRAINT "fk_rails_a8b2d49d72"
FOREIGN KEY ("expense_id")
  REFERENCES "expenses" ("id")
[0m
  [1m[35m (4.6ms)[0m  [1m[35mALTER TABLE "expenses" ADD CONSTRAINT "fk_rails_06966d0da0"
FOREIGN KEY ("category_id")
  REFERENCES "categories" ("id")
[0m
  [1m[35m (1.8ms)[0m  [1m[35mALTER TABLE "expenses" ADD CONSTRAINT "fk_rails_c3ee69df61"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.7ms)[0m  [1m[35mALTER TABLE "transactions" ADD CONSTRAINT "fk_rails_01f020e267"
FOREIGN KEY ("account_id")
  REFERENCES "accounts" ("id")
[0m
  [1m[35m (3.4ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (1.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.7ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20260219090403)[0m
  [1m[35m (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20260219080021),
(20260219080617),
(20260219090116),
(20260219090209),
(20260219090304),
(20260219090321),
(20260219090333);

[0m
  [1m[35m (6.8ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.7ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2026-02-19 09:35:45.373989"], ["updated_at", "2026-02-19 09:35:45.373989"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_try_advisory_lock(7684012389382155225)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (1.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.7ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(7684012389382155225)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTenant Pluck (0.5ms)[0m  [1m[34mSELECT "public"."tenants"."subdomain" FROM "public"."tenants"[0m
  â†³ config/initializers/apartment.rb:58:in `block (2 levels) in <main>'
  [1m[36mTenant Pluck (0.1ms)[0m  [1m[34mSELECT "public"."tenants"."subdomain" FROM "public"."tenants"[0m
  â†³ config/initializers/apartment.rb:58:in `block (2 levels) in <main>'
  [1m[36mTenant Pluck (0.1ms)[0m  [1m[34mSELECT "public"."tenants"."subdomain" FROM "public"."tenants"[0m
  â†³ config/initializers/apartment.rb:58:in `block (2 levels) in <main>'
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_try_advisory_lock(7684012389382155225)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT pg_advisory_unlock(7684012389382155225)[0m
DEPRECATION WARNING: ActiveRecord::Base.dump_schema_after_migration is deprecated and will be removed in Rails 7.1.
Use `ActiveRecord.dump_schema_after_migration` instead.
 (called from require at <internal:/Users/srinivas/.rbenv/versions/3.2.2/lib/ruby/3.2.0/rubygems/core_ext/kernel_require.rb>:37)
[Apartment] Dumping schema from default tenant...
  [1m[36mActiveRecord::SchemaMigration Pluck (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[Apartment] Schema dump completed.
Started GET "/" for ::1 at 2026-02-19 15:07:33 +0530
  [1m[36mActiveRecord::SchemaMigration Pluck (1.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Rails::WelcomeController#index as HTML
  Rendering /Users/srinivas/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/railties-7.0.10/lib/rails/templates/rails/welcome/index.html.erb
  Rendered /Users/srinivas/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/railties-7.0.10/lib/rails/templates/rails/welcome/index.html.erb (Duration: 1.8ms | Allocations: 630)
Completed 200 OK in 24ms (Views: 6.1ms | ActiveRecord: 0.0ms | Allocations: 7092)


Started GET "/" for ::1 at 2026-02-19 15:07:41 +0530
Processing by Rails::WelcomeController#index as HTML
  Rendering /Users/srinivas/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/railties-7.0.10/lib/rails/templates/rails/welcome/index.html.erb
  Rendered /Users/srinivas/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/railties-7.0.10/lib/rails/templates/rails/welcome/index.html.erb (Duration: 0.7ms | Allocations: 272)
Completed 200 OK in 3ms (Views: 1.4ms | ActiveRecord: 0.0ms | Allocations: 871)


Started GET "/" for ::1 at 2026-02-19 15:08:43 +0530
Processing by Rails::WelcomeController#index as HTML
  Rendering /Users/srinivas/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/railties-7.0.10/lib/rails/templates/rails/welcome/index.html.erb
  Rendered /Users/srinivas/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/railties-7.0.10/lib/rails/templates/rails/welcome/index.html.erb (Duration: 0.0ms | Allocations: 14)
Completed 200 OK in 0ms (Views: 0.2ms | ActiveRecord: 0.0ms | Allocations: 196)


Started GET "/" for ::1 at 2026-02-19 15:11:31 +0530
  [1m[36mActiveRecord::SchemaMigration Pluck (1.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Rails::WelcomeController#index as HTML
  Rendering /Users/srinivas/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/railties-7.0.10/lib/rails/templates/rails/welcome/index.html.erb
  Rendered /Users/srinivas/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/railties-7.0.10/lib/rails/templates/rails/welcome/index.html.erb (Duration: 0.7ms | Allocations: 486)
Completed 200 OK in 6ms (Views: 1.9ms | ActiveRecord: 0.0ms | Allocations: 4029)


[ActionDispatch::HostAuthorization::DefaultResponseApp] Blocked hosts: company1.lvh.me:3000
[ActionDispatch::HostAuthorization::DefaultResponseApp] Blocked hosts: company1.lvh.me:3000
[ActionDispatch::HostAuthorization::DefaultResponseApp] Blocked hosts: company1.lvh.me:3000
[ActionDispatch::HostAuthorization::DefaultResponseApp] Blocked hosts: company1.lvh.me:3000
Started GET "/" for ::1 at 2026-02-19 15:21:59 +0530
  [1m[36mActiveRecord::SchemaMigration Pluck (1.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Rails::WelcomeController#index as HTML
  Rendering /Users/srinivas/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/railties-7.0.10/lib/rails/templates/rails/welcome/index.html.erb
  Rendered /Users/srinivas/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/railties-7.0.10/lib/rails/templates/rails/welcome/index.html.erb (Duration: 0.9ms | Allocations: 287)
Completed 200 OK in 4ms (Views: 1.3ms | ActiveRecord: 0.0ms | Allocations: 2167)


Started GET "/" for ::1 at 2026-02-19 15:23:08 +0530
Processing by Rails::WelcomeController#index as HTML
  Rendering /Users/srinivas/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/railties-7.0.10/lib/rails/templates/rails/welcome/index.html.erb
  Rendered /Users/srinivas/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/railties-7.0.10/lib/rails/templates/rails/welcome/index.html.erb (Duration: 1.0ms | Allocations: 271)
Completed 200 OK in 3ms (Views: 1.8ms | ActiveRecord: 0.0ms | Allocations: 862)


Started GET "/" for ::1 at 2026-02-19 15:26:24 +0530
Processing by Rails::WelcomeController#index as HTML
  Rendering /Users/srinivas/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/railties-7.0.10/lib/rails/templates/rails/welcome/index.html.erb
  Rendered /Users/srinivas/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/railties-7.0.10/lib/rails/templates/rails/welcome/index.html.erb (Duration: 0.0ms | Allocations: 14)
Completed 200 OK in 0ms (Views: 0.3ms | ActiveRecord: 0.0ms | Allocations: 197)


Started GET "/test" for ::1 at 2026-02-19 15:26:28 +0530
Processing by Api::TestController#index as HTML
Completed 200 OK in 23ms (Views: 0.2ms | ActiveRecord: 0.5ms | Allocations: 345)


Started GET "/favicon.ico" for ::1 at 2026-02-19 15:26:28 +0530
  
ActionController::RoutingError (No route matches [GET] "/favicon.ico"):
  
Started GET "/apple-touch-icon-precomposed.png" for ::1 at 2026-02-19 15:29:30 +0530
Started GET "/apple-touch-icon.png" for ::1 at 2026-02-19 15:29:30 +0530
Started GET "/favicon.ico" for ::1 at 2026-02-19 15:29:30 +0530
  
ActionController::RoutingError (No route matches [GET] "/apple-touch-icon-precomposed.png"):
  
  
ActionController::RoutingError (No route matches [GET] "/apple-touch-icon.png"):
  
  
ActionController::RoutingError (No route matches [GET] "/favicon.ico"):
  
Started GET "/test" for 127.0.0.1 at 2026-02-19 15:32:59 +0530
  [1m[36mActiveRecord::SchemaMigration Pluck (1.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::TestController#index as HTML
Completed 200 OK in 6ms (Views: 0.1ms | ActiveRecord: 0.0ms | Allocations: 2372)


Started GET "/apple-touch-icon-precomposed.png" for 127.0.0.1 at 2026-02-19 15:33:18 +0530
Started GET "/favicon.ico" for 127.0.0.1 at 2026-02-19 15:33:18 +0530
Started GET "/apple-touch-icon.png" for 127.0.0.1 at 2026-02-19 15:33:18 +0530
  
ActionController::RoutingError (No route matches [GET] "/apple-touch-icon-precomposed.png"):
  
  
ActionController::RoutingError (No route matches [GET] "/favicon.ico"):
  
  
ActionController::RoutingError (No route matches [GET] "/apple-touch-icon.png"):
  
Started GET "/test" for 127.0.0.1 at 2026-02-19 15:35:05 +0530
Processing by Api::TestController#index as HTML
Completed 200 OK in 1ms (Views: 0.3ms | ActiveRecord: 0.0ms | Allocations: 95)


Started GET "/application" for 127.0.0.1 at 2026-02-19 15:35:09 +0530
  
ActionController::RoutingError (No route matches [GET] "/application"):
  
Started GET "/test" for 127.0.0.1 at 2026-02-19 15:35:32 +0530
Processing by Api::TestController#index as HTML
Completed 200 OK in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms | Allocations: 92)


Started GET "/" for 127.0.0.1 at 2026-02-19 15:35:32 +0530
Processing by Rails::WelcomeController#index as HTML
  Rendering /Users/srinivas/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/railties-7.0.10/lib/rails/templates/rails/welcome/index.html.erb
  Rendered /Users/srinivas/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/railties-7.0.10/lib/rails/templates/rails/welcome/index.html.erb (Duration: 1.6ms | Allocations: 280)
Completed 200 OK in 8ms (Views: 2.6ms | ActiveRecord: 0.0ms | Allocations: 2036)


Started GET "/" for 127.0.0.1 at 2026-02-19 15:52:41 +0530
  [1m[36mActiveRecord::SchemaMigration Pluck (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Rails::WelcomeController#index as HTML
  Rendering /Users/srinivas/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/railties-7.0.10/lib/rails/templates/rails/welcome/index.html.erb
  Rendered /Users/srinivas/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/railties-7.0.10/lib/rails/templates/rails/welcome/index.html.erb (Duration: 1.1ms | Allocations: 486)
Completed 200 OK in 10ms (Views: 3.0ms | ActiveRecord: 0.0ms | Allocations: 4029)


Started GET "/" for 127.0.0.1 at 2026-02-19 15:52:44 +0530
Processing by Rails::WelcomeController#index as HTML
  Rendering /Users/srinivas/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/railties-7.0.10/lib/rails/templates/rails/welcome/index.html.erb
  Rendered /Users/srinivas/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/railties-7.0.10/lib/rails/templates/rails/welcome/index.html.erb (Duration: 0.7ms | Allocations: 271)
Completed 200 OK in 2ms (Views: 1.5ms | ActiveRecord: 0.0ms | Allocations: 866)


Started GET "/test" for 127.0.0.1 at 2026-02-19 15:52:48 +0530
  
ActionController::RoutingError (No route matches [GET] "/test"):
  
Started GET "/api/test" for 127.0.0.1 at 2026-02-19 15:52:53 +0530
  
ActionController::RoutingError (No route matches [GET] "/api/test"):
  
Started GET "/api/v1/test" for 127.0.0.1 at 2026-02-19 15:52:59 +0530
  
ActionController::RoutingError (No route matches [GET] "/api/v1/test"):
  
Started GET "/api/v1/expenses" for 127.0.0.1 at 2026-02-19 15:53:44 +0530
  
ActionController::RoutingError (uninitialized constant Api::V1):
  
Started GET "/api/v1/expenses" for 127.0.0.1 at 2026-02-19 16:03:16 +0530
  [1m[36mActiveRecord::SchemaMigration Pluck (4.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  
ActionController::RoutingError (uninitialized constant Api::V1):
  
Started GET "/api/v1/expenses" for 127.0.0.1 at 2026-02-19 16:04:59 +0530
  [1m[36mActiveRecord::SchemaMigration Pluck (1.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  
ActionController::RoutingError (uninitialized constant Api::V1):
  
Started GET "/api/v1/expenses" for 127.0.0.1 at 2026-02-19 16:09:49 +0530
  [1m[36mActiveRecord::SchemaMigration Pluck (1.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::ExpensesController#index as HTML
  [1m[36mExpense Load (6.6ms)[0m  [1m[34mSELECT "expenses".* FROM "expenses"[0m
  â†³ app/controllers/api/v1/expenses_controller.rb:7:in `index'
Completed 200 OK in 23ms (Views: 0.6ms | ActiveRecord: 6.6ms | Allocations: 6273)


Started GET "/apple-touch-icon-precomposed.png" for 127.0.0.1 at 2026-02-19 16:10:19 +0530
Started GET "/apple-touch-icon.png" for 127.0.0.1 at 2026-02-19 16:10:19 +0530
Started GET "/favicon.ico" for 127.0.0.1 at 2026-02-19 16:10:19 +0530
  
ActionController::RoutingError (No route matches [GET] "/apple-touch-icon-precomposed.png"):
  
  
ActionController::RoutingError (No route matches [GET] "/favicon.ico"):
  
  
ActionController::RoutingError (No route matches [GET] "/apple-touch-icon.png"):
  
Started GET "/apple-touch-icon-precomposed.png" for 127.0.0.1 at 2026-02-19 16:13:23 +0530
Started GET "/apple-touch-icon.png" for 127.0.0.1 at 2026-02-19 16:13:23 +0530
Started GET "/favicon.ico" for 127.0.0.1 at 2026-02-19 16:13:23 +0530
  
ActionController::RoutingError (No route matches [GET] "/apple-touch-icon-precomposed.png"):
  
  
ActionController::RoutingError (No route matches [GET] "/apple-touch-icon.png"):
  
  
ActionController::RoutingError (No route matches [GET] "/favicon.ico"):
  
Started GET "/apple-touch-icon-precomposed.png" for 127.0.0.1 at 2026-02-19 16:13:25 +0530
Started GET "/apple-touch-icon.png" for 127.0.0.1 at 2026-02-19 16:13:25 +0530
Started GET "/favicon.ico" for 127.0.0.1 at 2026-02-19 16:13:25 +0530
  
ActionController::RoutingError (No route matches [GET] "/apple-touch-icon-precomposed.png"):
  
  
ActionController::RoutingError (No route matches [GET] "/apple-touch-icon.png"):
  
  
ActionController::RoutingError (No route matches [GET] "/favicon.ico"):
  
Started GET "/api/v1/expenses" for 127.0.0.1 at 2026-02-19 16:18:20 +0530
Processing by Api::V1::ExpensesController#index as */*
  [1m[36mExpense Load (2.2ms)[0m  [1m[34mSELECT "expenses".* FROM "expenses"[0m
  â†³ app/controllers/api/v1/expenses_controller.rb:7:in `index'
Completed 200 OK in 3ms (Views: 0.8ms | ActiveRecord: 2.2ms | Allocations: 848)


  [1m[36mTRANSACTION (4.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (2.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (1.7ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Test"], ["email", "test@gmail.com"], ["role", "admin"], ["created_at", "2026-02-19 11:02:47.548947"], ["updated_at", "2026-02-19 11:02:47.548947"]]
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mCOMMIT[0m
Started GET "/api/v1/users/" for 127.0.0.1 at 2026-02-19 16:34:04 +0530
  [1m[36mActiveRecord::SchemaMigration Pluck (1.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::UsersController#index as */*
  [1m[36mUser Load (5.3ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  â†³ app/controllers/api/v1/users_controller.rb:7:in `index'
Completed 200 OK in 12ms (Views: 0.7ms | ActiveRecord: 5.3ms | Allocations: 5030)


Started GET "/api/v1/users/1" for 127.0.0.1 at 2026-02-19 16:35:33 +0530
Processing by Api::V1::UsersController#show as */*
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/users_controller.rb:39:in `set_user'
Completed 404 Not Found in 12ms (Views: 0.1ms | ActiveRecord: 6.0ms | Allocations: 2791)


Started POST "/api/v1/users" for 127.0.0.1 at 2026-02-19 16:36:21 +0530
Processing by Api::V1::UsersController#create as */*
  Parameters: {"user"=>{"name"=>"Srinivas", "email"=>"srinivas@gmail.com", "role"=>"admin"}}
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api/v1/users_controller.rb:16:in `create'
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "srinivas@gmail.com"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/users_controller.rb:16:in `create'
  [1m[36mUser Create (2.2ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Srinivas"], ["email", "srinivas@gmail.com"], ["role", "admin"], ["created_at", "2026-02-19 11:06:21.639317"], ["updated_at", "2026-02-19 11:06:21.639317"]]
  â†³ app/controllers/api/v1/users_controller.rb:16:in `create'
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api/v1/users_controller.rb:16:in `create'
Completed 201 Created in 19ms (Views: 0.2ms | ActiveRecord: 3.6ms | Allocations: 8342)


Started POST "/api/v1/users" for 127.0.0.1 at 2026-02-19 16:36:45 +0530
Processing by Api::V1::UsersController#create as */*
  Parameters: {"user"=>{"name"=>"John", "email"=>"John@gmail.com", "role"=>"user"}}
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api/v1/users_controller.rb:16:in `create'
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "John@gmail.com"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/users_controller.rb:16:in `create'
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "John"], ["email", "John@gmail.com"], ["role", "user"], ["created_at", "2026-02-19 11:06:45.376967"], ["updated_at", "2026-02-19 11:06:45.376967"]]
  â†³ app/controllers/api/v1/users_controller.rb:16:in `create'
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api/v1/users_controller.rb:16:in `create'
Completed 201 Created in 7ms (Views: 0.3ms | ActiveRecord: 1.7ms | Allocations: 2981)


Started GET "/api/v1/users" for 127.0.0.1 at 2026-02-19 16:38:19 +0530
Processing by Api::V1::UsersController#index as */*
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  â†³ app/controllers/api/v1/users_controller.rb:7:in `index'
Completed 200 OK in 2ms (Views: 1.6ms | ActiveRecord: 0.2ms | Allocations: 970)


Started GET "/api/v1/users/1" for 127.0.0.1 at 2026-02-19 16:38:35 +0530
Processing by Api::V1::UsersController#show as */*
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/users_controller.rb:39:in `set_user'
Completed 200 OK in 2ms (Views: 0.3ms | ActiveRecord: 0.5ms | Allocations: 673)


Started PUT "/api/v1/users/1" for 127.0.0.1 at 2026-02-19 16:39:19 +0530
Processing by Api::V1::UsersController#update as */*
  Parameters: {"user"=>{"name"=>"Srinivas Reddy"}, "id"=>"1"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/users_controller.rb:39:in `set_user'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api/v1/users_controller.rb:24:in `update'
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["email", "srinivas@gmail.com"], ["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/users_controller.rb:24:in `update'
  [1m[36mUser Update (0.6ms)[0m  [1m[33mUPDATE "users" SET "name" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["name", "Srinivas Reddy"], ["updated_at", "2026-02-19 11:09:19.907858"], ["id", 1]]
  â†³ app/controllers/api/v1/users_controller.rb:24:in `update'
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api/v1/users_controller.rb:24:in `update'
Completed 200 OK in 12ms (Views: 0.3ms | ActiveRecord: 3.4ms | Allocations: 3798)


Started DELETE "/api/v1/users/1" for 127.0.0.1 at 2026-02-19 16:39:36 +0530
Processing by Api::V1::UsersController#destroy as */*
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/users_controller.rb:39:in `set_user'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api/v1/users_controller.rb:32:in `destroy'
  [1m[36mUser Destroy (1.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 1]]
  â†³ app/controllers/api/v1/users_controller.rb:32:in `destroy'
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api/v1/users_controller.rb:32:in `destroy'
Completed 200 OK in 6ms (Views: 0.3ms | ActiveRecord: 2.2ms | Allocations: 2190)


Started GET "/api/v1/categories" for 127.0.0.1 at 2026-02-19 16:39:57 +0530
Processing by Api::V1::CategoriesController#index as */*
  [1m[36mCategory Load (0.9ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/controllers/api/v1/categories_controller.rb:7:in `index'
Completed 200 OK in 4ms (Views: 0.5ms | ActiveRecord: 0.9ms | Allocations: 1594)


Started POST "/api/v1/categories" for 127.0.0.1 at 2026-02-19 16:50:39 +0530
Processing by Api::V1::CategoriesController#create as */*
  Parameters: {"category"=>{"name"=>"Travel"}}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api/v1/categories_controller.rb:16:in `create'
  [1m[36mCategory Create (6.8ms)[0m  [1m[32mINSERT INTO "categories" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Travel"], ["created_at", "2026-02-19 11:20:39.622211"], ["updated_at", "2026-02-19 11:20:39.622211"]]
  â†³ app/controllers/api/v1/categories_controller.rb:16:in `create'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api/v1/categories_controller.rb:16:in `create'
Completed 201 Created in 31ms (Views: 0.2ms | ActiveRecord: 28.5ms | Allocations: 3720)


Started POST "/api/v1/categories" for 127.0.0.1 at 2026-02-19 16:51:20 +0530
Processing by Api::V1::CategoriesController#create as */*
  Parameters: {"category"=>{"name"=>"Bussiness"}}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api/v1/categories_controller.rb:16:in `create'
  [1m[36mCategory Create (0.3ms)[0m  [1m[32mINSERT INTO "categories" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Bussiness"], ["created_at", "2026-02-19 11:21:20.552168"], ["updated_at", "2026-02-19 11:21:20.552168"]]
  â†³ app/controllers/api/v1/categories_controller.rb:16:in `create'
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api/v1/categories_controller.rb:16:in `create'
Completed 201 Created in 3ms (Views: 0.3ms | ActiveRecord: 1.1ms | Allocations: 2042)


Started GET "/api/v1/categories" for 127.0.0.1 at 2026-02-19 16:51:30 +0530
Processing by Api::V1::CategoriesController#index as */*
  [1m[36mCategory Load (0.8ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/controllers/api/v1/categories_controller.rb:7:in `index'
Completed 200 OK in 3ms (Views: 1.8ms | ActiveRecord: 0.8ms | Allocations: 1007)


Started PUT "/api/v1/categories/1" for 127.0.0.1 at 2026-02-19 16:52:45 +0530
Processing by Api::V1::CategoriesController#update as */*
  Parameters: {"id"=>"1"}
  [1m[36mCategory Load (0.2ms)[0m  [1m[34mSELECT "categories".* FROM "categories" WHERE "categories"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/categories_controller.rb:39:in `set_category'
Completed 400 Bad Request in 2ms (ActiveRecord: 0.2ms | Allocations: 774)


  
ActionController::ParameterMissing (param is missing or the value is empty: category):
  
app/controllers/api/v1/categories_controller.rb:43:in `category_params'
app/controllers/api/v1/categories_controller.rb:24:in `update'
Started PUT "/api/v1/categories/1" for 127.0.0.1 at 2026-02-19 16:53:13 +0530
Processing by Api::V1::CategoriesController#update as */*
  Parameters: {"category"=>{"name"=>"Traveling"}, "id"=>"1"}
  [1m[36mCategory Load (0.3ms)[0m  [1m[34mSELECT "categories".* FROM "categories" WHERE "categories"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/categories_controller.rb:39:in `set_category'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api/v1/categories_controller.rb:24:in `update'
  [1m[36mCategory Update (0.4ms)[0m  [1m[33mUPDATE "categories" SET "name" = $1, "updated_at" = $2 WHERE "categories"."id" = $3[0m  [["name", "Traveling"], ["updated_at", "2026-02-19 11:23:13.853157"], ["id", 1]]
  â†³ app/controllers/api/v1/categories_controller.rb:24:in `update'
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api/v1/categories_controller.rb:24:in `update'
Completed 200 OK in 7ms (Views: 0.2ms | ActiveRecord: 2.0ms | Allocations: 2617)


Started DELETE "/api/v1/categories/2" for 127.0.0.1 at 2026-02-19 16:53:33 +0530
Processing by Api::V1::CategoriesController#destroy as */*
  Parameters: {"id"=>"2"}
  [1m[36mCategory Load (0.3ms)[0m  [1m[34mSELECT "categories".* FROM "categories" WHERE "categories"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/categories_controller.rb:39:in `set_category'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api/v1/categories_controller.rb:32:in `destroy'
  [1m[36mCategory Destroy (1.6ms)[0m  [1m[31mDELETE FROM "categories" WHERE "categories"."id" = $1[0m  [["id", 2]]
  â†³ app/controllers/api/v1/categories_controller.rb:32:in `destroy'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api/v1/categories_controller.rb:32:in `destroy'
Completed 200 OK in 5ms (Views: 0.1ms | ActiveRecord: 2.3ms | Allocations: 2127)


Started GET "/api/v1/expenses" for 127.0.0.1 at 2026-02-19 16:54:17 +0530
Processing by Api::V1::ExpensesController#index as */*
  [1m[36mExpense Load (4.8ms)[0m  [1m[34mSELECT "expenses".* FROM "expenses"[0m
  â†³ app/controllers/api/v1/expenses_controller.rb:7:in `index'
Completed 200 OK in 11ms (Views: 0.7ms | ActiveRecord: 4.8ms | Allocations: 2677)


Started POST "/api/v1/expenses" for 127.0.0.1 at 2026-02-19 16:54:33 +0530
Processing by Api::V1::ExpensesController#create as */*
  Parameters: {"expense"=>{"amount"=>1500, "description"=>"Flight ticket", "status"=>"pending", "user_id"=>1, "category_id"=>1}}
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api/v1/expenses_controller.rb:16:in `create'
  [1m[36mUser Load (2.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/expenses_controller.rb:16:in `create'
  [1m[36mCategory Load (1.7ms)[0m  [1m[34mSELECT "categories".* FROM "categories" WHERE "categories"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/expenses_controller.rb:16:in `create'
  [1m[36mTRANSACTION (4.5ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/controllers/api/v1/expenses_controller.rb:16:in `create'
Completed 422 Unprocessable Entity in 52ms (Views: 0.1ms | ActiveRecord: 13.9ms | Allocations: 13647)


Started GET "/api/v1/users" for 127.0.0.1 at 2026-02-19 16:54:51 +0530
Processing by Api::V1::UsersController#index as */*
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  â†³ app/controllers/api/v1/users_controller.rb:7:in `index'
Completed 200 OK in 2ms (Views: 1.4ms | ActiveRecord: 0.3ms | Allocations: 2192)


Started POST "/api/v1/categories" for 127.0.0.1 at 2026-02-19 16:55:48 +0530
Processing by Api::V1::CategoriesController#create as */*
Completed 400 Bad Request in 0ms (ActiveRecord: 0.0ms | Allocations: 113)


  
ActionController::ParameterMissing (param is missing or the value is empty: category):
  
app/controllers/api/v1/categories_controller.rb:43:in `category_params'
app/controllers/api/v1/categories_controller.rb:15:in `create'
Started GET "/api/v1/categories" for 127.0.0.1 at 2026-02-19 16:55:52 +0530
Processing by Api::V1::CategoriesController#index as */*
  [1m[36mCategory Load (0.3ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/controllers/api/v1/categories_controller.rb:7:in `index'
Completed 200 OK in 2ms (Views: 1.3ms | ActiveRecord: 0.3ms | Allocations: 797)


Started POST "/api/v1/expenses" for 127.0.0.1 at 2026-02-19 16:56:11 +0530
Processing by Api::V1::ExpensesController#create as */*
  Parameters: {"expense"=>{"amount"=>1500, "description"=>"Flight ticket", "status"=>"pending", "user_id"=>2, "category_id"=>1}}
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api/v1/expenses_controller.rb:16:in `create'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/expenses_controller.rb:16:in `create'
  [1m[36mCategory Load (0.3ms)[0m  [1m[34mSELECT "categories".* FROM "categories" WHERE "categories"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/expenses_controller.rb:16:in `create'
  [1m[36mExpense Create (3.9ms)[0m  [1m[32mINSERT INTO "expenses" ("amount", "description", "status", "user_id", "category_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["amount", "1500.0"], ["description", "Flight ticket"], ["status", "pending"], ["user_id", 2], ["category_id", 1], ["created_at", "2026-02-19 11:26:11.672632"], ["updated_at", "2026-02-19 11:26:11.672632"]]
  â†³ app/controllers/api/v1/expenses_controller.rb:16:in `create'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api/v1/expenses_controller.rb:16:in `create'
Completed 201 Created in 14ms (Views: 0.4ms | ActiveRecord: 5.3ms | Allocations: 4215)


Started GET "/api/v1/expenses" for 127.0.0.1 at 2026-02-19 16:56:26 +0530
Processing by Api::V1::ExpensesController#index as */*
  [1m[36mExpense Load (0.4ms)[0m  [1m[34mSELECT "expenses".* FROM "expenses"[0m
  â†³ app/controllers/api/v1/expenses_controller.rb:7:in `index'
Completed 200 OK in 3ms (Views: 2.4ms | ActiveRecord: 0.4ms | Allocations: 853)


Started PUT "/api/v1/expenses" for 127.0.0.1 at 2026-02-19 16:57:26 +0530
  
ActionController::RoutingError (No route matches [PUT] "/api/v1/expenses"):
  
Started PUT "/api/v1/expenses" for 127.0.0.1 at 2026-02-19 16:59:01 +0530
  
ActionController::RoutingError (No route matches [PUT] "/api/v1/expenses"):
  
Started PUT "/api/v1/expenses/1" for 127.0.0.1 at 2026-02-19 17:00:40 +0530
Processing by Api::V1::ExpensesController#update as */*
  Parameters: {"expense"=>{"amount"=>1500, "description"=>"Flight ticket", "status"=>"approved", "user_id"=>2, "category_id"=>1}, "id"=>"1"}
  [1m[36mExpense Load (0.3ms)[0m  [1m[34mSELECT "expenses".* FROM "expenses" WHERE "expenses"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/expenses_controller.rb:39:in `set_expense'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api/v1/expenses_controller.rb:24:in `update'
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/expenses_controller.rb:24:in `update'
  [1m[36mCategory Load (0.4ms)[0m  [1m[34mSELECT "categories".* FROM "categories" WHERE "categories"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/expenses_controller.rb:24:in `update'
  [1m[36mExpense Update (0.5ms)[0m  [1m[33mUPDATE "expenses" SET "status" = $1, "updated_at" = $2 WHERE "expenses"."id" = $3[0m  [["status", "approved"], ["updated_at", "2026-02-19 11:30:40.387024"], ["id", 1]]
  â†³ app/controllers/api/v1/expenses_controller.rb:24:in `update'
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api/v1/expenses_controller.rb:24:in `update'
Completed 200 OK in 14ms (Views: 0.6ms | ActiveRecord: 3.0ms | Allocations: 4843)


Started DELETE "/api/v1/expenses/1" for 127.0.0.1 at 2026-02-19 17:01:01 +0530
Processing by Api::V1::ExpensesController#destroy as */*
  Parameters: {"id"=>"1"}
  [1m[36mExpense Load (0.3ms)[0m  [1m[34mSELECT "expenses".* FROM "expenses" WHERE "expenses"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/expenses_controller.rb:39:in `set_expense'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api/v1/expenses_controller.rb:32:in `destroy'
  [1m[36mExpense Destroy (1.9ms)[0m  [1m[31mDELETE FROM "expenses" WHERE "expenses"."id" = $1[0m  [["id", 1]]
  â†³ app/controllers/api/v1/expenses_controller.rb:32:in `destroy'
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api/v1/expenses_controller.rb:32:in `destroy'
Completed 200 OK in 7ms (Views: 0.2ms | ActiveRecord: 3.0ms | Allocations: 2140)


Started POST "/api/v1/expenses" for 127.0.0.1 at 2026-02-19 17:01:39 +0530
Processing by Api::V1::ExpensesController#create as */*
  Parameters: {"expense"=>{"amount"=>1500, "description"=>"Flight ticket", "status"=>"approved", "user_id"=>2, "category_id"=>1}}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api/v1/expenses_controller.rb:16:in `create'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/expenses_controller.rb:16:in `create'
  [1m[36mCategory Load (0.1ms)[0m  [1m[34mSELECT "categories".* FROM "categories" WHERE "categories"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/expenses_controller.rb:16:in `create'
  [1m[36mExpense Create (0.4ms)[0m  [1m[32mINSERT INTO "expenses" ("amount", "description", "status", "user_id", "category_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["amount", "1500.0"], ["description", "Flight ticket"], ["status", "approved"], ["user_id", 2], ["category_id", 1], ["created_at", "2026-02-19 11:31:39.762298"], ["updated_at", "2026-02-19 11:31:39.762298"]]
  â†³ app/controllers/api/v1/expenses_controller.rb:16:in `create'
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api/v1/expenses_controller.rb:16:in `create'
Completed 201 Created in 5ms (Views: 0.3ms | ActiveRecord: 1.6ms | Allocations: 4055)


Started GET "/api/v1/approvals" for 127.0.0.1 at 2026-02-19 17:01:56 +0530
Processing by Api::V1::ApprovalsController#index as */*
  [1m[36mApproval Load (0.3ms)[0m  [1m[34mSELECT "approvals".* FROM "approvals"[0m
  â†³ app/controllers/api/v1/approvals_controller.rb:7:in `index'
Completed 200 OK in 3ms (Views: 0.7ms | ActiveRecord: 0.3ms | Allocations: 1873)


Started POST "/api/v1/approvals" for 127.0.0.1 at 2026-02-19 17:02:15 +0530
Processing by Api::V1::ApprovalsController#create as */*
  Parameters: {"approval"=>{"expense_id"=>2, "approver_id"=>1, "status"=>"approved"}}
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api/v1/approvals_controller.rb:16:in `create'
  [1m[36mExpense Load (0.2ms)[0m  [1m[34mSELECT "expenses".* FROM "expenses" WHERE "expenses"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/approvals_controller.rb:16:in `create'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/approvals_controller.rb:16:in `create'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/controllers/api/v1/approvals_controller.rb:16:in `create'
Completed 422 Unprocessable Entity in 12ms (Views: 0.1ms | ActiveRecord: 3.7ms | Allocations: 7102)


Started GET "/api/v1/users" for 127.0.0.1 at 2026-02-19 17:05:37 +0530
Processing by Api::V1::UsersController#index as */*
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  â†³ app/controllers/api/v1/users_controller.rb:7:in `index'
Completed 200 OK in 1ms (Views: 0.9ms | ActiveRecord: 0.3ms | Allocations: 824)


Started POST "/api/v1/users" for 127.0.0.1 at 2026-02-19 17:06:45 +0530
Processing by Api::V1::UsersController#create as */*
  Parameters: {"users"=>{"id"=>1, "name"=>"Srinivas Reddy", "email"=>"srinivas@gmail.com", "role"=>"admin"}, "user"=>{}}
Completed 400 Bad Request in 0ms (ActiveRecord: 0.0ms | Allocations: 134)


  
ActionController::ParameterMissing (param is missing or the value is empty: user):
  
app/controllers/api/v1/users_controller.rb:43:in `user_params'
app/controllers/api/v1/users_controller.rb:15:in `create'
Started POST "/api/v1/users" for 127.0.0.1 at 2026-02-19 17:07:27 +0530
Processing by Api::V1::UsersController#create as */*
  Parameters: {"user"=>{"name"=>"Srinivas reddy", "email"=>"srinivas@gmail.com", "role"=>"admin"}}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api/v1/users_controller.rb:16:in `create'
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "srinivas@gmail.com"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/users_controller.rb:16:in `create'
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Srinivas reddy"], ["email", "srinivas@gmail.com"], ["role", "admin"], ["created_at", "2026-02-19 11:37:27.054537"], ["updated_at", "2026-02-19 11:37:27.054537"]]
  â†³ app/controllers/api/v1/users_controller.rb:16:in `create'
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api/v1/users_controller.rb:16:in `create'
Completed 201 Created in 8ms (Views: 0.5ms | ActiveRecord: 2.6ms | Allocations: 3291)


Started POST "/api/v1/approvals" for 127.0.0.1 at 2026-02-19 17:08:11 +0530
Processing by Api::V1::ApprovalsController#create as */*
  Parameters: {"approval"=>{"expense_id"=>2, "approver_id"=>3, "status"=>"approved"}}
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api/v1/approvals_controller.rb:16:in `create'
  [1m[36mExpense Load (0.3ms)[0m  [1m[34mSELECT "expenses".* FROM "expenses" WHERE "expenses"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/approvals_controller.rb:16:in `create'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/approvals_controller.rb:16:in `create'
  [1m[36mApproval Create (2.6ms)[0m  [1m[32mINSERT INTO "approvals" ("expense_id", "approver_id", "status", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["expense_id", 2], ["approver_id", 3], ["status", "approved"], ["created_at", "2026-02-19 11:38:11.536193"], ["updated_at", "2026-02-19 11:38:11.536193"]]
  â†³ app/controllers/api/v1/approvals_controller.rb:16:in `create'
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api/v1/approvals_controller.rb:16:in `create'
Completed 201 Created in 12ms (Views: 0.3ms | ActiveRecord: 4.0ms | Allocations: 4047)


Started PUT "/api/v1/approvals/1" for 127.0.0.1 at 2026-02-19 17:08:35 +0530
Processing by Api::V1::ApprovalsController#update as */*
  Parameters: {"approval"=>{"expense_id"=>2, "approver_id"=>3, "status"=>"reject"}, "id"=>"1"}
  [1m[36mApproval Load (0.2ms)[0m  [1m[34mSELECT "approvals".* FROM "approvals" WHERE "approvals"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/approvals_controller.rb:39:in `set_approval'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api/v1/approvals_controller.rb:24:in `update'
  [1m[36mExpense Load (0.2ms)[0m  [1m[34mSELECT "expenses".* FROM "expenses" WHERE "expenses"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/approvals_controller.rb:24:in `update'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/approvals_controller.rb:24:in `update'
  [1m[36mApproval Update (0.3ms)[0m  [1m[33mUPDATE "approvals" SET "status" = $1, "updated_at" = $2 WHERE "approvals"."id" = $3[0m  [["status", "reject"], ["updated_at", "2026-02-19 11:38:35.666473"], ["id", 1]]
  â†³ app/controllers/api/v1/approvals_controller.rb:24:in `update'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api/v1/approvals_controller.rb:24:in `update'
Completed 200 OK in 6ms (Views: 0.1ms | ActiveRecord: 1.3ms | Allocations: 4723)


Started DELETE "/api/v1/approvals/1" for 127.0.0.1 at 2026-02-19 17:08:47 +0530
Processing by Api::V1::ApprovalsController#destroy as */*
  Parameters: {"id"=>"1"}
  [1m[36mApproval Load (0.3ms)[0m  [1m[34mSELECT "approvals".* FROM "approvals" WHERE "approvals"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/approvals_controller.rb:39:in `set_approval'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api/v1/approvals_controller.rb:32:in `destroy'
  [1m[36mApproval Destroy (0.7ms)[0m  [1m[31mDELETE FROM "approvals" WHERE "approvals"."id" = $1[0m  [["id", 1]]
  â†³ app/controllers/api/v1/approvals_controller.rb:32:in `destroy'
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api/v1/approvals_controller.rb:32:in `destroy'
Completed 200 OK in 6ms (Views: 0.1ms | ActiveRecord: 1.7ms | Allocations: 2131)


Started POST "/api/v1/approvals" for 127.0.0.1 at 2026-02-19 17:09:14 +0530
Processing by Api::V1::ApprovalsController#create as */*
  Parameters: {"approval"=>{"expense_id"=>2, "approver_id"=>3, "status"=>"approved"}}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api/v1/approvals_controller.rb:16:in `create'
  [1m[36mExpense Load (0.2ms)[0m  [1m[34mSELECT "expenses".* FROM "expenses" WHERE "expenses"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/approvals_controller.rb:16:in `create'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/approvals_controller.rb:16:in `create'
  [1m[36mApproval Create (0.4ms)[0m  [1m[32mINSERT INTO "approvals" ("expense_id", "approver_id", "status", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["expense_id", 2], ["approver_id", 3], ["status", "approved"], ["created_at", "2026-02-19 11:39:14.696431"], ["updated_at", "2026-02-19 11:39:14.696431"]]
  â†³ app/controllers/api/v1/approvals_controller.rb:16:in `create'
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api/v1/approvals_controller.rb:16:in `create'
Completed 201 Created in 6ms (Views: 0.3ms | ActiveRecord: 1.8ms | Allocations: 3947)


Started POST "/api/v1/transactions" for 127.0.0.1 at 2026-02-19 17:09:43 +0530
Processing by Api::V1::TransactionsController#create as */*
  Parameters: {"transaction"=>{"amount"=>1500, "transaction_type"=>"debit", "account_id"=>1}}
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api/v1/transactions_controller.rb:16:in `create'
  [1m[36mAccount Load (1.3ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/transactions_controller.rb:16:in `create'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/controllers/api/v1/transactions_controller.rb:16:in `create'
Completed 422 Unprocessable Entity in 28ms (Views: 0.1ms | ActiveRecord: 19.9ms | Allocations: 7392)


Started POST "/api/v1/accounts" for 127.0.0.1 at 2026-02-19 17:10:27 +0530
Processing by Api::V1::AccountsController#create as */*
  Parameters: {"account"=>{"name"=>"Corporate Account", "balance"=>50000}}
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api/v1/accounts_controller.rb:16:in `create'
  [1m[36mAccount Create (2.1ms)[0m  [1m[32mINSERT INTO "accounts" ("name", "balance", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Corporate Account"], ["balance", "50000.0"], ["created_at", "2026-02-19 11:40:27.663009"], ["updated_at", "2026-02-19 11:40:27.663009"]]
  â†³ app/controllers/api/v1/accounts_controller.rb:16:in `create'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api/v1/accounts_controller.rb:16:in `create'
Completed 201 Created in 8ms (Views: 0.2ms | ActiveRecord: 2.7ms | Allocations: 4276)


Started GET "/api/v1/accounts" for 127.0.0.1 at 2026-02-19 17:10:40 +0530
Processing by Api::V1::AccountsController#index as */*
  [1m[36mAccount Load (0.5ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts"[0m
  â†³ app/controllers/api/v1/accounts_controller.rb:7:in `index'
Completed 200 OK in 3ms (Views: 2.1ms | ActiveRecord: 0.5ms | Allocations: 871)


Started PUT "/api/v1/accounts/1" for 127.0.0.1 at 2026-02-19 17:11:08 +0530
Processing by Api::V1::AccountsController#update as */*
  Parameters: {"account"=>{"name"=>"Corporate Account", "balance"=>300000}, "id"=>"1"}
  [1m[36mAccount Load (0.5ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/accounts_controller.rb:39:in `set_account'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api/v1/accounts_controller.rb:24:in `update'
  [1m[36mAccount Update (0.8ms)[0m  [1m[33mUPDATE "accounts" SET "balance" = $1, "updated_at" = $2 WHERE "accounts"."id" = $3[0m  [["balance", "300000.0"], ["updated_at", "2026-02-19 11:41:08.425077"], ["id", 1]]
  â†³ app/controllers/api/v1/accounts_controller.rb:24:in `update'
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api/v1/accounts_controller.rb:24:in `update'
Completed 200 OK in 9ms (Views: 0.3ms | ActiveRecord: 2.2ms | Allocations: 2793)


Started DELETE "/api/v1/accounts/1" for 127.0.0.1 at 2026-02-19 17:11:50 +0530
Processing by Api::V1::AccountsController#destroy as */*
  Parameters: {"id"=>"1"}
  [1m[36mAccount Load (0.2ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/accounts_controller.rb:39:in `set_account'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api/v1/accounts_controller.rb:32:in `destroy'
  [1m[36mAccount Destroy (1.3ms)[0m  [1m[31mDELETE FROM "accounts" WHERE "accounts"."id" = $1[0m  [["id", 1]]
  â†³ app/controllers/api/v1/accounts_controller.rb:32:in `destroy'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api/v1/accounts_controller.rb:32:in `destroy'
Completed 200 OK in 4ms (Views: 0.1ms | ActiveRecord: 2.0ms | Allocations: 2132)


Started POST "/api/v1/accounts" for 127.0.0.1 at 2026-02-19 17:12:11 +0530
Processing by Api::V1::AccountsController#create as */*
  Parameters: {"account"=>{"name"=>"Corporate Account", "balance"=>300000}}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api/v1/accounts_controller.rb:16:in `create'
  [1m[36mAccount Create (0.3ms)[0m  [1m[32mINSERT INTO "accounts" ("name", "balance", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Corporate Account"], ["balance", "300000.0"], ["created_at", "2026-02-19 11:42:11.209470"], ["updated_at", "2026-02-19 11:42:11.209470"]]
  â†³ app/controllers/api/v1/accounts_controller.rb:16:in `create'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api/v1/accounts_controller.rb:16:in `create'
Completed 201 Created in 2ms (Views: 0.1ms | ActiveRecord: 0.7ms | Allocations: 2091)


Started POST "/api/v1/transactions" for 127.0.0.1 at 2026-02-19 17:12:46 +0530
Processing by Api::V1::TransactionsController#create as */*
  Parameters: {"transaction"=>{"amount"=>1500, "transaction_type"=>"debit", "account_id"=>2}}
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api/v1/transactions_controller.rb:16:in `create'
  [1m[36mAccount Load (0.3ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/transactions_controller.rb:16:in `create'
  [1m[36mTransaction Create (2.0ms)[0m  [1m[32mINSERT INTO "transactions" ("amount", "transaction_type", "account_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["amount", "1500.0"], ["transaction_type", "debit"], ["account_id", 2], ["created_at", "2026-02-19 11:42:46.177552"], ["updated_at", "2026-02-19 11:42:46.177552"]]
  â†³ app/controllers/api/v1/transactions_controller.rb:16:in `create'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api/v1/transactions_controller.rb:16:in `create'
Completed 201 Created in 10ms (Views: 0.3ms | ActiveRecord: 2.7ms | Allocations: 3174)


Started GET "/api/v1/transactions" for 127.0.0.1 at 2026-02-19 17:12:55 +0530
Processing by Api::V1::TransactionsController#index as */*
  [1m[36mTransaction Load (0.2ms)[0m  [1m[34mSELECT "transactions".* FROM "transactions"[0m
  â†³ app/controllers/api/v1/transactions_controller.rb:7:in `index'
Completed 200 OK in 2ms (Views: 1.2ms | ActiveRecord: 0.2ms | Allocations: 916)


Started DELETE "/api/v1/transactions/1" for 127.0.0.1 at 2026-02-19 17:13:28 +0530
Processing by Api::V1::TransactionsController#destroy as */*
  Parameters: {"id"=>"1"}
  [1m[36mTransaction Load (0.2ms)[0m  [1m[34mSELECT "transactions".* FROM "transactions" WHERE "transactions"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/transactions_controller.rb:31:in `set_transaction'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api/v1/transactions_controller.rb:24:in `destroy'
  [1m[36mTransaction Destroy (0.3ms)[0m  [1m[31mDELETE FROM "transactions" WHERE "transactions"."id" = $1[0m  [["id", 1]]
  â†³ app/controllers/api/v1/transactions_controller.rb:24:in `destroy'
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api/v1/transactions_controller.rb:24:in `destroy'
Completed 200 OK in 6ms (Views: 0.2ms | ActiveRecord: 1.4ms | Allocations: 2286)


  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_try_advisory_lock(7684012389382155225)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.2ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(7684012389382155225)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTenant Pluck (0.5ms)[0m  [1m[34mSELECT "public"."tenants"."subdomain" FROM "public"."tenants"[0m
  â†³ config/initializers/apartment.rb:58:in `block (2 levels) in <main>'
  [1m[36mTenant Pluck (0.1ms)[0m  [1m[34mSELECT "public"."tenants"."subdomain" FROM "public"."tenants"[0m
  â†³ config/initializers/apartment.rb:58:in `block (2 levels) in <main>'
  [1m[36mTenant Pluck (0.2ms)[0m  [1m[34mSELECT "public"."tenants"."subdomain" FROM "public"."tenants"[0m
  â†³ config/initializers/apartment.rb:58:in `block (2 levels) in <main>'
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_try_advisory_lock(7684012389382155225)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (3.4ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(7684012389382155225)[0m
DEPRECATION WARNING: ActiveRecord::Base.dump_schema_after_migration is deprecated and will be removed in Rails 7.1.
Use `ActiveRecord.dump_schema_after_migration` instead.
 (called from require at <internal:/Users/srinivas/.rbenv/versions/3.2.2/lib/ruby/3.2.0/rubygems/core_ext/kernel_require.rb>:37)
[Apartment] Dumping schema from default tenant...
  [1m[36mActiveRecord::SchemaMigration Pluck (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[Apartment] Schema dump completed.
Started POST "/companies" for ::1 at 2026-02-19 21:14:05 +0530
  [1m[36mActiveRecord::SchemaMigration Pluck (1.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  
ActionController::RoutingError (No route matches [POST] "/companies"):
  
Started POST "/companies" for ::1 at 2026-02-19 21:24:48 +0530
  [1m[36mActiveRecord::SchemaMigration Pluck (1.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  
ActionController::RoutingError (No route matches [POST] "/companies"):
  
Started POST "/api/v1/companies" for 127.0.0.1 at 2026-02-19 21:25:09 +0530
Processing by Api::V1::CompaniesController#create as */*
  Parameters: {"company"=>{"name"=>"Company One", "subdomain"=>"company1"}}
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api/v1/companies_controller.rb:19:in `create'
  [1m[36mCompany Create (2.9ms)[0m  [1m[32mINSERT INTO "companies" ("name", "subdomain", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Company One"], ["subdomain", "company1"], ["created_at", "2026-02-19 15:55:09.300593"], ["updated_at", "2026-02-19 15:55:09.300593"]]
  â†³ app/controllers/api/v1/companies_controller.rb:19:in `create'
  [1m[35m (1.2ms)[0m  [1m[35mCREATE SCHEMA company_1[0m
  â†³ app/services/company_provisioning_service.rb:11:in `call'
  [1m[35mSQL (2.9ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  â†³ app/services/company_provisioning_service.rb:19:in `load'
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "accounts" CASCADE[0m
  â†³ app/services/company_provisioning_service.rb:19:in `load'
  [1m[35m (12.9ms)[0m  [1m[35mCREATE TABLE "accounts" ("id" bigserial primary key, "name" character varying, "balance" decimal, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  â†³ app/services/company_provisioning_service.rb:19:in `load'
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "approvals" CASCADE[0m
  â†³ app/services/company_provisioning_service.rb:19:in `load'
  [1m[35m (5.9ms)[0m  [1m[35mCREATE TABLE "approvals" ("id" bigserial primary key, "expense_id" bigint NOT NULL, "approver_id" bigint, "status" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  â†³ app/services/company_provisioning_service.rb:19:in `load'
  [1m[35m (1.1ms)[0m  [1m[35mCREATE INDEX "index_approvals_on_expense_id" ON "approvals" ("expense_id")[0m
  â†³ app/services/company_provisioning_service.rb:19:in `load'
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "categories" CASCADE[0m
  â†³ app/services/company_provisioning_service.rb:19:in `load'
  [1m[35m (10.5ms)[0m  [1m[35mCREATE TABLE "categories" ("id" bigserial primary key, "name" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  â†³ app/services/company_provisioning_service.rb:19:in `load'
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "companies" CASCADE[0m
  â†³ app/services/company_provisioning_service.rb:19:in `load'
  [1m[35m (10.0ms)[0m  [1m[35mCREATE TABLE "companies" ("id" bigserial primary key, "name" character varying, "subdomain" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  â†³ app/services/company_provisioning_service.rb:19:in `load'
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "expenses" CASCADE[0m
  â†³ app/services/company_provisioning_service.rb:19:in `load'
  [1m[35m (3.4ms)[0m  [1m[35mCREATE TABLE "expenses" ("id" bigserial primary key, "amount" decimal, "description" text, "status" character varying, "user_id" bigint NOT NULL, "category_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  â†³ app/services/company_provisioning_service.rb:19:in `load'
  [1m[35m (1.9ms)[0m  [1m[35mCREATE INDEX "index_expenses_on_category_id" ON "expenses" ("category_id")[0m
  â†³ app/services/company_provisioning_service.rb:19:in `load'
  [1m[35m (1.3ms)[0m  [1m[35mCREATE INDEX "index_expenses_on_user_id" ON "expenses" ("user_id")[0m
  â†³ app/services/company_provisioning_service.rb:19:in `load'
  [1m[35m (0.9ms)[0m  [1m[35mDROP TABLE IF EXISTS "tenants" CASCADE[0m
  â†³ app/services/company_provisioning_service.rb:19:in `load'
  [1m[35m (9.3ms)[0m  [1m[35mCREATE TABLE "tenants" ("id" bigserial primary key, "name" character varying, "subdomain" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  â†³ app/services/company_provisioning_service.rb:19:in `load'
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "transactions" CASCADE[0m
  â†³ app/services/company_provisioning_service.rb:19:in `load'
  [1m[35m (5.2ms)[0m  [1m[35mCREATE TABLE "transactions" ("id" bigserial primary key, "amount" decimal, "transaction_type" character varying, "account_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  â†³ app/services/company_provisioning_service.rb:19:in `load'
  [1m[35m (1.0ms)[0m  [1m[35mCREATE INDEX "index_transactions_on_account_id" ON "transactions" ("account_id")[0m
  â†³ app/services/company_provisioning_service.rb:19:in `load'
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "users" CASCADE[0m
  â†³ app/services/company_provisioning_service.rb:19:in `load'
  [1m[35m (8.3ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "name" character varying, "email" character varying, "role" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  â†³ app/services/company_provisioning_service.rb:19:in `load'
  [1m[35m (5.0ms)[0m  [1m[35mALTER TABLE "approvals" ADD CONSTRAINT "fk_rails_a8b2d49d72"
FOREIGN KEY ("expense_id")
  REFERENCES "expenses" ("id")
[0m
  â†³ app/services/company_provisioning_service.rb:19:in `load'
  [1m[35m (2.2ms)[0m  [1m[35mALTER TABLE "expenses" ADD CONSTRAINT "fk_rails_06966d0da0"
FOREIGN KEY ("category_id")
  REFERENCES "categories" ("id")
[0m
  â†³ app/services/company_provisioning_service.rb:19:in `load'
  [1m[35m (1.0ms)[0m  [1m[35mALTER TABLE "expenses" ADD CONSTRAINT "fk_rails_c3ee69df61"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  â†³ app/services/company_provisioning_service.rb:19:in `load'
  [1m[35m (1.2ms)[0m  [1m[35mALTER TABLE "transactions" ADD CONSTRAINT "fk_rails_01f020e267"
FOREIGN KEY ("account_id")
  REFERENCES "accounts" ("id")
[0m
  â†³ app/services/company_provisioning_service.rb:19:in `load'
  [1m[35m (2.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  â†³ app/services/company_provisioning_service.rb:19:in `load'
  [1m[36mActiveRecord::SchemaMigration Pluck (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ app/services/company_provisioning_service.rb:19:in `load'
  [1m[35m (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20260219090403)[0m
  â†³ app/services/company_provisioning_service.rb:19:in `load'
  [1m[35m (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20260219080021),
(20260219080617),
(20260219090116),
(20260219090209),
(20260219090304),
(20260219090321),
(20260219090333);

[0m
  â†³ app/services/company_provisioning_service.rb:19:in `load'
  [1m[35m (4.2ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  â†³ app/services/company_provisioning_service.rb:19:in `load'
  [1m[36mActiveRecord::InternalMetadata Load (0.7ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  â†³ app/services/company_provisioning_service.rb:19:in `load'
  [1m[36mActiveRecord::InternalMetadata Create (0.5ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2026-02-19 15:55:09.442737"], ["updated_at", "2026-02-19 15:55:09.442737"]]
  â†³ app/services/company_provisioning_service.rb:19:in `load'
  [1m[36mTRANSACTION (1.9ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api/v1/companies_controller.rb:19:in `create'
Completed 201 Created in 168ms (Views: 0.5ms | ActiveRecord: 122.6ms | Allocations: 33506)


  [1m[35m (7.3ms)[0m  [1m[34mSELECT schema_name FROM information_schema.schemata;[0m
  [1m[35m (3.2ms)[0m  [1m[34mSELECT schema_name FROM information_schema.schemata;[0m
  [1m[35m (2.4ms)[0m  [1m[34mSELECT * FROM information_schema.schemata;[0m
  [1m[35m (1.6ms)[0m  [1m[34mSELECT schema_name FROM information_schema.schemata;[0m
  [1m[35m (3.6ms)[0m  [1m[34mSELECT schema_name FROM information_schema.schemata;[0m
Started GET "/api/v1/users" for 127.0.0.1 at 2026-02-19 21:32:44 +0530
  [1m[36mActiveRecord::SchemaMigration Pluck (1.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::UsersController#index as */*
  [1m[36mUser Load (7.6ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  â†³ app/controllers/api/v1/users_controller.rb:7:in `index'
Completed 200 OK in 30ms (Views: 4.8ms | ActiveRecord: 16.3ms | Allocations: 10170)


Started GET "/api/v1/users" for 127.0.0.1 at 2026-02-19 21:34:07 +0530
Processing by Api::V1::UsersController#index as */*
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  â†³ app/controllers/api/v1/users_controller.rb:7:in `index'
Completed 200 OK in 8ms (Views: 1.7ms | ActiveRecord: 5.2ms | Allocations: 4185)


Started GET "/api/v1/users" for 127.0.0.1 at 2026-02-19 21:34:22 +0530
  [1m[36mActiveRecord::SchemaMigration Pluck (1.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Switching to schema: company_1
Processing by Api::V1::UsersController#index as */*
  [1m[36mUser Load (2.9ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  â†³ app/controllers/api/v1/users_controller.rb:7:in `index'
Completed 200 OK in 46ms (Views: 5.5ms | ActiveRecord: 28.0ms | Allocations: 10128)


Started GET "/api/v1/users" for 127.0.0.1 at 2026-02-19 21:34:57 +0530
  [1m[36mActiveRecord::SchemaMigration Pluck (1.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Switching to schema: company_1
Processing by Api::V1::UsersController#index as */*
  [1m[36mUser Load (11.6ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  â†³ app/controllers/api/v1/users_controller.rb:7:in `index'
Completed 200 OK in 47ms (Views: 8.1ms | ActiveRecord: 30.9ms | Allocations: 10129)


  [1m[35m (0.4ms)[0m  [1m[35mCREATE DATABASE "FinpayAPI_development" ENCODING = 'unicode'[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE DATABASE "FinpayAPI_test" ENCODING = 'unicode'[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_try_advisory_lock(7684012389382155225)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_advisory_unlock(7684012389382155225)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTenant Pluck (0.7ms)[0m  [1m[34mSELECT "public"."tenants"."subdomain" FROM "public"."tenants"[0m
  â†³ config/initializers/apartment.rb:58:in `block (2 levels) in <main>'
  [1m[36mTenant Pluck (0.2ms)[0m  [1m[34mSELECT "public"."tenants"."subdomain" FROM "public"."tenants"[0m
  â†³ config/initializers/apartment.rb:58:in `block (2 levels) in <main>'
  [1m[36mTenant Pluck (0.1ms)[0m  [1m[34mSELECT "public"."tenants"."subdomain" FROM "public"."tenants"[0m
  â†³ config/initializers/apartment.rb:58:in `block (2 levels) in <main>'
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_try_advisory_lock(7684012389382155225)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(7684012389382155225)[0m
DEPRECATION WARNING: ActiveRecord::Base.dump_schema_after_migration is deprecated and will be removed in Rails 7.1.
Use `ActiveRecord.dump_schema_after_migration` instead.
 (called from require at <internal:/Users/srinivas/.rbenv/versions/3.2.2/lib/ruby/3.2.0/rubygems/core_ext/kernel_require.rb>:37)
[Apartment] Dumping schema from default tenant...
  [1m[36mActiveRecord::SchemaMigration Pluck (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[Apartment] Schema dump completed.
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(7684012389382155225)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (1.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.8ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(7684012389382155225)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTenant Pluck (0.6ms)[0m  [1m[34mSELECT "public"."tenants"."subdomain" FROM "public"."tenants"[0m
  â†³ config/initializers/apartment.rb:58:in `block (2 levels) in <main>'
  [1m[36mTenant Pluck (0.1ms)[0m  [1m[34mSELECT "public"."tenants"."subdomain" FROM "public"."tenants"[0m
  â†³ config/initializers/apartment.rb:58:in `block (2 levels) in <main>'
  [1m[36mTenant Pluck (0.2ms)[0m  [1m[34mSELECT "public"."tenants"."subdomain" FROM "public"."tenants"[0m
  â†³ config/initializers/apartment.rb:58:in `block (2 levels) in <main>'
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(7684012389382155225)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.5ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_advisory_unlock(7684012389382155225)[0m
DEPRECATION WARNING: ActiveRecord::Base.dump_schema_after_migration is deprecated and will be removed in Rails 7.1.
Use `ActiveRecord.dump_schema_after_migration` instead.
 (called from require at <internal:/Users/srinivas/.rbenv/versions/3.2.2/lib/ruby/3.2.0/rubygems/core_ext/kernel_require.rb>:37)
[Apartment] Dumping schema from default tenant...
  [1m[36mActiveRecord::SchemaMigration Pluck (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[Apartment] Schema dump completed.
Started GET "/api/v1/users" for 127.0.0.1 at 2026-02-20 11:54:06 +0530
  [1m[36mActiveRecord::SchemaMigration Pluck (2.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Switching to schema: company_1
Processing by Api::V1::UsersController#index as */*
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  â†³ app/controllers/api/v1/users_controller.rb:10:in `index'
Completed 200 OK in 25ms (Views: 4.3ms | ActiveRecord: 7.8ms | Allocations: 10128)


Started GET "/api/v1/users" for 127.0.0.1 at 2026-02-20 13:08:14 +0530
  [1m[36mActiveRecord::SchemaMigration Pluck (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::UsersController#index as */*
  [1m[36mUser Load (5.7ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  â†³ app/controllers/api/v1/users_controller.rb:10:in `index'
Completed 200 OK in 40ms (Views: 6.2ms | ActiveRecord: 21.8ms | Allocations: 9616)


Started GET "/api/v1/companies" for 127.0.0.1 at 2026-02-20 13:10:48 +0530
Processing by Api::V1::CompaniesController#index as */*
  [1m[36mCompany Load (1.2ms)[0m  [1m[34mSELECT "public"."companies".* FROM "public"."companies"[0m
  â†³ app/controllers/api/v1/companies_controller.rb:5:in `index'
Completed 200 OK in 8ms (Views: 3.6ms | ActiveRecord: 4.4ms | Allocations: 3304)


Started POST "/api/v1/companies" for 127.0.0.1 at 2026-02-20 13:11:16 +0530
Processing by Api::V1::CompaniesController#create as */*
  Parameters: {"company"=>{"name"=>"Tenant One", "subdomain"=>"tenant1"}}
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api/v1/companies_controller.rb:19:in `create'
  [1m[36mCompany Create (2.0ms)[0m  [1m[32mINSERT INTO "public"."companies" ("name", "subdomain", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Tenant One"], ["subdomain", "tenant1"], ["created_at", "2026-02-20 07:41:16.347007"], ["updated_at", "2026-02-20 07:41:16.347007"]]
  â†³ app/controllers/api/v1/companies_controller.rb:19:in `create'
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api/v1/companies_controller.rb:19:in `create'
Completed 201 Created in 11ms (Views: 0.3ms | ActiveRecord: 3.5ms | Allocations: 2649)


Started GET "/api/v1/companies" for 127.0.0.1 at 2026-02-20 13:11:22 +0530
Processing by Api::V1::CompaniesController#index as */*
  [1m[36mCompany Load (0.3ms)[0m  [1m[34mSELECT "public"."companies".* FROM "public"."companies"[0m
  â†³ app/controllers/api/v1/companies_controller.rb:5:in `index'
Completed 200 OK in 2ms (Views: 1.8ms | ActiveRecord: 0.3ms | Allocations: 908)


  [1m[35m (3.4ms)[0m  [1m[34mSELECT schema_name FROM information_schema.schemata;[0m
  [1m[35m (7.1ms)[0m  [1m[34mSELECT schema_name FROM information_schema.schemata;[0m
  [1m[35m (1.6ms)[0m  [1m[34mSELECT schema_name FROM information_schema.schemata;[0m
Started GET "/api/v1/companies" for 127.0.0.1 at 2026-02-20 13:14:34 +0530
  [1m[36mActiveRecord::SchemaMigration Pluck (1.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  
Apartment::TenantNotFound (Could not set search path to schemas, they may be invalid: "tenant1" "public".
Original error: ActiveRecord::StatementInvalid: Could not find schema tenant1
):
  
ros-apartment (3.4.1) lib/apartment/adapters/postgresql_adapter.rb:136:in `raise_schema_connect_to_new'
ros-apartment (3.4.1) lib/apartment/adapters/postgresql_adapter.rb:81:in `rescue in connect_to_new'
ros-apartment (3.4.1) lib/apartment/adapters/postgresql_adapter.rb:74:in `connect_to_new'
ros-apartment (3.4.1) lib/apartment/adapters/abstract_adapter.rb:77:in `block in switch!'
activesupport (7.0.10) lib/active_support/callbacks.rb:99:in `run_callbacks'
ros-apartment (3.4.1) lib/apartment/adapters/abstract_adapter.rb:76:in `switch!'
ros-apartment (3.4.1) lib/apartment/adapters/abstract_adapter.rb:89:in `switch'
/Users/srinivas/.rbenv/versions/3.2.2/lib/ruby/3.2.0/forwardable.rb:240:in `switch'
ros-apartment (3.4.1) lib/apartment/elevators/generic.rb:22:in `call'
rack (2.2.22) lib/rack/etag.rb:27:in `call'
rack (2.2.22) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.22) lib/rack/head.rb:12:in `call'
activerecord (7.0.10) lib/active_record/migration.rb:639:in `call'
actionpack (7.0.10) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (7.0.10) lib/active_support/callbacks.rb:99:in `run_callbacks'
actionpack (7.0.10) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (7.0.10) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (7.0.10) lib/action_dispatch/middleware/actionable_exceptions.rb:17:in `call'
actionpack (7.0.10) lib/action_dispatch/middleware/debug_exceptions.rb:28:in `call'
actionpack (7.0.10) lib/action_dispatch/middleware/show_exceptions.rb:29:in `call'
railties (7.0.10) lib/rails/rack/logger.rb:40:in `call_app'
railties (7.0.10) lib/rails/rack/logger.rb:25:in `block in call'
activesupport (7.0.10) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (7.0.10) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (7.0.10) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (7.0.10) lib/rails/rack/logger.rb:25:in `call'
actionpack (7.0.10) lib/action_dispatch/middleware/remote_ip.rb:93:in `call'
actionpack (7.0.10) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.22) lib/rack/runtime.rb:22:in `call'
activesupport (7.0.10) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (7.0.10) lib/action_dispatch/middleware/server_timing.rb:61:in `block in call'
actionpack (7.0.10) lib/action_dispatch/middleware/server_timing.rb:26:in `collect_events'
actionpack (7.0.10) lib/action_dispatch/middleware/server_timing.rb:60:in `call'
actionpack (7.0.10) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (7.0.10) lib/action_dispatch/middleware/static.rb:23:in `call'
rack (2.2.22) lib/rack/sendfile.rb:127:in `call'
actionpack (7.0.10) lib/action_dispatch/middleware/host_authorization.rb:138:in `call'
rack-cors (2.0.2) lib/rack/cors.rb:102:in `call'
railties (7.0.10) lib/rails/engine.rb:531:in `call'
puma (7.2.0) lib/puma/configuration.rb:296:in `call'
puma (7.2.0) lib/puma/request.rb:103:in `block in handle_request'
puma (7.2.0) lib/puma/thread_pool.rb:355:in `with_force_shutdown'
puma (7.2.0) lib/puma/request.rb:102:in `handle_request'
puma (7.2.0) lib/puma/server.rb:503:in `process_client'
puma (7.2.0) lib/puma/server.rb:262:in `block in run'
puma (7.2.0) lib/puma/thread_pool.rb:182:in `block in spawn_thread'
Started GET "/api/v1/companies" for 127.0.0.1 at 2026-02-20 13:22:25 +0530
  [1m[36mActiveRecord::SchemaMigration Pluck (1.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::CompaniesController#index as */*
  [1m[36mCompany Load (1.7ms)[0m  [1m[34mSELECT "public"."companies".* FROM "public"."companies"[0m
  â†³ app/controllers/api/v1/companies_controller.rb:5:in `index'
Completed 200 OK in 19ms (Views: 5.4ms | ActiveRecord: 9.6ms | Allocations: 7675)


  [1m[35m (38.3ms)[0m  [1m[35mDROP SCHEMA company_1 CASCADE[0m
  [1m[35m (5.2ms)[0m  [1m[34mselect schema_name from information_schema.schemata;[0m
Started GET "/api/v1/companies" for 127.0.0.1 at 2026-02-20 13:37:08 +0530
  [1m[36mActiveRecord::SchemaMigration Pluck (1.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::CompaniesController#index as */*
  [1m[36mCompany Load (3.9ms)[0m  [1m[34mSELECT "public"."companies".* FROM "public"."companies"[0m
  â†³ app/controllers/api/v1/companies_controller.rb:5:in `index'
Completed 200 OK in 23ms (Views: 5.3ms | ActiveRecord: 13.0ms | Allocations: 7675)


Started DELETE "/api/v1/companies/1" for 127.0.0.1 at 2026-02-20 13:37:17 +0530
  
AbstractController::ActionNotFound (The action 'destroy' could not be found for Api::V1::CompaniesController):
  
actionpack (7.0.10) lib/abstract_controller/base.rb:146:in `process'
actionpack (7.0.10) lib/action_controller/metal.rb:188:in `dispatch'
actionpack (7.0.10) lib/action_controller/metal.rb:251:in `dispatch'
actionpack (7.0.10) lib/action_dispatch/routing/route_set.rb:49:in `dispatch'
actionpack (7.0.10) lib/action_dispatch/routing/route_set.rb:32:in `serve'
actionpack (7.0.10) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (7.0.10) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (7.0.10) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (7.0.10) lib/action_dispatch/routing/route_set.rb:852:in `call'
ros-apartment (3.4.1) lib/apartment/elevators/generic.rb:22:in `block in call'
ros-apartment (3.4.1) lib/apartment/adapters/abstract_adapter.rb:90:in `switch'
/Users/srinivas/.rbenv/versions/3.2.2/lib/ruby/3.2.0/forwardable.rb:240:in `switch'
ros-apartment (3.4.1) lib/apartment/elevators/generic.rb:22:in `call'
rack (2.2.22) lib/rack/etag.rb:27:in `call'
rack (2.2.22) lib/rack/conditional_get.rb:40:in `call'
rack (2.2.22) lib/rack/head.rb:12:in `call'
activerecord (7.0.10) lib/active_record/migration.rb:639:in `call'
actionpack (7.0.10) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (7.0.10) lib/active_support/callbacks.rb:99:in `run_callbacks'
actionpack (7.0.10) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (7.0.10) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (7.0.10) lib/action_dispatch/middleware/actionable_exceptions.rb:17:in `call'
actionpack (7.0.10) lib/action_dispatch/middleware/debug_exceptions.rb:28:in `call'
actionpack (7.0.10) lib/action_dispatch/middleware/show_exceptions.rb:29:in `call'
railties (7.0.10) lib/rails/rack/logger.rb:40:in `call_app'
railties (7.0.10) lib/rails/rack/logger.rb:25:in `block in call'
activesupport (7.0.10) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (7.0.10) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (7.0.10) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (7.0.10) lib/rails/rack/logger.rb:25:in `call'
actionpack (7.0.10) lib/action_dispatch/middleware/remote_ip.rb:93:in `call'
actionpack (7.0.10) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.22) lib/rack/runtime.rb:22:in `call'
activesupport (7.0.10) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (7.0.10) lib/action_dispatch/middleware/server_timing.rb:61:in `block in call'
actionpack (7.0.10) lib/action_dispatch/middleware/server_timing.rb:26:in `collect_events'
actionpack (7.0.10) lib/action_dispatch/middleware/server_timing.rb:60:in `call'
actionpack (7.0.10) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (7.0.10) lib/action_dispatch/middleware/static.rb:23:in `call'
rack (2.2.22) lib/rack/sendfile.rb:127:in `call'
actionpack (7.0.10) lib/action_dispatch/middleware/host_authorization.rb:138:in `call'
rack-cors (2.0.2) lib/rack/cors.rb:102:in `call'
railties (7.0.10) lib/rails/engine.rb:531:in `call'
puma (7.2.0) lib/puma/configuration.rb:296:in `call'
puma (7.2.0) lib/puma/request.rb:103:in `block in handle_request'
puma (7.2.0) lib/puma/thread_pool.rb:355:in `with_force_shutdown'
puma (7.2.0) lib/puma/request.rb:102:in `handle_request'
puma (7.2.0) lib/puma/server.rb:503:in `process_client'
puma (7.2.0) lib/puma/server.rb:262:in `block in run'
puma (7.2.0) lib/puma/thread_pool.rb:182:in `block in spawn_thread'
Started DELETE "/api/v1/companies" for 127.0.0.1 at 2026-02-20 13:37:26 +0530
  
ActionController::RoutingError (No route matches [DELETE] "/api/v1/companies"):
  
Started DELETE "/api/v1/companies/2" for 127.0.0.1 at 2026-02-20 13:37:31 +0530
  
AbstractController::ActionNotFound (The action 'destroy' could not be found for Api::V1::CompaniesController):
  
actionpack (7.0.10) lib/abstract_controller/base.rb:146:in `process'
actionpack (7.0.10) lib/action_controller/metal.rb:188:in `dispatch'
actionpack (7.0.10) lib/action_controller/metal.rb:251:in `dispatch'
actionpack (7.0.10) lib/action_dispatch/routing/route_set.rb:49:in `dispatch'
actionpack (7.0.10) lib/action_dispatch/routing/route_set.rb:32:in `serve'
actionpack (7.0.10) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (7.0.10) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (7.0.10) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (7.0.10) lib/action_dispatch/routing/route_set.rb:852:in `call'
ros-apartment (3.4.1) lib/apartment/elevators/generic.rb:22:in `block in call'
ros-apartment (3.4.1) lib/apartment/adapters/abstract_adapter.rb:90:in `switch'
/Users/srinivas/.rbenv/versions/3.2.2/lib/ruby/3.2.0/forwardable.rb:240:in `switch'
ros-apartment (3.4.1) lib/apartment/elevators/generic.rb:22:in `call'
rack (2.2.22) lib/rack/etag.rb:27:in `call'
rack (2.2.22) lib/rack/conditional_get.rb:40:in `call'
rack (2.2.22) lib/rack/head.rb:12:in `call'
activerecord (7.0.10) lib/active_record/migration.rb:639:in `call'
actionpack (7.0.10) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (7.0.10) lib/active_support/callbacks.rb:99:in `run_callbacks'
actionpack (7.0.10) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (7.0.10) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (7.0.10) lib/action_dispatch/middleware/actionable_exceptions.rb:17:in `call'
actionpack (7.0.10) lib/action_dispatch/middleware/debug_exceptions.rb:28:in `call'
actionpack (7.0.10) lib/action_dispatch/middleware/show_exceptions.rb:29:in `call'
railties (7.0.10) lib/rails/rack/logger.rb:40:in `call_app'
railties (7.0.10) lib/rails/rack/logger.rb:25:in `block in call'
activesupport (7.0.10) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (7.0.10) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (7.0.10) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (7.0.10) lib/rails/rack/logger.rb:25:in `call'
actionpack (7.0.10) lib/action_dispatch/middleware/remote_ip.rb:93:in `call'
actionpack (7.0.10) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.22) lib/rack/runtime.rb:22:in `call'
activesupport (7.0.10) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (7.0.10) lib/action_dispatch/middleware/server_timing.rb:61:in `block in call'
actionpack (7.0.10) lib/action_dispatch/middleware/server_timing.rb:26:in `collect_events'
actionpack (7.0.10) lib/action_dispatch/middleware/server_timing.rb:60:in `call'
actionpack (7.0.10) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (7.0.10) lib/action_dispatch/middleware/static.rb:23:in `call'
rack (2.2.22) lib/rack/sendfile.rb:127:in `call'
actionpack (7.0.10) lib/action_dispatch/middleware/host_authorization.rb:138:in `call'
rack-cors (2.0.2) lib/rack/cors.rb:102:in `call'
railties (7.0.10) lib/rails/engine.rb:531:in `call'
puma (7.2.0) lib/puma/configuration.rb:296:in `call'
puma (7.2.0) lib/puma/request.rb:103:in `block in handle_request'
puma (7.2.0) lib/puma/thread_pool.rb:355:in `with_force_shutdown'
puma (7.2.0) lib/puma/request.rb:102:in `handle_request'
puma (7.2.0) lib/puma/server.rb:503:in `process_client'
puma (7.2.0) lib/puma/server.rb:262:in `block in run'
puma (7.2.0) lib/puma/thread_pool.rb:182:in `block in spawn_thread'
Started DELETE "/api/v1/companies/2" for 127.0.0.1 at 2026-02-20 13:39:02 +0530
  [1m[36mActiveRecord::SchemaMigration Pluck (2.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::CompaniesController#destroy as */*
  Parameters: {"id"=>"2"}
  [1m[36mCompany Load (0.8ms)[0m  [1m[34mSELECT "public"."companies".* FROM "public"."companies" WHERE "public"."companies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/companies_controller.rb:30:in `destroy'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api/v1/companies_controller.rb:35:in `destroy'
  [1m[36mCompany Destroy (0.4ms)[0m  [1m[31mDELETE FROM "public"."companies" WHERE "public"."companies"."id" = $1[0m  [["id", 2]]
  â†³ app/controllers/api/v1/companies_controller.rb:35:in `destroy'
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api/v1/companies_controller.rb:35:in `destroy'
Completed 200 OK in 19ms (Views: 0.2ms | ActiveRecord: 7.7ms | Allocations: 10225)


Started DELETE "/api/v1/companies/1" for 127.0.0.1 at 2026-02-20 13:39:06 +0530
Processing by Api::V1::CompaniesController#destroy as */*
  Parameters: {"id"=>"1"}
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT "public"."companies".* FROM "public"."companies" WHERE "public"."companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/companies_controller.rb:30:in `destroy'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api/v1/companies_controller.rb:35:in `destroy'
  [1m[36mCompany Destroy (0.3ms)[0m  [1m[31mDELETE FROM "public"."companies" WHERE "public"."companies"."id" = $1[0m  [["id", 1]]
  â†³ app/controllers/api/v1/companies_controller.rb:35:in `destroy'
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api/v1/companies_controller.rb:35:in `destroy'
Completed 200 OK in 3ms (Views: 0.1ms | ActiveRecord: 1.2ms | Allocations: 2127)


Started GET "/api/v1/companies" for 127.0.0.1 at 2026-02-20 13:39:12 +0530
Processing by Api::V1::CompaniesController#index as */*
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT "public"."companies".* FROM "public"."companies"[0m
  â†³ app/controllers/api/v1/companies_controller.rb:5:in `index'
Completed 200 OK in 1ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 763)


  [1m[35m (38.3ms)[0m  [1m[35mDROP SCHEMA company1 CASCADE[0m
Started POST "/api/v1/companies" for 127.0.0.1 at 2026-02-20 13:43:37 +0530
  [1m[36mActiveRecord::SchemaMigration Pluck (1.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  
Apartment::TenantNotFound (Could not set search path to schemas, they may be invalid: "company1" "public".
Original error: ActiveRecord::StatementInvalid: Could not find schema company1
):
  
ros-apartment (3.4.1) lib/apartment/adapters/postgresql_adapter.rb:136:in `raise_schema_connect_to_new'
ros-apartment (3.4.1) lib/apartment/adapters/postgresql_adapter.rb:81:in `rescue in connect_to_new'
ros-apartment (3.4.1) lib/apartment/adapters/postgresql_adapter.rb:74:in `connect_to_new'
ros-apartment (3.4.1) lib/apartment/adapters/abstract_adapter.rb:77:in `block in switch!'
activesupport (7.0.10) lib/active_support/callbacks.rb:99:in `run_callbacks'
ros-apartment (3.4.1) lib/apartment/adapters/abstract_adapter.rb:76:in `switch!'
ros-apartment (3.4.1) lib/apartment/adapters/abstract_adapter.rb:89:in `switch'
/Users/srinivas/.rbenv/versions/3.2.2/lib/ruby/3.2.0/forwardable.rb:240:in `switch'
ros-apartment (3.4.1) lib/apartment/elevators/generic.rb:22:in `call'
rack (2.2.22) lib/rack/etag.rb:27:in `call'
rack (2.2.22) lib/rack/conditional_get.rb:40:in `call'
rack (2.2.22) lib/rack/head.rb:12:in `call'
activerecord (7.0.10) lib/active_record/migration.rb:639:in `call'
actionpack (7.0.10) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (7.0.10) lib/active_support/callbacks.rb:99:in `run_callbacks'
actionpack (7.0.10) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (7.0.10) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (7.0.10) lib/action_dispatch/middleware/actionable_exceptions.rb:17:in `call'
actionpack (7.0.10) lib/action_dispatch/middleware/debug_exceptions.rb:28:in `call'
actionpack (7.0.10) lib/action_dispatch/middleware/show_exceptions.rb:29:in `call'
railties (7.0.10) lib/rails/rack/logger.rb:40:in `call_app'
railties (7.0.10) lib/rails/rack/logger.rb:25:in `block in call'
activesupport (7.0.10) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (7.0.10) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (7.0.10) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (7.0.10) lib/rails/rack/logger.rb:25:in `call'
actionpack (7.0.10) lib/action_dispatch/middleware/remote_ip.rb:93:in `call'
actionpack (7.0.10) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.22) lib/rack/runtime.rb:22:in `call'
activesupport (7.0.10) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (7.0.10) lib/action_dispatch/middleware/server_timing.rb:61:in `block in call'
actionpack (7.0.10) lib/action_dispatch/middleware/server_timing.rb:26:in `collect_events'
actionpack (7.0.10) lib/action_dispatch/middleware/server_timing.rb:60:in `call'
actionpack (7.0.10) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (7.0.10) lib/action_dispatch/middleware/static.rb:23:in `call'
rack (2.2.22) lib/rack/sendfile.rb:127:in `call'
actionpack (7.0.10) lib/action_dispatch/middleware/host_authorization.rb:138:in `call'
rack-cors (2.0.2) lib/rack/cors.rb:102:in `call'
railties (7.0.10) lib/rails/engine.rb:531:in `call'
puma (7.2.0) lib/puma/configuration.rb:296:in `call'
puma (7.2.0) lib/puma/request.rb:103:in `block in handle_request'
puma (7.2.0) lib/puma/thread_pool.rb:355:in `with_force_shutdown'
puma (7.2.0) lib/puma/request.rb:102:in `handle_request'
puma (7.2.0) lib/puma/server.rb:503:in `process_client'
puma (7.2.0) lib/puma/server.rb:262:in `block in run'
puma (7.2.0) lib/puma/thread_pool.rb:182:in `block in spawn_thread'
Started GET "/api/v1/companies" for 127.0.0.1 at 2026-02-20 13:44:13 +0530
  
Apartment::TenantNotFound (Could not set search path to schemas, they may be invalid: "company1" "public".
Original error: ActiveRecord::StatementInvalid: Could not find schema company1
):
  
ros-apartment (3.4.1) lib/apartment/adapters/postgresql_adapter.rb:136:in `raise_schema_connect_to_new'
ros-apartment (3.4.1) lib/apartment/adapters/postgresql_adapter.rb:81:in `rescue in connect_to_new'
ros-apartment (3.4.1) lib/apartment/adapters/postgresql_adapter.rb:74:in `connect_to_new'
ros-apartment (3.4.1) lib/apartment/adapters/abstract_adapter.rb:77:in `block in switch!'
activesupport (7.0.10) lib/active_support/callbacks.rb:99:in `run_callbacks'
ros-apartment (3.4.1) lib/apartment/adapters/abstract_adapter.rb:76:in `switch!'
ros-apartment (3.4.1) lib/apartment/adapters/abstract_adapter.rb:89:in `switch'
/Users/srinivas/.rbenv/versions/3.2.2/lib/ruby/3.2.0/forwardable.rb:240:in `switch'
ros-apartment (3.4.1) lib/apartment/elevators/generic.rb:22:in `call'
rack (2.2.22) lib/rack/etag.rb:27:in `call'
rack (2.2.22) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.22) lib/rack/head.rb:12:in `call'
activerecord (7.0.10) lib/active_record/migration.rb:639:in `call'
actionpack (7.0.10) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (7.0.10) lib/active_support/callbacks.rb:99:in `run_callbacks'
actionpack (7.0.10) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (7.0.10) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (7.0.10) lib/action_dispatch/middleware/actionable_exceptions.rb:17:in `call'
actionpack (7.0.10) lib/action_dispatch/middleware/debug_exceptions.rb:28:in `call'
actionpack (7.0.10) lib/action_dispatch/middleware/show_exceptions.rb:29:in `call'
railties (7.0.10) lib/rails/rack/logger.rb:40:in `call_app'
railties (7.0.10) lib/rails/rack/logger.rb:25:in `block in call'
activesupport (7.0.10) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (7.0.10) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (7.0.10) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (7.0.10) lib/rails/rack/logger.rb:25:in `call'
actionpack (7.0.10) lib/action_dispatch/middleware/remote_ip.rb:93:in `call'
actionpack (7.0.10) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.22) lib/rack/runtime.rb:22:in `call'
activesupport (7.0.10) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (7.0.10) lib/action_dispatch/middleware/server_timing.rb:61:in `block in call'
actionpack (7.0.10) lib/action_dispatch/middleware/server_timing.rb:26:in `collect_events'
actionpack (7.0.10) lib/action_dispatch/middleware/server_timing.rb:60:in `call'
actionpack (7.0.10) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (7.0.10) lib/action_dispatch/middleware/static.rb:23:in `call'
rack (2.2.22) lib/rack/sendfile.rb:127:in `call'
actionpack (7.0.10) lib/action_dispatch/middleware/host_authorization.rb:138:in `call'
rack-cors (2.0.2) lib/rack/cors.rb:102:in `call'
railties (7.0.10) lib/rails/engine.rb:531:in `call'
puma (7.2.0) lib/puma/configuration.rb:296:in `call'
puma (7.2.0) lib/puma/request.rb:103:in `block in handle_request'
puma (7.2.0) lib/puma/thread_pool.rb:355:in `with_force_shutdown'
puma (7.2.0) lib/puma/request.rb:102:in `handle_request'
puma (7.2.0) lib/puma/server.rb:503:in `process_client'
puma (7.2.0) lib/puma/server.rb:262:in `block in run'
puma (7.2.0) lib/puma/thread_pool.rb:182:in `block in spawn_thread'
Started GET "/api/v1/companies" for 127.0.0.1 at 2026-02-20 13:44:20 +0530
  
Apartment::TenantNotFound (Could not set search path to schemas, they may be invalid: "company1" "public".
Original error: ActiveRecord::StatementInvalid: Could not find schema company1
):
  
ros-apartment (3.4.1) lib/apartment/adapters/postgresql_adapter.rb:136:in `raise_schema_connect_to_new'
ros-apartment (3.4.1) lib/apartment/adapters/postgresql_adapter.rb:81:in `rescue in connect_to_new'
ros-apartment (3.4.1) lib/apartment/adapters/postgresql_adapter.rb:74:in `connect_to_new'
ros-apartment (3.4.1) lib/apartment/adapters/abstract_adapter.rb:77:in `block in switch!'
activesupport (7.0.10) lib/active_support/callbacks.rb:99:in `run_callbacks'
ros-apartment (3.4.1) lib/apartment/adapters/abstract_adapter.rb:76:in `switch!'
ros-apartment (3.4.1) lib/apartment/adapters/abstract_adapter.rb:89:in `switch'
/Users/srinivas/.rbenv/versions/3.2.2/lib/ruby/3.2.0/forwardable.rb:240:in `switch'
ros-apartment (3.4.1) lib/apartment/elevators/generic.rb:22:in `call'
rack (2.2.22) lib/rack/etag.rb:27:in `call'
rack (2.2.22) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.22) lib/rack/head.rb:12:in `call'
activerecord (7.0.10) lib/active_record/migration.rb:639:in `call'
actionpack (7.0.10) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (7.0.10) lib/active_support/callbacks.rb:99:in `run_callbacks'
actionpack (7.0.10) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (7.0.10) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (7.0.10) lib/action_dispatch/middleware/actionable_exceptions.rb:17:in `call'
actionpack (7.0.10) lib/action_dispatch/middleware/debug_exceptions.rb:28:in `call'
actionpack (7.0.10) lib/action_dispatch/middleware/show_exceptions.rb:29:in `call'
railties (7.0.10) lib/rails/rack/logger.rb:40:in `call_app'
railties (7.0.10) lib/rails/rack/logger.rb:25:in `block in call'
activesupport (7.0.10) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (7.0.10) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (7.0.10) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (7.0.10) lib/rails/rack/logger.rb:25:in `call'
actionpack (7.0.10) lib/action_dispatch/middleware/remote_ip.rb:93:in `call'
actionpack (7.0.10) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.22) lib/rack/runtime.rb:22:in `call'
activesupport (7.0.10) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (7.0.10) lib/action_dispatch/middleware/server_timing.rb:61:in `block in call'
actionpack (7.0.10) lib/action_dispatch/middleware/server_timing.rb:26:in `collect_events'
actionpack (7.0.10) lib/action_dispatch/middleware/server_timing.rb:60:in `call'
actionpack (7.0.10) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (7.0.10) lib/action_dispatch/middleware/static.rb:23:in `call'
rack (2.2.22) lib/rack/sendfile.rb:127:in `call'
actionpack (7.0.10) lib/action_dispatch/middleware/host_authorization.rb:138:in `call'
rack-cors (2.0.2) lib/rack/cors.rb:102:in `call'
railties (7.0.10) lib/rails/engine.rb:531:in `call'
puma (7.2.0) lib/puma/configuration.rb:296:in `call'
puma (7.2.0) lib/puma/request.rb:103:in `block in handle_request'
puma (7.2.0) lib/puma/thread_pool.rb:355:in `with_force_shutdown'
puma (7.2.0) lib/puma/request.rb:102:in `handle_request'
puma (7.2.0) lib/puma/server.rb:503:in `process_client'
puma (7.2.0) lib/puma/server.rb:262:in `block in run'
puma (7.2.0) lib/puma/thread_pool.rb:182:in `block in spawn_thread'
Started GET "/api/v1/users" for 127.0.0.1 at 2026-02-20 14:37:53 +0530
  [1m[36mActiveRecord::SchemaMigration Pluck (1.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  
Apartment::TenantNotFound (Could not set search path to schemas, they may be invalid: "company1" "public".
Original error: ActiveRecord::StatementInvalid: Could not find schema company1
):
  
ros-apartment (3.4.1) lib/apartment/adapters/postgresql_adapter.rb:136:in `raise_schema_connect_to_new'
ros-apartment (3.4.1) lib/apartment/adapters/postgresql_adapter.rb:81:in `rescue in connect_to_new'
ros-apartment (3.4.1) lib/apartment/adapters/postgresql_adapter.rb:74:in `connect_to_new'
ros-apartment (3.4.1) lib/apartment/adapters/abstract_adapter.rb:77:in `block in switch!'
activesupport (7.0.10) lib/active_support/callbacks.rb:99:in `run_callbacks'
ros-apartment (3.4.1) lib/apartment/adapters/abstract_adapter.rb:76:in `switch!'
ros-apartment (3.4.1) lib/apartment/adapters/abstract_adapter.rb:89:in `switch'
/Users/srinivas/.rbenv/versions/3.2.2/lib/ruby/3.2.0/forwardable.rb:240:in `switch'
ros-apartment (3.4.1) lib/apartment/elevators/generic.rb:22:in `call'
rack (2.2.22) lib/rack/etag.rb:27:in `call'
rack (2.2.22) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.22) lib/rack/head.rb:12:in `call'
activerecord (7.0.10) lib/active_record/migration.rb:639:in `call'
actionpack (7.0.10) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (7.0.10) lib/active_support/callbacks.rb:99:in `run_callbacks'
actionpack (7.0.10) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (7.0.10) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (7.0.10) lib/action_dispatch/middleware/actionable_exceptions.rb:17:in `call'
actionpack (7.0.10) lib/action_dispatch/middleware/debug_exceptions.rb:28:in `call'
actionpack (7.0.10) lib/action_dispatch/middleware/show_exceptions.rb:29:in `call'
railties (7.0.10) lib/rails/rack/logger.rb:40:in `call_app'
railties (7.0.10) lib/rails/rack/logger.rb:25:in `block in call'
activesupport (7.0.10) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (7.0.10) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (7.0.10) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (7.0.10) lib/rails/rack/logger.rb:25:in `call'
actionpack (7.0.10) lib/action_dispatch/middleware/remote_ip.rb:93:in `call'
actionpack (7.0.10) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.22) lib/rack/runtime.rb:22:in `call'
activesupport (7.0.10) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (7.0.10) lib/action_dispatch/middleware/server_timing.rb:61:in `block in call'
actionpack (7.0.10) lib/action_dispatch/middleware/server_timing.rb:26:in `collect_events'
actionpack (7.0.10) lib/action_dispatch/middleware/server_timing.rb:60:in `call'
actionpack (7.0.10) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (7.0.10) lib/action_dispatch/middleware/static.rb:23:in `call'
rack (2.2.22) lib/rack/sendfile.rb:127:in `call'
actionpack (7.0.10) lib/action_dispatch/middleware/host_authorization.rb:138:in `call'
rack-cors (2.0.2) lib/rack/cors.rb:102:in `call'
railties (7.0.10) lib/rails/engine.rb:531:in `call'
puma (7.2.0) lib/puma/configuration.rb:296:in `call'
puma (7.2.0) lib/puma/request.rb:103:in `block in handle_request'
puma (7.2.0) lib/puma/thread_pool.rb:355:in `with_force_shutdown'
puma (7.2.0) lib/puma/request.rb:102:in `handle_request'
puma (7.2.0) lib/puma/server.rb:503:in `process_client'
puma (7.2.0) lib/puma/server.rb:262:in `block in run'
puma (7.2.0) lib/puma/thread_pool.rb:182:in `block in spawn_thread'
Started GET "/api/v1/users" for ::1 at 2026-02-20 14:38:03 +0530
Processing by Api::V1::UsersController#index as */*
  [1m[36mUser Load (1.7ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  â†³ app/controllers/api/v1/users_controller.rb:10:in `index'
Completed 200 OK in 25ms (Views: 6.5ms | ActiveRecord: 11.0ms | Allocations: 9432)


  [1m[35m (4.9ms)[0m  [1m[35mBEGIN;
          CREATE SCHEMA "company1";
          COMMIT;[0m
  [1m[35mSQL (0.7ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "accounts" CASCADE[0m
  [1m[35m (38.1ms)[0m  [1m[35mCREATE TABLE "accounts" ("id" bigserial primary key, "name" character varying, "balance" decimal, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (1.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "approvals" CASCADE[0m
  [1m[35m (6.4ms)[0m  [1m[35mCREATE TABLE "approvals" ("id" bigserial primary key, "expense_id" bigint NOT NULL, "approver_id" bigint, "status" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (4.4ms)[0m  [1m[35mCREATE INDEX "index_approvals_on_expense_id" ON "approvals" ("expense_id")[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "categories" CASCADE[0m
  [1m[35m (26.0ms)[0m  [1m[35mCREATE TABLE "categories" ("id" bigserial primary key, "name" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.4ms)[0m  [1m[35mDROP TABLE IF EXISTS "companies" CASCADE[0m
  [1m[35m (52.9ms)[0m  [1m[35mCREATE TABLE "companies" ("id" bigserial primary key, "name" character varying, "subdomain" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE IF EXISTS "expenses" CASCADE[0m
  [1m[35m (71.8ms)[0m  [1m[35mCREATE TABLE "expenses" ("id" bigserial primary key, "amount" decimal, "description" text, "status" character varying, "user_id" bigint NOT NULL, "category_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (2.7ms)[0m  [1m[35mCREATE INDEX "index_expenses_on_category_id" ON "expenses" ("category_id")[0m
  [1m[35m (2.3ms)[0m  [1m[35mCREATE INDEX "index_expenses_on_user_id" ON "expenses" ("user_id")[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "tenants" CASCADE[0m
  [1m[35m (6.6ms)[0m  [1m[35mCREATE TABLE "tenants" ("id" bigserial primary key, "name" character varying, "subdomain" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE IF EXISTS "transactions" CASCADE[0m
  [1m[35m (6.7ms)[0m  [1m[35mCREATE TABLE "transactions" ("id" bigserial primary key, "amount" decimal, "transaction_type" character varying, "account_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (5.5ms)[0m  [1m[35mCREATE INDEX "index_transactions_on_account_id" ON "transactions" ("account_id")[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "users" CASCADE[0m
  [1m[35m (10.3ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "name" character varying, "email" character varying, "role" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (9.3ms)[0m  [1m[35mALTER TABLE "approvals" ADD CONSTRAINT "fk_rails_a8b2d49d72"
FOREIGN KEY ("expense_id")
  REFERENCES "expenses" ("id")
[0m
  [1m[35m (2.3ms)[0m  [1m[35mALTER TABLE "expenses" ADD CONSTRAINT "fk_rails_06966d0da0"
FOREIGN KEY ("category_id")
  REFERENCES "categories" ("id")
[0m
  [1m[35m (2.4ms)[0m  [1m[35mALTER TABLE "expenses" ADD CONSTRAINT "fk_rails_c3ee69df61"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (3.2ms)[0m  [1m[35mALTER TABLE "transactions" ADD CONSTRAINT "fk_rails_01f020e267"
FOREIGN KEY ("account_id")
  REFERENCES "accounts" ("id")
[0m
  [1m[35m (4.4ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.7ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20260219090403)[0m
  [1m[35m (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20260219080021),
(20260219080617),
(20260219090116),
(20260219090209),
(20260219090304),
(20260219090321),
(20260219090333);

[0m
  [1m[35m (4.4ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.8ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.6ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2026-02-20 09:10:07.901194"], ["updated_at", "2026-02-20 09:10:07.901194"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
Started GET "/api/v1/users" for 127.0.0.1 at 2026-02-20 14:40:24 +0530
  [1m[36mActiveRecord::SchemaMigration Pluck (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::UsersController#index as */*
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  â†³ app/controllers/api/v1/users_controller.rb:10:in `index'
Completed 200 OK in 12ms (Views: 0.8ms | ActiveRecord: 1.3ms | Allocations: 5030)


Started GET "/api/v1/companies" for 127.0.0.1 at 2026-02-20 14:40:35 +0530
Processing by Api::V1::CompaniesController#index as */*
  [1m[36mCompany Load (1.0ms)[0m  [1m[34mSELECT "public"."companies".* FROM "public"."companies"[0m
  â†³ app/controllers/api/v1/companies_controller.rb:5:in `index'
Completed 200 OK in 3ms (Views: 1.8ms | ActiveRecord: 1.0ms | Allocations: 894)


Started GET "/api/v1/accounts" for 127.0.0.1 at 2026-02-20 14:40:44 +0530
Processing by Api::V1::AccountsController#index as */*
  [1m[36mAccount Load (1.3ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts"[0m
  â†³ app/controllers/api/v1/accounts_controller.rb:7:in `index'
Completed 200 OK in 6ms (Views: 1.5ms | ActiveRecord: 1.3ms | Allocations: 1691)


  [1m[35m (3.5ms)[0m  [1m[34mSELECT schema_name FROM information_schema.schemata;[0m
  [1m[35m (36.0ms)[0m  [1m[35mDROP SCHEMA company1 CASCADE[0m
  [1m[35m (2.3ms)[0m  [1m[34mSELECT schema_name FROM information_schema.schemata;[0m
Started GET "/api/v1/users" for ::1 at 2026-02-20 14:43:59 +0530
  [1m[36mActiveRecord::SchemaMigration Pluck (1.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::UsersController#index as */*
  [1m[36mUser Load (2.5ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  â†³ app/controllers/api/v1/users_controller.rb:10:in `index'
Completed 200 OK in 23ms (Views: 5.3ms | ActiveRecord: 7.7ms | Allocations: 9479)


Started GET "/api/v1/companies" for ::1 at 2026-02-20 14:44:08 +0530
Processing by Api::V1::CompaniesController#index as */*
  [1m[36mCompany Load (1.0ms)[0m  [1m[34mSELECT "public"."companies".* FROM "public"."companies"[0m
  â†³ app/controllers/api/v1/companies_controller.rb:5:in `index'
Completed 200 OK in 2ms (Views: 1.0ms | ActiveRecord: 1.0ms | Allocations: 900)


Started GET "/api/v1/companies" for 127.0.0.1 at 2026-02-20 14:44:23 +0530
  
Apartment::TenantNotFound (Could not set search path to schemas, they may be invalid: "company1" "public".
Original error: ActiveRecord::StatementInvalid: Could not find schema company1
):
  
ros-apartment (3.4.1) lib/apartment/adapters/postgresql_adapter.rb:136:in `raise_schema_connect_to_new'
ros-apartment (3.4.1) lib/apartment/adapters/postgresql_adapter.rb:81:in `rescue in connect_to_new'
ros-apartment (3.4.1) lib/apartment/adapters/postgresql_adapter.rb:74:in `connect_to_new'
ros-apartment (3.4.1) lib/apartment/adapters/abstract_adapter.rb:77:in `block in switch!'
activesupport (7.0.10) lib/active_support/callbacks.rb:99:in `run_callbacks'
ros-apartment (3.4.1) lib/apartment/adapters/abstract_adapter.rb:76:in `switch!'
ros-apartment (3.4.1) lib/apartment/adapters/abstract_adapter.rb:89:in `switch'
/Users/srinivas/.rbenv/versions/3.2.2/lib/ruby/3.2.0/forwardable.rb:240:in `switch'
ros-apartment (3.4.1) lib/apartment/elevators/generic.rb:22:in `call'
rack (2.2.22) lib/rack/etag.rb:27:in `call'
rack (2.2.22) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.22) lib/rack/head.rb:12:in `call'
activerecord (7.0.10) lib/active_record/migration.rb:639:in `call'
actionpack (7.0.10) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (7.0.10) lib/active_support/callbacks.rb:99:in `run_callbacks'
actionpack (7.0.10) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (7.0.10) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (7.0.10) lib/action_dispatch/middleware/actionable_exceptions.rb:17:in `call'
actionpack (7.0.10) lib/action_dispatch/middleware/debug_exceptions.rb:28:in `call'
actionpack (7.0.10) lib/action_dispatch/middleware/show_exceptions.rb:29:in `call'
railties (7.0.10) lib/rails/rack/logger.rb:40:in `call_app'
railties (7.0.10) lib/rails/rack/logger.rb:25:in `block in call'
activesupport (7.0.10) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (7.0.10) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (7.0.10) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (7.0.10) lib/rails/rack/logger.rb:25:in `call'
actionpack (7.0.10) lib/action_dispatch/middleware/remote_ip.rb:93:in `call'
actionpack (7.0.10) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.22) lib/rack/runtime.rb:22:in `call'
activesupport (7.0.10) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (7.0.10) lib/action_dispatch/middleware/server_timing.rb:61:in `block in call'
actionpack (7.0.10) lib/action_dispatch/middleware/server_timing.rb:26:in `collect_events'
actionpack (7.0.10) lib/action_dispatch/middleware/server_timing.rb:60:in `call'
actionpack (7.0.10) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (7.0.10) lib/action_dispatch/middleware/static.rb:23:in `call'
rack (2.2.22) lib/rack/sendfile.rb:127:in `call'
actionpack (7.0.10) lib/action_dispatch/middleware/host_authorization.rb:138:in `call'
rack-cors (2.0.2) lib/rack/cors.rb:102:in `call'
railties (7.0.10) lib/rails/engine.rb:531:in `call'
puma (7.2.0) lib/puma/configuration.rb:296:in `call'
puma (7.2.0) lib/puma/request.rb:103:in `block in handle_request'
puma (7.2.0) lib/puma/thread_pool.rb:355:in `with_force_shutdown'
puma (7.2.0) lib/puma/request.rb:102:in `handle_request'
puma (7.2.0) lib/puma/server.rb:503:in `process_client'
puma (7.2.0) lib/puma/server.rb:262:in `block in run'
puma (7.2.0) lib/puma/thread_pool.rb:182:in `block in spawn_thread'
Started GET "/api/v1/companies" for 127.0.0.1 at 2026-02-20 14:44:41 +0530
  
Apartment::TenantNotFound (Could not set search path to schemas, they may be invalid: "company1" "public".
Original error: ActiveRecord::StatementInvalid: Could not find schema company1
):
  
ros-apartment (3.4.1) lib/apartment/adapters/postgresql_adapter.rb:136:in `raise_schema_connect_to_new'
ros-apartment (3.4.1) lib/apartment/adapters/postgresql_adapter.rb:81:in `rescue in connect_to_new'
ros-apartment (3.4.1) lib/apartment/adapters/postgresql_adapter.rb:74:in `connect_to_new'
ros-apartment (3.4.1) lib/apartment/adapters/abstract_adapter.rb:77:in `block in switch!'
activesupport (7.0.10) lib/active_support/callbacks.rb:99:in `run_callbacks'
ros-apartment (3.4.1) lib/apartment/adapters/abstract_adapter.rb:76:in `switch!'
ros-apartment (3.4.1) lib/apartment/adapters/abstract_adapter.rb:89:in `switch'
/Users/srinivas/.rbenv/versions/3.2.2/lib/ruby/3.2.0/forwardable.rb:240:in `switch'
ros-apartment (3.4.1) lib/apartment/elevators/generic.rb:22:in `call'
rack (2.2.22) lib/rack/etag.rb:27:in `call'
rack (2.2.22) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.22) lib/rack/head.rb:12:in `call'
activerecord (7.0.10) lib/active_record/migration.rb:639:in `call'
actionpack (7.0.10) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (7.0.10) lib/active_support/callbacks.rb:99:in `run_callbacks'
actionpack (7.0.10) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (7.0.10) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (7.0.10) lib/action_dispatch/middleware/actionable_exceptions.rb:17:in `call'
actionpack (7.0.10) lib/action_dispatch/middleware/debug_exceptions.rb:28:in `call'
actionpack (7.0.10) lib/action_dispatch/middleware/show_exceptions.rb:29:in `call'
railties (7.0.10) lib/rails/rack/logger.rb:40:in `call_app'
railties (7.0.10) lib/rails/rack/logger.rb:25:in `block in call'
activesupport (7.0.10) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (7.0.10) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (7.0.10) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (7.0.10) lib/rails/rack/logger.rb:25:in `call'
actionpack (7.0.10) lib/action_dispatch/middleware/remote_ip.rb:93:in `call'
actionpack (7.0.10) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.22) lib/rack/runtime.rb:22:in `call'
activesupport (7.0.10) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (7.0.10) lib/action_dispatch/middleware/server_timing.rb:61:in `block in call'
actionpack (7.0.10) lib/action_dispatch/middleware/server_timing.rb:26:in `collect_events'
actionpack (7.0.10) lib/action_dispatch/middleware/server_timing.rb:60:in `call'
actionpack (7.0.10) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (7.0.10) lib/action_dispatch/middleware/static.rb:23:in `call'
rack (2.2.22) lib/rack/sendfile.rb:127:in `call'
actionpack (7.0.10) lib/action_dispatch/middleware/host_authorization.rb:138:in `call'
rack-cors (2.0.2) lib/rack/cors.rb:102:in `call'
railties (7.0.10) lib/rails/engine.rb:531:in `call'
puma (7.2.0) lib/puma/configuration.rb:296:in `call'
puma (7.2.0) lib/puma/request.rb:103:in `block in handle_request'
puma (7.2.0) lib/puma/thread_pool.rb:355:in `with_force_shutdown'
puma (7.2.0) lib/puma/request.rb:102:in `handle_request'
puma (7.2.0) lib/puma/server.rb:503:in `process_client'
puma (7.2.0) lib/puma/server.rb:262:in `block in run'
puma (7.2.0) lib/puma/thread_pool.rb:182:in `block in spawn_thread'
Started POST "/api/v1/companies" for 127.0.0.1 at 2026-02-20 14:45:34 +0530
  
Apartment::TenantNotFound (Could not set search path to schemas, they may be invalid: "company1" "public".
Original error: ActiveRecord::StatementInvalid: Could not find schema company1
):
  
ros-apartment (3.4.1) lib/apartment/adapters/postgresql_adapter.rb:136:in `raise_schema_connect_to_new'
ros-apartment (3.4.1) lib/apartment/adapters/postgresql_adapter.rb:81:in `rescue in connect_to_new'
ros-apartment (3.4.1) lib/apartment/adapters/postgresql_adapter.rb:74:in `connect_to_new'
ros-apartment (3.4.1) lib/apartment/adapters/abstract_adapter.rb:77:in `block in switch!'
activesupport (7.0.10) lib/active_support/callbacks.rb:99:in `run_callbacks'
ros-apartment (3.4.1) lib/apartment/adapters/abstract_adapter.rb:76:in `switch!'
ros-apartment (3.4.1) lib/apartment/adapters/abstract_adapter.rb:89:in `switch'
/Users/srinivas/.rbenv/versions/3.2.2/lib/ruby/3.2.0/forwardable.rb:240:in `switch'
ros-apartment (3.4.1) lib/apartment/elevators/generic.rb:22:in `call'
rack (2.2.22) lib/rack/etag.rb:27:in `call'
rack (2.2.22) lib/rack/conditional_get.rb:40:in `call'
rack (2.2.22) lib/rack/head.rb:12:in `call'
activerecord (7.0.10) lib/active_record/migration.rb:639:in `call'
actionpack (7.0.10) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (7.0.10) lib/active_support/callbacks.rb:99:in `run_callbacks'
actionpack (7.0.10) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (7.0.10) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (7.0.10) lib/action_dispatch/middleware/actionable_exceptions.rb:17:in `call'
actionpack (7.0.10) lib/action_dispatch/middleware/debug_exceptions.rb:28:in `call'
actionpack (7.0.10) lib/action_dispatch/middleware/show_exceptions.rb:29:in `call'
railties (7.0.10) lib/rails/rack/logger.rb:40:in `call_app'
railties (7.0.10) lib/rails/rack/logger.rb:25:in `block in call'
activesupport (7.0.10) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (7.0.10) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (7.0.10) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (7.0.10) lib/rails/rack/logger.rb:25:in `call'
actionpack (7.0.10) lib/action_dispatch/middleware/remote_ip.rb:93:in `call'
actionpack (7.0.10) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.22) lib/rack/runtime.rb:22:in `call'
activesupport (7.0.10) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (7.0.10) lib/action_dispatch/middleware/server_timing.rb:61:in `block in call'
actionpack (7.0.10) lib/action_dispatch/middleware/server_timing.rb:26:in `collect_events'
actionpack (7.0.10) lib/action_dispatch/middleware/server_timing.rb:60:in `call'
actionpack (7.0.10) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (7.0.10) lib/action_dispatch/middleware/static.rb:23:in `call'
rack (2.2.22) lib/rack/sendfile.rb:127:in `call'
actionpack (7.0.10) lib/action_dispatch/middleware/host_authorization.rb:138:in `call'
rack-cors (2.0.2) lib/rack/cors.rb:102:in `call'
railties (7.0.10) lib/rails/engine.rb:531:in `call'
puma (7.2.0) lib/puma/configuration.rb:296:in `call'
puma (7.2.0) lib/puma/request.rb:103:in `block in handle_request'
puma (7.2.0) lib/puma/thread_pool.rb:355:in `with_force_shutdown'
puma (7.2.0) lib/puma/request.rb:102:in `handle_request'
puma (7.2.0) lib/puma/server.rb:503:in `process_client'
puma (7.2.0) lib/puma/server.rb:262:in `block in run'
puma (7.2.0) lib/puma/thread_pool.rb:182:in `block in spawn_thread'
Started POST "/companies" for ::1 at 2026-02-20 14:46:33 +0530
  [1m[36mActiveRecord::SchemaMigration Pluck (3.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  
ActionController::RoutingError (No route matches [POST] "/companies"):
  
Started GET "/companies" for ::1 at 2026-02-20 14:46:39 +0530
  
ActionController::RoutingError (No route matches [GET] "/companies"):
  
[ActionDispatch::HostAuthorization::DefaultResponseApp] Blocked hosts: lvh.me:3000
[ActionDispatch::HostAuthorization::DefaultResponseApp] Blocked hosts: lvh.me:3000
[ActionDispatch::HostAuthorization::DefaultResponseApp] Blocked hosts: lvh.me:3000
[ActionDispatch::HostAuthorization::DefaultResponseApp] Blocked hosts: lvh.me:3000
Started POST "/api/v1/companies" for 127.0.0.1 at 2026-02-20 14:53:42 +0530
  [1m[36mActiveRecord::SchemaMigration Pluck (2.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::CompaniesController#create as */*
  Parameters: {"company"=>{"name"=>"Company One", "subdomain"=>"company1"}}
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api/v1/companies_controller.rb:19:in `create'
  [1m[36mCompany Create (1.3ms)[0m  [1m[32mINSERT INTO "public"."companies" ("name", "subdomain", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Company One"], ["subdomain", "company1"], ["created_at", "2026-02-20 09:23:42.536783"], ["updated_at", "2026-02-20 09:23:42.536783"]]
  â†³ app/controllers/api/v1/companies_controller.rb:19:in `create'
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api/v1/companies_controller.rb:19:in `create'
  [1m[35m (1.3ms)[0m  [1m[35mBEGIN;
          CREATE SCHEMA "company1";
          COMMIT;[0m
  â†³ app/controllers/api/v1/companies_controller.rb:22:in `create'
  [1m[35mSQL (0.4ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  â†³ app/controllers/api/v1/companies_controller.rb:22:in `create'
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "accounts" CASCADE[0m
  â†³ app/controllers/api/v1/companies_controller.rb:22:in `create'
  [1m[35m (38.9ms)[0m  [1m[35mCREATE TABLE "accounts" ("id" bigserial primary key, "name" character varying, "balance" decimal, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  â†³ app/controllers/api/v1/companies_controller.rb:22:in `create'
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "approvals" CASCADE[0m
  â†³ app/controllers/api/v1/companies_controller.rb:22:in `create'
  [1m[35m (2.7ms)[0m  [1m[35mCREATE TABLE "approvals" ("id" bigserial primary key, "expense_id" bigint NOT NULL, "approver_id" bigint, "status" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  â†³ app/controllers/api/v1/companies_controller.rb:22:in `create'
  [1m[35m (0.9ms)[0m  [1m[35mCREATE INDEX "index_approvals_on_expense_id" ON "approvals" ("expense_id")[0m
  â†³ app/controllers/api/v1/companies_controller.rb:22:in `create'
  [1m[35m (1.7ms)[0m  [1m[35mDROP TABLE IF EXISTS "categories" CASCADE[0m
  â†³ app/controllers/api/v1/companies_controller.rb:22:in `create'
  [1m[35m (3.6ms)[0m  [1m[35mCREATE TABLE "categories" ("id" bigserial primary key, "name" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  â†³ app/controllers/api/v1/companies_controller.rb:22:in `create'
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "companies" CASCADE[0m
  â†³ app/controllers/api/v1/companies_controller.rb:22:in `create'
  [1m[35m (2.4ms)[0m  [1m[35mCREATE TABLE "companies" ("id" bigserial primary key, "name" character varying, "subdomain" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  â†³ app/controllers/api/v1/companies_controller.rb:22:in `create'
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "expenses" CASCADE[0m
  â†³ app/controllers/api/v1/companies_controller.rb:22:in `create'
  [1m[35m (10.5ms)[0m  [1m[35mCREATE TABLE "expenses" ("id" bigserial primary key, "amount" decimal, "description" text, "status" character varying, "user_id" bigint NOT NULL, "category_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  â†³ app/controllers/api/v1/companies_controller.rb:22:in `create'
  [1m[35m (2.0ms)[0m  [1m[35mCREATE INDEX "index_expenses_on_category_id" ON "expenses" ("category_id")[0m
  â†³ app/controllers/api/v1/companies_controller.rb:22:in `create'
  [1m[35m (0.7ms)[0m  [1m[35mCREATE INDEX "index_expenses_on_user_id" ON "expenses" ("user_id")[0m
  â†³ app/controllers/api/v1/companies_controller.rb:22:in `create'
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "tenants" CASCADE[0m
  â†³ app/controllers/api/v1/companies_controller.rb:22:in `create'
  [1m[35m (2.1ms)[0m  [1m[35mCREATE TABLE "tenants" ("id" bigserial primary key, "name" character varying, "subdomain" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  â†³ app/controllers/api/v1/companies_controller.rb:22:in `create'
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "transactions" CASCADE[0m
  â†³ app/controllers/api/v1/companies_controller.rb:22:in `create'
  [1m[35m (3.0ms)[0m  [1m[35mCREATE TABLE "transactions" ("id" bigserial primary key, "amount" decimal, "transaction_type" character varying, "account_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  â†³ app/controllers/api/v1/companies_controller.rb:22:in `create'
  [1m[35m (0.8ms)[0m  [1m[35mCREATE INDEX "index_transactions_on_account_id" ON "transactions" ("account_id")[0m
  â†³ app/controllers/api/v1/companies_controller.rb:22:in `create'
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "users" CASCADE[0m
  â†³ app/controllers/api/v1/companies_controller.rb:22:in `create'
  [1m[35m (5.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "name" character varying, "email" character varying, "role" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  â†³ app/controllers/api/v1/companies_controller.rb:22:in `create'
  [1m[35m (5.7ms)[0m  [1m[35mALTER TABLE "approvals" ADD CONSTRAINT "fk_rails_a8b2d49d72"
FOREIGN KEY ("expense_id")
  REFERENCES "expenses" ("id")
[0m
  â†³ app/controllers/api/v1/companies_controller.rb:22:in `create'
  [1m[35m (1.7ms)[0m  [1m[35mALTER TABLE "expenses" ADD CONSTRAINT "fk_rails_06966d0da0"
FOREIGN KEY ("category_id")
  REFERENCES "categories" ("id")
[0m
  â†³ app/controllers/api/v1/companies_controller.rb:22:in `create'
  [1m[35m (1.0ms)[0m  [1m[35mALTER TABLE "expenses" ADD CONSTRAINT "fk_rails_c3ee69df61"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  â†³ app/controllers/api/v1/companies_controller.rb:22:in `create'
  [1m[35m (3.8ms)[0m  [1m[35mALTER TABLE "transactions" ADD CONSTRAINT "fk_rails_01f020e267"
FOREIGN KEY ("account_id")
  REFERENCES "accounts" ("id")
[0m
  â†³ app/controllers/api/v1/companies_controller.rb:22:in `create'
  [1m[35m (1.5ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  â†³ app/controllers/api/v1/companies_controller.rb:22:in `create'
  [1m[36mActiveRecord::SchemaMigration Pluck (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ app/controllers/api/v1/companies_controller.rb:22:in `create'
  [1m[35m (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20260219090403)[0m
  â†³ app/controllers/api/v1/companies_controller.rb:22:in `create'
  [1m[35m (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20260219080021),
(20260219080617),
(20260219090116),
(20260219090209),
(20260219090304),
(20260219090321),
(20260219090333);

[0m
  â†³ app/controllers/api/v1/companies_controller.rb:22:in `create'
  [1m[35m (3.4ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  â†³ app/controllers/api/v1/companies_controller.rb:22:in `create'
  [1m[36mActiveRecord::InternalMetadata Load (1.4ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/companies_controller.rb:22:in `create'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api/v1/companies_controller.rb:22:in `create'
  [1m[36mActiveRecord::InternalMetadata Create (2.5ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2026-02-20 09:23:42.668025"], ["updated_at", "2026-02-20 09:23:42.668025"]]
  â†³ app/controllers/api/v1/companies_controller.rb:22:in `create'
  [1m[36mTRANSACTION (1.8ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api/v1/companies_controller.rb:22:in `create'
Completed 201 Created in 153ms (Views: 0.3ms | ActiveRecord: 118.7ms | Allocations: 35207)


Started GET "/api/v1/companies" for 127.0.0.1 at 2026-02-20 15:00:54 +0530
Processing by Api::V1::CompaniesController#index as */*
  Parameters: {"company"=>{"name"=>"Company One", "subdomain"=>"company1"}}
  [1m[36mCompany Load (1.8ms)[0m  [1m[34mSELECT "public"."companies".* FROM "public"."companies"[0m
  â†³ app/controllers/api/v1/companies_controller.rb:5:in `index'
Completed 200 OK in 3ms (Views: 1.3ms | ActiveRecord: 1.8ms | Allocations: 2309)


Started GET "/api/v1/users" for 127.0.0.1 at 2026-02-20 15:01:01 +0530
Processing by Api::V1::UsersController#index as */*
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  â†³ app/controllers/api/v1/users_controller.rb:10:in `index'
Completed 200 OK in 5ms (Views: 0.7ms | ActiveRecord: 1.4ms | Allocations: 2297)


Started POST "/api/v1/users" for 127.0.0.1 at 2026-02-20 15:04:11 +0530
Processing by Api::V1::UsersController#create as */*
  Parameters: {"user"=>{"name"=>"Srinivas Reddy", "email"=>"srinivas@gmail.com", "role"=>"admin"}}
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api/v1/users_controller.rb:21:in `create'
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "srinivas@gmail.com"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/users_controller.rb:21:in `create'
  [1m[36mUser Create (1.4ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Srinivas Reddy"], ["email", "srinivas@gmail.com"], ["role", "admin"], ["created_at", "2026-02-20 09:34:11.907596"], ["updated_at", "2026-02-20 09:34:11.907596"]]
  â†³ app/controllers/api/v1/users_controller.rb:21:in `create'
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api/v1/users_controller.rb:21:in `create'
Completed 201 Created in 26ms (Views: 0.2ms | ActiveRecord: 12.7ms | Allocations: 6220)


Started GET "/api/v1/users" for 127.0.0.1 at 2026-02-20 15:04:17 +0530
Processing by Api::V1::UsersController#index as */*
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  â†³ app/controllers/api/v1/users_controller.rb:10:in `index'
Completed 200 OK in 2ms (Views: 1.8ms | ActiveRecord: 0.3ms | Allocations: 845)


Started GET "/api/v1/companies" for 127.0.0.1 at 2026-02-20 15:04:56 +0530
Processing by Api::V1::CompaniesController#index as */*
  [1m[36mCompany Load (0.3ms)[0m  [1m[34mSELECT "public"."companies".* FROM "public"."companies"[0m
  â†³ app/controllers/api/v1/companies_controller.rb:5:in `index'
Completed 200 OK in 1ms (Views: 0.9ms | ActiveRecord: 0.3ms | Allocations: 812)


Started POST "/api/v1/companies" for 127.0.0.1 at 2026-02-20 15:05:16 +0530
Processing by Api::V1::CompaniesController#create as */*
  Parameters: {"company"=>{"name"=>"Company Two", "subdomain"=>"company2"}}
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api/v1/companies_controller.rb:19:in `create'
  [1m[36mCompany Create (0.5ms)[0m  [1m[32mINSERT INTO "public"."companies" ("name", "subdomain", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Company Two"], ["subdomain", "company2"], ["created_at", "2026-02-20 09:35:16.406769"], ["updated_at", "2026-02-20 09:35:16.406769"]]
  â†³ app/controllers/api/v1/companies_controller.rb:19:in `create'
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api/v1/companies_controller.rb:19:in `create'
  [1m[35m (1.2ms)[0m  [1m[35mBEGIN;
          CREATE SCHEMA "company2";
          COMMIT;[0m
  â†³ app/controllers/api/v1/companies_controller.rb:25:in `create'
  [1m[35mSQL (0.3ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  â†³ app/controllers/api/v1/companies_controller.rb:25:in `create'
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "accounts" CASCADE[0m
  â†³ app/controllers/api/v1/companies_controller.rb:25:in `create'
  [1m[35m (19.3ms)[0m  [1m[35mCREATE TABLE "accounts" ("id" bigserial primary key, "name" character varying, "balance" decimal, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  â†³ app/controllers/api/v1/companies_controller.rb:25:in `create'
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE IF EXISTS "approvals" CASCADE[0m
  â†³ app/controllers/api/v1/companies_controller.rb:25:in `create'
  [1m[35m (7.6ms)[0m  [1m[35mCREATE TABLE "approvals" ("id" bigserial primary key, "expense_id" bigint NOT NULL, "approver_id" bigint, "status" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  â†³ app/controllers/api/v1/companies_controller.rb:25:in `create'
  [1m[35m (6.0ms)[0m  [1m[35mCREATE INDEX "index_approvals_on_expense_id" ON "approvals" ("expense_id")[0m
  â†³ app/controllers/api/v1/companies_controller.rb:25:in `create'
  [1m[35m (1.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "categories" CASCADE[0m
  â†³ app/controllers/api/v1/companies_controller.rb:25:in `create'
  [1m[35m (6.0ms)[0m  [1m[35mCREATE TABLE "categories" ("id" bigserial primary key, "name" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  â†³ app/controllers/api/v1/companies_controller.rb:25:in `create'
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "companies" CASCADE[0m
  â†³ app/controllers/api/v1/companies_controller.rb:25:in `create'
  [1m[35m (5.4ms)[0m  [1m[35mCREATE TABLE "companies" ("id" bigserial primary key, "name" character varying, "subdomain" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  â†³ app/controllers/api/v1/companies_controller.rb:25:in `create'
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE IF EXISTS "expenses" CASCADE[0m
  â†³ app/controllers/api/v1/companies_controller.rb:25:in `create'
  [1m[35m (8.8ms)[0m  [1m[35mCREATE TABLE "expenses" ("id" bigserial primary key, "amount" decimal, "description" text, "status" character varying, "user_id" bigint NOT NULL, "category_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  â†³ app/controllers/api/v1/companies_controller.rb:25:in `create'
  [1m[35m (7.1ms)[0m  [1m[35mCREATE INDEX "index_expenses_on_category_id" ON "expenses" ("category_id")[0m
  â†³ app/controllers/api/v1/companies_controller.rb:25:in `create'
  [1m[35m (1.6ms)[0m  [1m[35mCREATE INDEX "index_expenses_on_user_id" ON "expenses" ("user_id")[0m
  â†³ app/controllers/api/v1/companies_controller.rb:25:in `create'
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "tenants" CASCADE[0m
  â†³ app/controllers/api/v1/companies_controller.rb:25:in `create'
  [1m[35m (4.1ms)[0m  [1m[35mCREATE TABLE "tenants" ("id" bigserial primary key, "name" character varying, "subdomain" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  â†³ app/controllers/api/v1/companies_controller.rb:25:in `create'
  [1m[35m (0.8ms)[0m  [1m[35mDROP TABLE IF EXISTS "transactions" CASCADE[0m
  â†³ app/controllers/api/v1/companies_controller.rb:25:in `create'
  [1m[35m (5.6ms)[0m  [1m[35mCREATE TABLE "transactions" ("id" bigserial primary key, "amount" decimal, "transaction_type" character varying, "account_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  â†³ app/controllers/api/v1/companies_controller.rb:25:in `create'
  [1m[35m (9.4ms)[0m  [1m[35mCREATE INDEX "index_transactions_on_account_id" ON "transactions" ("account_id")[0m
  â†³ app/controllers/api/v1/companies_controller.rb:25:in `create'
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "users" CASCADE[0m
  â†³ app/controllers/api/v1/companies_controller.rb:25:in `create'
  [1m[35m (6.3ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "name" character varying, "email" character varying, "role" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  â†³ app/controllers/api/v1/companies_controller.rb:25:in `create'
  [1m[35m (5.1ms)[0m  [1m[35mALTER TABLE "approvals" ADD CONSTRAINT "fk_rails_a8b2d49d72"
FOREIGN KEY ("expense_id")
  REFERENCES "expenses" ("id")
[0m
  â†³ app/controllers/api/v1/companies_controller.rb:25:in `create'
  [1m[35m (2.7ms)[0m  [1m[35mALTER TABLE "expenses" ADD CONSTRAINT "fk_rails_06966d0da0"
FOREIGN KEY ("category_id")
  REFERENCES "categories" ("id")
[0m
  â†³ app/controllers/api/v1/companies_controller.rb:25:in `create'
  [1m[35m (1.8ms)[0m  [1m[35mALTER TABLE "expenses" ADD CONSTRAINT "fk_rails_c3ee69df61"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  â†³ app/controllers/api/v1/companies_controller.rb:25:in `create'
  [1m[35m (6.4ms)[0m  [1m[35mALTER TABLE "transactions" ADD CONSTRAINT "fk_rails_01f020e267"
FOREIGN KEY ("account_id")
  REFERENCES "accounts" ("id")
[0m
  â†³ app/controllers/api/v1/companies_controller.rb:25:in `create'
  [1m[35m (3.7ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  â†³ app/controllers/api/v1/companies_controller.rb:25:in `create'
  [1m[36mActiveRecord::SchemaMigration Pluck (1.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ app/controllers/api/v1/companies_controller.rb:25:in `create'
  [1m[35m (0.6ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20260219090403)[0m
  â†³ app/controllers/api/v1/companies_controller.rb:25:in `create'
  [1m[35m (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20260219080021),
(20260219080617),
(20260219090116),
(20260219090209),
(20260219090304),
(20260219090321),
(20260219090333);

[0m
  â†³ app/controllers/api/v1/companies_controller.rb:25:in `create'
  [1m[35m (5.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  â†³ app/controllers/api/v1/companies_controller.rb:25:in `create'
  [1m[36mActiveRecord::InternalMetadata Load (0.6ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/companies_controller.rb:25:in `create'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api/v1/companies_controller.rb:25:in `create'
  [1m[36mActiveRecord::InternalMetadata Create (0.6ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2026-02-20 09:35:16.577256"], ["updated_at", "2026-02-20 09:35:16.577256"]]
  â†³ app/controllers/api/v1/companies_controller.rb:25:in `create'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api/v1/companies_controller.rb:25:in `create'
Completed 201 Created in 176ms (Views: 0.2ms | ActiveRecord: 132.2ms | Allocations: 23076)


Started POST "/api/v1/companies" for 127.0.0.1 at 2026-02-20 15:05:28 +0530
Processing by Api::V1::CompaniesController#create as */*
Completed 400 Bad Request in 1ms (ActiveRecord: 0.0ms | Allocations: 151)


  
ActionController::ParameterMissing (param is missing or the value is empty: company):
  
app/controllers/api/v1/companies_controller.rb:46:in `company_params'
app/controllers/api/v1/companies_controller.rb:17:in `create'
Started GET "/api/v1/companies" for 127.0.0.1 at 2026-02-20 15:05:32 +0530
Processing by Api::V1::CompaniesController#index as */*
  [1m[36mCompany Load (0.3ms)[0m  [1m[34mSELECT "public"."companies".* FROM "public"."companies"[0m
  â†³ app/controllers/api/v1/companies_controller.rb:5:in `index'
Completed 200 OK in 2ms (Views: 1.7ms | ActiveRecord: 0.3ms | Allocations: 919)


Started POST "/api/v1/users" for 127.0.0.1 at 2026-02-20 15:06:38 +0530
Processing by Api::V1::UsersController#create as */*
  Parameters: {"user"=>{"name"=>"John Dep", "email"=>"john@gmail.com", "role"=>"admin"}}
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api/v1/users_controller.rb:21:in `create'
  [1m[36mUser Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "john@gmail.com"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/users_controller.rb:21:in `create'
  [1m[36mUser Create (1.2ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "John Dep"], ["email", "john@gmail.com"], ["role", "admin"], ["created_at", "2026-02-20 09:36:38.884193"], ["updated_at", "2026-02-20 09:36:38.884193"]]
  â†³ app/controllers/api/v1/users_controller.rb:21:in `create'
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api/v1/users_controller.rb:21:in `create'
Completed 201 Created in 10ms (Views: 0.3ms | ActiveRecord: 2.8ms | Allocations: 2992)


Started GET "/api/v1/users" for 127.0.0.1 at 2026-02-20 15:07:23 +0530
Processing by Api::V1::UsersController#index as */*
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  â†³ app/controllers/api/v1/users_controller.rb:10:in `index'
Completed 200 OK in 2ms (Views: 1.6ms | ActiveRecord: 0.3ms | Allocations: 824)


Started GET "/api/v1/users" for 127.0.0.1 at 2026-02-20 15:07:35 +0530
Processing by Api::V1::UsersController#index as */*
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  â†³ app/controllers/api/v1/users_controller.rb:10:in `index'
Completed 200 OK in 1ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 823)


Started POST "/api/v1/companies" for ::1 at 2026-02-20 15:41:14 +0530
  [1m[36mActiveRecord::SchemaMigration Pluck (2.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::CompaniesController#create as */*
  Parameters: {"company"=>{"name"=>"Company One", "subdomain"=>"company1"}}
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api/v1/companies_controller.rb:16:in `create'
  [1m[36mCompany Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "public"."companies" WHERE "public"."companies"."subdomain" = $1 LIMIT $2[0m  [["subdomain", "company1"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/companies_controller.rb:16:in `create'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/controllers/api/v1/companies_controller.rb:16:in `create'
Completed 422 Unprocessable Entity in 26ms (Views: 0.1ms | ActiveRecord: 9.7ms | Allocations: 11586)


Started GET "/api/v1/companies" for ::1 at 2026-02-20 15:41:22 +0530
Processing by Api::V1::CompaniesController#index as */*
  [1m[36mCompany Load (0.4ms)[0m  [1m[34mSELECT "public"."companies".* FROM "public"."companies"[0m
  â†³ app/controllers/api/v1/companies_controller.rb:5:in `index'
Completed 200 OK in 1ms (Views: 0.8ms | ActiveRecord: 0.4ms | Allocations: 1173)


Started POST "/api/v1/companies" for ::1 at 2026-02-20 15:41:31 +0530
Processing by Api::V1::CompaniesController#create as */*
  Parameters: {"company"=>{"name"=>"Company One", "subdomain"=>"company3"}}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api/v1/companies_controller.rb:16:in `create'
  [1m[36mCompany Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "public"."companies" WHERE "public"."companies"."subdomain" = $1 LIMIT $2[0m  [["subdomain", "company3"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/companies_controller.rb:16:in `create'
  [1m[36mCompany Create (1.5ms)[0m  [1m[32mINSERT INTO "public"."companies" ("name", "subdomain", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Company One"], ["subdomain", "company3"], ["created_at", "2026-02-20 10:11:31.028237"], ["updated_at", "2026-02-20 10:11:31.028237"]]
  â†³ app/controllers/api/v1/companies_controller.rb:16:in `create'
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api/v1/companies_controller.rb:16:in `create'
Completed 201 Created in 6ms (Views: 0.4ms | ActiveRecord: 2.5ms | Allocations: 3205)


Started POST "/api/v1/users" for ::1 at 2026-02-20 15:43:23 +0530
  [1m[36mCompany Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "public"."companies" WHERE "public"."companies"."subdomain" = $1 LIMIT $2[0m  [["subdomain", "company1"], ["LIMIT", 1]]
  â†³ app/middleware/tenant_switcher.rb:25:in `switch_schema'
Switched to schema: company1
Processing by Api::V1::UsersController#create as */*
  Parameters: {"user"=>{"name"=>"User A", "email"=>"a@test.com", "role"=>"admin"}}
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api/v1/users_controller.rb:21:in `create'
  [1m[36mUser Exists? (1.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "a@test.com"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/users_controller.rb:21:in `create'
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "User A"], ["email", "a@test.com"], ["role", "admin"], ["created_at", "2026-02-20 10:13:23.363978"], ["updated_at", "2026-02-20 10:13:23.363978"]]
  â†³ app/controllers/api/v1/users_controller.rb:21:in `create'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api/v1/users_controller.rb:21:in `create'
Completed 201 Created in 11ms (Views: 0.1ms | ActiveRecord: 6.8ms | Allocations: 6309)


Started GET "/api/v1/companies" for 127.0.0.1 at 2026-02-20 15:43:44 +0530
  [1m[36mCompany Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "public"."companies" WHERE "public"."companies"."subdomain" = $1 LIMIT $2[0m  [["subdomain", "company1"], ["LIMIT", 1]]
  â†³ app/middleware/tenant_switcher.rb:25:in `switch_schema'
Switched to schema: company1
Processing by Api::V1::CompaniesController#index as */*
  [1m[36mCompany Load (0.3ms)[0m  [1m[34mSELECT "public"."companies".* FROM "public"."companies"[0m
  â†³ app/controllers/api/v1/companies_controller.rb:5:in `index'
Completed 200 OK in 3ms (Views: 2.7ms | ActiveRecord: 0.3ms | Allocations: 990)


Started GET "/api/v1/users" for 127.0.0.1 at 2026-02-20 15:43:50 +0530
  [1m[36mCompany Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "public"."companies" WHERE "public"."companies"."subdomain" = $1 LIMIT $2[0m  [["subdomain", "company1"], ["LIMIT", 1]]
  â†³ app/middleware/tenant_switcher.rb:25:in `switch_schema'
Switched to schema: company1
Processing by Api::V1::UsersController#index as */*
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  â†³ app/controllers/api/v1/users_controller.rb:10:in `index'
Completed 200 OK in 2ms (Views: 1.9ms | ActiveRecord: 0.3ms | Allocations: 972)


Started GET "/api/v1/users" for 127.0.0.1 at 2026-02-20 15:44:03 +0530
  [1m[36mCompany Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "public"."companies" WHERE "public"."companies"."subdomain" = $1 LIMIT $2[0m  [["subdomain", "company1"], ["LIMIT", 1]]
  â†³ app/middleware/tenant_switcher.rb:25:in `switch_schema'
Switched to schema: company1
Processing by Api::V1::UsersController#index as */*
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  â†³ app/controllers/api/v1/users_controller.rb:10:in `index'
Completed 200 OK in 3ms (Views: 1.7ms | ActiveRecord: 1.2ms | Allocations: 825)


Started GET "/api/v1/users" for 127.0.0.1 at 2026-02-20 15:44:10 +0530
  [1m[36mCompany Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "public"."companies" WHERE "public"."companies"."subdomain" = $1 LIMIT $2[0m  [["subdomain", "company1"], ["LIMIT", 1]]
  â†³ app/middleware/tenant_switcher.rb:25:in `switch_schema'
Switched to schema: company1
Processing by Api::V1::UsersController#index as */*
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  â†³ app/controllers/api/v1/users_controller.rb:10:in `index'
Completed 200 OK in 1ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 928)


Started GET "/api/v1/users" for 127.0.0.1 at 2026-02-20 15:44:29 +0530
  [1m[36mCompany Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "public"."companies" WHERE "public"."companies"."subdomain" = $1 LIMIT $2[0m  [["subdomain", "company1"], ["LIMIT", 1]]
  â†³ app/middleware/tenant_switcher.rb:25:in `switch_schema'
Switched to schema: company1
Processing by Api::V1::UsersController#index as */*
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  â†³ app/controllers/api/v1/users_controller.rb:10:in `index'
Completed 200 OK in 2ms (Views: 1.4ms | ActiveRecord: 0.4ms | Allocations: 825)


Started GET "/api/v1/users" for 127.0.0.1 at 2026-02-20 16:16:39 +0530
  [1m[36mActiveRecord::SchemaMigration Pluck (1.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mCompany Exists? (2.3ms)[0m  [1m[34mSELECT 1 AS one FROM "companies" WHERE "companies"."subdomain" = $1 LIMIT $2[0m  [["subdomain", "company1"], ["LIMIT", 1]]
  â†³ app/middleware/tenant_switcher.rb:27:in `switch_schema'
Switched to schema: company1
Processing by Api::V1::UsersController#index as */*
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  â†³ app/controllers/api/v1/users_controller.rb:10:in `index'
Completed 200 OK in 25ms (Views: 5.6ms | ActiveRecord: 9.8ms | Allocations: 9417)


Started GET "/api/v1/users" for 127.0.0.1 at 2026-02-20 16:16:48 +0530
  [1m[36mCompany Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "companies" WHERE "companies"."subdomain" = $1 LIMIT $2[0m  [["subdomain", "company1"], ["LIMIT", 1]]
  â†³ app/middleware/tenant_switcher.rb:27:in `switch_schema'
Switched to schema: company1
Processing by Api::V1::UsersController#index as */*
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  â†³ app/controllers/api/v1/users_controller.rb:10:in `index'
Completed 200 OK in 4ms (Views: 2.8ms | ActiveRecord: 0.4ms | Allocations: 925)


Started GET "/api/v1/users" for 127.0.0.1 at 2026-02-20 16:16:57 +0530
  [1m[36mCompany Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "companies" WHERE "companies"."subdomain" = $1 LIMIT $2[0m  [["subdomain", "company1"], ["LIMIT", 1]]
  â†³ app/middleware/tenant_switcher.rb:27:in `switch_schema'
Switched to schema: company1
Processing by Api::V1::UsersController#index as */*
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  â†³ app/controllers/api/v1/users_controller.rb:10:in `index'
Completed 200 OK in 3ms (Views: 1.7ms | ActiveRecord: 0.7ms | Allocations: 924)


Started GET "/api/v1/users" for 127.0.0.1 at 2026-02-20 16:17:02 +0530
  [1m[36mCompany Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "companies" WHERE "companies"."subdomain" = $1 LIMIT $2[0m  [["subdomain", "company1"], ["LIMIT", 1]]
  â†³ app/middleware/tenant_switcher.rb:27:in `switch_schema'
Switched to schema: company1
Processing by Api::V1::UsersController#index as */*
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  â†³ app/controllers/api/v1/users_controller.rb:10:in `index'
Completed 200 OK in 1ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 924)


Started GET "/api/v1/users" for 127.0.0.1 at 2026-02-20 16:17:08 +0530
  [1m[36mCompany Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "companies" WHERE "companies"."subdomain" = $1 LIMIT $2[0m  [["subdomain", "company1"], ["LIMIT", 1]]
  â†³ app/middleware/tenant_switcher.rb:27:in `switch_schema'
Switched to schema: company1
Processing by Api::V1::UsersController#index as */*
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  â†³ app/controllers/api/v1/users_controller.rb:10:in `index'
Completed 200 OK in 1ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 924)


Started POST "/api/v1/companies" for ::1 at 2026-02-20 16:20:43 +0530
  [1m[36mCompany Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "companies" WHERE "companies"."subdomain" = $1 LIMIT $2[0m  [["subdomain", "company1"], ["LIMIT", 1]]
  â†³ app/middleware/tenant_switcher.rb:27:in `switch_schema'
Switched to schema: company1
Processing by Api::V1::CompaniesController#create as */*
  Parameters: {"company"=>{"name"=>"Volopay", "subdomain"=>"volopay"}}
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api/v1/companies_controller.rb:19:in `create'
  [1m[36mCompany Exists? (2.0ms)[0m  [1m[34mSELECT 1 AS one FROM "companies" WHERE "companies"."subdomain" = $1 LIMIT $2[0m  [["subdomain", "volopay"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/companies_controller.rb:19:in `create'
  [1m[36mCompany Create (2.8ms)[0m  [1m[32mINSERT INTO "companies" ("name", "subdomain", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Volopay"], ["subdomain", "volopay"], ["created_at", "2026-02-20 10:50:43.986435"], ["updated_at", "2026-02-20 10:50:43.986435"]]
  â†³ app/controllers/api/v1/companies_controller.rb:19:in `create'
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api/v1/companies_controller.rb:19:in `create'
  [1m[35m (10.2ms)[0m  [1m[35mCREATE SCHEMA volopay[0m
  â†³ app/services/company_provisioning_service.rb:7:in `call'
  [1m[35mSQL (0.4ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  â†³ app/services/company_provisioning_service.rb:13:in `load'
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "accounts" CASCADE[0m
  â†³ app/services/company_provisioning_service.rb:13:in `load'
  [1m[35m (12.1ms)[0m  [1m[35mCREATE TABLE "accounts" ("id" bigserial primary key, "name" character varying, "balance" decimal, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  â†³ app/services/company_provisioning_service.rb:13:in `load'
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "approvals" CASCADE[0m
  â†³ app/services/company_provisioning_service.rb:13:in `load'
  [1m[35m (14.8ms)[0m  [1m[35mCREATE TABLE "approvals" ("id" bigserial primary key, "expense_id" bigint NOT NULL, "approver_id" bigint, "status" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  â†³ app/services/company_provisioning_service.rb:13:in `load'
  [1m[35m (1.6ms)[0m  [1m[35mCREATE INDEX "index_approvals_on_expense_id" ON "approvals" ("expense_id")[0m
  â†³ app/services/company_provisioning_service.rb:13:in `load'
  [1m[35m (1.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "categories" CASCADE[0m
  â†³ app/services/company_provisioning_service.rb:13:in `load'
  [1m[35m (5.3ms)[0m  [1m[35mCREATE TABLE "categories" ("id" bigserial primary key, "name" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  â†³ app/services/company_provisioning_service.rb:13:in `load'
  [1m[35m (0.9ms)[0m  [1m[35mDROP TABLE IF EXISTS "companies" CASCADE[0m
  â†³ app/services/company_provisioning_service.rb:13:in `load'
  [1m[35m (7.4ms)[0m  [1m[35mCREATE TABLE "companies" ("id" bigserial primary key, "name" character varying, "subdomain" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  â†³ app/services/company_provisioning_service.rb:13:in `load'
  [1m[35m (1.9ms)[0m  [1m[35mDROP TABLE IF EXISTS "expenses" CASCADE[0m
  â†³ app/services/company_provisioning_service.rb:13:in `load'
  [1m[35m (4.7ms)[0m  [1m[35mCREATE TABLE "expenses" ("id" bigserial primary key, "amount" decimal, "description" text, "status" character varying, "user_id" bigint NOT NULL, "category_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  â†³ app/services/company_provisioning_service.rb:13:in `load'
  [1m[35m (0.8ms)[0m  [1m[35mCREATE INDEX "index_expenses_on_category_id" ON "expenses" ("category_id")[0m
  â†³ app/services/company_provisioning_service.rb:13:in `load'
  [1m[35m (0.9ms)[0m  [1m[35mCREATE INDEX "index_expenses_on_user_id" ON "expenses" ("user_id")[0m
  â†³ app/services/company_provisioning_service.rb:13:in `load'
  [1m[35m (1.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "tenants" CASCADE[0m
  â†³ app/services/company_provisioning_service.rb:13:in `load'
  [1m[35m (5.9ms)[0m  [1m[35mCREATE TABLE "tenants" ("id" bigserial primary key, "name" character varying, "subdomain" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  â†³ app/services/company_provisioning_service.rb:13:in `load'
  [1m[35m (1.5ms)[0m  [1m[35mDROP TABLE IF EXISTS "transactions" CASCADE[0m
  â†³ app/services/company_provisioning_service.rb:13:in `load'
  [1m[35m (11.4ms)[0m  [1m[35mCREATE TABLE "transactions" ("id" bigserial primary key, "amount" decimal, "transaction_type" character varying, "account_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  â†³ app/services/company_provisioning_service.rb:13:in `load'
  [1m[35m (1.5ms)[0m  [1m[35mCREATE INDEX "index_transactions_on_account_id" ON "transactions" ("account_id")[0m
  â†³ app/services/company_provisioning_service.rb:13:in `load'
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "users" CASCADE[0m
  â†³ app/services/company_provisioning_service.rb:13:in `load'
  [1m[35m (5.7ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "name" character varying, "email" character varying, "role" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  â†³ app/services/company_provisioning_service.rb:13:in `load'
  [1m[35m (13.9ms)[0m  [1m[35mALTER TABLE "approvals" ADD CONSTRAINT "fk_rails_a8b2d49d72"
FOREIGN KEY ("expense_id")
  REFERENCES "expenses" ("id")
[0m
  â†³ app/services/company_provisioning_service.rb:13:in `load'
  [1m[35m (3.5ms)[0m  [1m[35mALTER TABLE "expenses" ADD CONSTRAINT "fk_rails_06966d0da0"
FOREIGN KEY ("category_id")
  REFERENCES "categories" ("id")
[0m
  â†³ app/services/company_provisioning_service.rb:13:in `load'
  [1m[35m (3.5ms)[0m  [1m[35mALTER TABLE "expenses" ADD CONSTRAINT "fk_rails_c3ee69df61"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  â†³ app/services/company_provisioning_service.rb:13:in `load'
  [1m[35m (1.6ms)[0m  [1m[35mALTER TABLE "transactions" ADD CONSTRAINT "fk_rails_01f020e267"
FOREIGN KEY ("account_id")
  REFERENCES "accounts" ("id")
[0m
  â†³ app/services/company_provisioning_service.rb:13:in `load'
  [1m[35m (4.5ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  â†³ app/services/company_provisioning_service.rb:13:in `load'
  [1m[36mActiveRecord::SchemaMigration Pluck (1.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ app/services/company_provisioning_service.rb:13:in `load'
  [1m[35m (1.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20260219090403)[0m
  â†³ app/services/company_provisioning_service.rb:13:in `load'
  [1m[35m (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20260219080021),
(20260219080617),
(20260219090116),
(20260219090209),
(20260219090304),
(20260219090321),
(20260219090333);

[0m
  â†³ app/services/company_provisioning_service.rb:13:in `load'
  [1m[35m (11.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  â†³ app/services/company_provisioning_service.rb:13:in `load'
  [1m[36mActiveRecord::InternalMetadata Load (1.2ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  â†³ app/services/company_provisioning_service.rb:13:in `load'
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/company_provisioning_service.rb:13:in `load'
  [1m[36mActiveRecord::InternalMetadata Create (0.8ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2026-02-20 10:50:44.223336"], ["updated_at", "2026-02-20 10:50:44.223336"]]
  â†³ app/services/company_provisioning_service.rb:13:in `load'
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/company_provisioning_service.rb:13:in `load'
Completed 201 Created in 250ms (Views: 0.4ms | ActiveRecord: 153.3ms | Allocations: 28488)


  [1m[35m (4.2ms)[0m  [1m[34mSELECT schema_name FROM information_schema.schemata;[0m
  [1m[35m (8.4ms)[0m  [1m[34mSELECT schema_name FROM information_schema.schemata;[0m
Started GET "/api/v1/companies" for ::1 at 2026-02-20 16:23:31 +0530
  [1m[36mActiveRecord::SchemaMigration Pluck (1.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mCompany Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM "companies" WHERE "companies"."subdomain" = $1 LIMIT $2[0m  [["subdomain", "company1"], ["LIMIT", 1]]
  â†³ app/middleware/tenant_switcher.rb:27:in `switch_schema'
Switched to schema: company1
Processing by Api::V1::CompaniesController#index as */*
  Parameters: {"company"=>{"name"=>"Volopay", "subdomain"=>"volopay"}}
  [1m[36mCompany Load (0.9ms)[0m  [1m[34mSELECT "companies".* FROM "companies"[0m
  â†³ app/controllers/api/v1/companies_controller.rb:8:in `index'
Completed 200 OK in 16ms (Views: 6.7ms | ActiveRecord: 5.2ms | Allocations: 7000)


Started GET "/api/v1/companies" for ::1 at 2026-02-20 16:23:42 +0530
Processing by Api::V1::CompaniesController#index as */*
  Parameters: {"company"=>{"name"=>"Volopay", "subdomain"=>"volopay"}}
  [1m[36mCompany Load (0.5ms)[0m  [1m[34mSELECT "companies".* FROM "companies"[0m
  â†³ app/controllers/api/v1/companies_controller.rb:8:in `index'
Completed 200 OK in 3ms (Views: 2.4ms | ActiveRecord: 0.5ms | Allocations: 995)


Started GET "/api/v1/companies" for ::1 at 2026-02-20 16:24:09 +0530
  [1m[36mCompany Exists? (1.5ms)[0m  [1m[34mSELECT 1 AS one FROM "companies" WHERE "companies"."subdomain" = $1 LIMIT $2[0m  [["subdomain", "company1"], ["LIMIT", 1]]
  â†³ app/middleware/tenant_switcher.rb:27:in `switch_schema'
Switched to schema: company1
Processing by Api::V1::CompaniesController#index as */*
  Parameters: {"company"=>{"name"=>"Volopay", "subdomain"=>"volopay"}}
  [1m[36mCompany Load (0.7ms)[0m  [1m[34mSELECT "companies".* FROM "companies"[0m
  â†³ app/controllers/api/v1/companies_controller.rb:8:in `index'
Completed 200 OK in 3ms (Views: 1.8ms | ActiveRecord: 0.7ms | Allocations: 809)


Started GET "/api/v1/companies" for ::1 at 2026-02-20 16:24:26 +0530
  [1m[36mCompany Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "companies" WHERE "companies"."subdomain" = $1 LIMIT $2[0m  [["subdomain", "volopay"], ["LIMIT", 1]]
  â†³ app/middleware/tenant_switcher.rb:27:in `switch_schema'
  
ActiveRecord::RecordNotFound (Company not found):
  
app/middleware/tenant_switcher.rb:31:in `switch_schema'
app/middleware/tenant_switcher.rb:13:in `call'
Started GET "/api/v1/companies" for 127.0.0.1 at 2026-02-20 16:25:11 +0530
  [1m[36mCompany Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "companies" WHERE "companies"."subdomain" = $1 LIMIT $2[0m  [["subdomain", "volopay"], ["LIMIT", 1]]
  â†³ app/middleware/tenant_switcher.rb:27:in `switch_schema'
  
ActiveRecord::RecordNotFound (Company not found):
  
app/middleware/tenant_switcher.rb:31:in `switch_schema'
app/middleware/tenant_switcher.rb:13:in `call'
Started GET "/api/v1/companies" for 127.0.0.1 at 2026-02-20 16:25:17 +0530
Processing by Api::V1::CompaniesController#index as */*
  [1m[36mCompany Load (0.4ms)[0m  [1m[34mSELECT "companies".* FROM "companies"[0m
  â†³ app/controllers/api/v1/companies_controller.rb:8:in `index'
Completed 200 OK in 2ms (Views: 1.7ms | ActiveRecord: 0.4ms | Allocations: 984)


Started GET "/api/v1/companies" for 127.0.0.1 at 2026-02-20 16:26:03 +0530
Processing by Api::V1::CompaniesController#index as */*
  [1m[36mCompany Load (0.4ms)[0m  [1m[34mSELECT "companies".* FROM "companies"[0m
  â†³ app/controllers/api/v1/companies_controller.rb:8:in `index'
Completed 200 OK in 1ms (Views: 0.7ms | ActiveRecord: 0.4ms | Allocations: 986)


Started GET "/api/v1/companies" for ::1 at 2026-02-20 16:26:28 +0530
  [1m[36mCompany Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "companies" WHERE "companies"."subdomain" = $1 LIMIT $2[0m  [["subdomain", "volopay"], ["LIMIT", 1]]
  â†³ app/middleware/tenant_switcher.rb:27:in `switch_schema'
  
ActiveRecord::RecordNotFound (Company not found):
  
app/middleware/tenant_switcher.rb:31:in `switch_schema'
app/middleware/tenant_switcher.rb:13:in `call'
Started GET "/api/v1/users" for ::1 at 2026-02-20 16:28:06 +0530
  [1m[36mCompany Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "companies" WHERE "companies"."subdomain" = $1 LIMIT $2[0m  [["subdomain", "volopay"], ["LIMIT", 1]]
  â†³ app/middleware/tenant_switcher.rb:27:in `switch_schema'
  
ActiveRecord::RecordNotFound (Company not found):
  
app/middleware/tenant_switcher.rb:31:in `switch_schema'
app/middleware/tenant_switcher.rb:13:in `call'
Started GET "/api/v1/users" for ::1 at 2026-02-20 16:30:10 +0530
  [1m[36mActiveRecord::SchemaMigration Pluck (1.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Header received: volopay
Current path: /api/v1/users
  [1m[36mCompany Exists? (1.3ms)[0m  [1m[34mSELECT 1 AS one FROM "companies" WHERE "companies"."subdomain" = $1 LIMIT $2[0m  [["subdomain", "volopay"], ["LIMIT", 1]]
  â†³ app/middleware/tenant_switcher.rb:30:in `switch_schema'
  
ActiveRecord::RecordNotFound (Company not found):
  
app/middleware/tenant_switcher.rb:34:in `switch_schema'
app/middleware/tenant_switcher.rb:16:in `call'
Started GET "/api/v1/users" for ::1 at 2026-02-20 16:30:56 +0530
Header received: 
Current path: /api/v1/users
Processing by Api::V1::UsersController#index as */*
  [1m[36mUser Load (2.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  â†³ app/controllers/api/v1/users_controller.rb:10:in `index'
Completed 200 OK in 22ms (Views: 4.3ms | ActiveRecord: 9.3ms | Allocations: 9269)


Started GET "/api/v1/users" for ::1 at 2026-02-20 16:35:00 +0530
  [1m[36mActiveRecord::SchemaMigration Pluck (1.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Header received: 
Current path: /api/v1/users
  [1m[35m (0.3ms)[0m  [1m[35mSET search_path TO public[0m
  â†³ app/middleware/tenant_switcher.rb:39:in `set_public_schema'
Processing by Api::V1::UsersController#index as */*
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  â†³ app/controllers/api/v1/users_controller.rb:10:in `index'
Completed 200 OK in 62ms (Views: 42.4ms | ActiveRecord: 10.1ms | Allocations: 9732)


  [1m[35m (0.9ms)[0m  [1m[35mSET search_path TO public[0m
  â†³ app/middleware/tenant_switcher.rb:39:in `set_public_schema'
Started GET "/api/v1/users" for ::1 at 2026-02-20 16:35:02 +0530
Header received: volopay
Current path: /api/v1/users
  [1m[36mCompany Exists? (1.6ms)[0m  [1m[34mSELECT 1 AS one FROM "companies" WHERE "companies"."subdomain" = $1 LIMIT $2[0m  [["subdomain", "volopay"], ["LIMIT", 1]]
  â†³ app/middleware/tenant_switcher.rb:30:in `switch_schema'
  [1m[35m (0.4ms)[0m  [1m[35mSET search_path TO public[0m
  â†³ app/middleware/tenant_switcher.rb:39:in `set_public_schema'
  
ActiveRecord::RecordNotFound (Company not found):
  
app/middleware/tenant_switcher.rb:34:in `switch_schema'
app/middleware/tenant_switcher.rb:16:in `call'
Started GET "/api/v1/users" for ::1 at 2026-02-20 16:37:57 +0530
  [1m[36mActiveRecord::SchemaMigration Pluck (1.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Header received: volopay
Current path: /api/v1/users
  [1m[35m (0.1ms)[0m  [1m[35mSET search_path TO public[0m
  â†³ app/middleware/tenant_switcher.rb:31:in `switch_schema'
  [1m[36mCompany Exists? (1.6ms)[0m  [1m[34mSELECT 1 AS one FROM "companies" WHERE "companies"."subdomain" = $1 LIMIT $2[0m  [["subdomain", "volopay"], ["LIMIT", 1]]
  â†³ app/middleware/tenant_switcher.rb:33:in `switch_schema'
  [1m[35m (0.1ms)[0m  [1m[35mSET search_path TO public[0m
  â†³ app/middleware/tenant_switcher.rb:42:in `set_public_schema'
  
ActiveRecord::RecordNotFound (Company not found):
  
app/middleware/tenant_switcher.rb:37:in `switch_schema'
app/middleware/tenant_switcher.rb:16:in `call'
  [1m[36mCompany Load (1.6ms)[0m  [1m[34mSELECT "companies".* FROM "companies"[0m
Started POST "/api/v1/companies" for ::1 at 2026-02-20 16:41:34 +0530
  [1m[36mActiveRecord::SchemaMigration Pluck (1.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Header received: 
Current path: /api/v1/companies
  [1m[35m (0.2ms)[0m  [1m[35mSET search_path TO public[0m
  â†³ app/middleware/tenant_switcher.rb:42:in `set_public_schema'
Processing by Api::V1::CompaniesController#create as */*
  Parameters: {"company"=>{"name"=>"Volopay", "subdomain"=>"volopay"}}
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api/v1/companies_controller.rb:19:in `create'
  [1m[36mCompany Exists? (1.4ms)[0m  [1m[34mSELECT 1 AS one FROM "companies" WHERE "companies"."subdomain" = $1 LIMIT $2[0m  [["subdomain", "volopay"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/companies_controller.rb:19:in `create'
  [1m[36mCompany Create (1.4ms)[0m  [1m[32mINSERT INTO "companies" ("name", "subdomain", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Volopay"], ["subdomain", "volopay"], ["created_at", "2026-02-20 11:11:34.761971"], ["updated_at", "2026-02-20 11:11:34.761971"]]
  â†³ app/controllers/api/v1/companies_controller.rb:19:in `create'
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api/v1/companies_controller.rb:19:in `create'
  [1m[35m (2.0ms)[0m  [1m[35mCREATE SCHEMA volopay[0m
  â†³ app/services/company_provisioning_service.rb:7:in `call'
Completed 500 Internal Server Error in 33ms (ActiveRecord: 16.9ms | Allocations: 11658)


  [1m[35m (0.2ms)[0m  [1m[35mSET search_path TO public[0m
  â†³ app/middleware/tenant_switcher.rb:42:in `set_public_schema'
  
ActiveRecord::StatementInvalid (PG::DuplicateSchema: ERROR:  schema "volopay" already exists
):
  
app/services/company_provisioning_service.rb:7:in `call'
app/controllers/api/v1/companies_controller.rb:21:in `create'
app/middleware/tenant_switcher.rb:21:in `call'
Started POST "/api/v1/companies" for ::1 at 2026-02-20 16:42:00 +0530
  [1m[36mActiveRecord::SchemaMigration Pluck (1.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Header received: 
Current path: /api/v1/companies
  [1m[35m (0.3ms)[0m  [1m[35mSET search_path TO public[0m
  â†³ app/middleware/tenant_switcher.rb:42:in `set_public_schema'
Processing by Api::V1::CompaniesController#create as */*
  Parameters: {"company"=>{"name"=>"Volopay", "subdomain"=>"volopay"}}
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api/v1/companies_controller.rb:19:in `create'
  [1m[36mCompany Exists? (1.8ms)[0m  [1m[34mSELECT 1 AS one FROM "companies" WHERE "companies"."subdomain" = $1 LIMIT $2[0m  [["subdomain", "volopay"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/companies_controller.rb:19:in `create'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/controllers/api/v1/companies_controller.rb:19:in `create'
Completed 422 Unprocessable Entity in 31ms (Views: 0.3ms | ActiveRecord: 10.9ms | Allocations: 11672)


  [1m[35m (0.9ms)[0m  [1m[35mSET search_path TO public[0m
  â†³ app/middleware/tenant_switcher.rb:42:in `set_public_schema'
  [1m[36mCompany Pluck (0.8ms)[0m  [1m[34mSELECT "companies"."subdomain" FROM "companies"[0m
Started GET "/api/v1/users" for ::1 at 2026-02-20 16:43:52 +0530
  [1m[36mActiveRecord::SchemaMigration Pluck (1.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Header received: volopay
Current path: /api/v1/users
  [1m[35m (0.2ms)[0m  [1m[35mSET search_path TO public[0m
  â†³ app/middleware/tenant_switcher.rb:31:in `switch_schema'
  [1m[36mCompany Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM "companies" WHERE "companies"."subdomain" = $1 LIMIT $2[0m  [["subdomain", "volopay"], ["LIMIT", 1]]
  â†³ app/middleware/tenant_switcher.rb:33:in `switch_schema'
  [1m[35m (0.1ms)[0m  [1m[35mSET search_path TO volopay, public[0m
  â†³ app/middleware/tenant_switcher.rb:34:in `switch_schema'
Switched to schema: volopay
  [1m[35m (2.3ms)[0m  [1m[34mSELECT current_schema();[0m
  â†³ app/controllers/api/v1/users_controller.rb:19:in `<class:UsersController>'
Processing by Api::V1::UsersController#index as */*
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  â†³ app/controllers/api/v1/users_controller.rb:10:in `index'
Completed 200 OK in 10ms (Views: 0.8ms | ActiveRecord: 1.1ms | Allocations: 4870)


  [1m[35m (0.3ms)[0m  [1m[35mSET search_path TO public[0m
  â†³ app/middleware/tenant_switcher.rb:42:in `set_public_schema'
Started GET "/api/v1/users" for ::1 at 2026-02-20 16:44:20 +0530
Header received: 
Current path: /api/v1/users
  [1m[35m (0.2ms)[0m  [1m[35mSET search_path TO public[0m
  â†³ app/middleware/tenant_switcher.rb:42:in `set_public_schema'
Processing by Api::V1::UsersController#index as */*
  [1m[36mUser Load (2.4ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  â†³ app/controllers/api/v1/users_controller.rb:10:in `index'
Completed 200 OK in 19ms (Views: 4.1ms | ActiveRecord: 11.0ms | Allocations: 6529)


  [1m[35m (0.3ms)[0m  [1m[35mSET search_path TO public[0m
  â†³ app/middleware/tenant_switcher.rb:42:in `set_public_schema'
Started GET "/api/v1/users" for ::1 at 2026-02-20 16:44:23 +0530
Header received: volopay
Current path: /api/v1/users
  [1m[35m (0.2ms)[0m  [1m[35mSET search_path TO public[0m
  â†³ app/middleware/tenant_switcher.rb:31:in `switch_schema'
  [1m[36mCompany Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "companies" WHERE "companies"."subdomain" = $1 LIMIT $2[0m  [["subdomain", "volopay"], ["LIMIT", 1]]
  â†³ app/middleware/tenant_switcher.rb:33:in `switch_schema'
  [1m[35m (0.2ms)[0m  [1m[35mSET search_path TO volopay, public[0m
  â†³ app/middleware/tenant_switcher.rb:34:in `switch_schema'
Switched to schema: volopay
Processing by Api::V1::UsersController#index as */*
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  â†³ app/controllers/api/v1/users_controller.rb:10:in `index'
Completed 200 OK in 1ms (Views: 1.0ms | ActiveRecord: 0.3ms | Allocations: 717)


  [1m[35m (0.1ms)[0m  [1m[35mSET search_path TO public[0m
  â†³ app/middleware/tenant_switcher.rb:42:in `set_public_schema'
Started POST "/api/v1/users" for ::1 at 2026-02-20 16:45:41 +0530
Header received: volopay
Current path: /api/v1/users
  [1m[35m (0.2ms)[0m  [1m[35mSET search_path TO public[0m
  â†³ app/middleware/tenant_switcher.rb:31:in `switch_schema'
  [1m[36mCompany Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "companies" WHERE "companies"."subdomain" = $1 LIMIT $2[0m  [["subdomain", "volopay"], ["LIMIT", 1]]
  â†³ app/middleware/tenant_switcher.rb:33:in `switch_schema'
  [1m[35m (0.1ms)[0m  [1m[35mSET search_path TO volopay, public[0m
  â†³ app/middleware/tenant_switcher.rb:34:in `switch_schema'
Switched to schema: volopay
Processing by Api::V1::UsersController#create as */*
  Parameters: {"user"=>{"name"=>"Srinivas", "mail"=>"srinivas@gmail.com", "role"=>"admin"}}
[31mUnpermitted parameter: :mail. Context: { controller: Api::V1::UsersController, action: create, request: #<ActionDispatch::Request:0x000000010b5cfab0>, params: {"user"=>{"name"=>"Srinivas", "mail"=>"srinivas@gmail.com", "role"=>"admin"}, "controller"=>"api/v1/users", "action"=>"create"} }[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api/v1/users_controller.rb:21:in `create'
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/api/v1/users_controller.rb:21:in `create'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/controllers/api/v1/users_controller.rb:21:in `create'
Completed 422 Unprocessable Entity in 6ms (Views: 0.1ms | ActiveRecord: 0.8ms | Allocations: 4099)


  [1m[35m (0.2ms)[0m  [1m[35mSET search_path TO public[0m
  â†³ app/middleware/tenant_switcher.rb:42:in `set_public_schema'
Started POST "/api/v1/users" for ::1 at 2026-02-20 16:45:49 +0530
Header received: volopay
Current path: /api/v1/users
  [1m[35m (0.2ms)[0m  [1m[35mSET search_path TO public[0m
  â†³ app/middleware/tenant_switcher.rb:31:in `switch_schema'
  [1m[36mCompany Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "companies" WHERE "companies"."subdomain" = $1 LIMIT $2[0m  [["subdomain", "volopay"], ["LIMIT", 1]]
  â†³ app/middleware/tenant_switcher.rb:33:in `switch_schema'
  [1m[35m (0.1ms)[0m  [1m[35mSET search_path TO volopay, public[0m
  â†³ app/middleware/tenant_switcher.rb:34:in `switch_schema'
Switched to schema: volopay
Processing by Api::V1::UsersController#create as */*
  Parameters: {"user"=>{"name"=>"Srinivas", "email"=>"srinivas@gmail.com", "role"=>"admin"}}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api/v1/users_controller.rb:21:in `create'
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "srinivas@gmail.com"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/users_controller.rb:21:in `create'
  [1m[36mUser Create (1.9ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Srinivas"], ["email", "srinivas@gmail.com"], ["role", "admin"], ["created_at", "2026-02-20 11:15:49.156096"], ["updated_at", "2026-02-20 11:15:49.156096"]]
  â†³ app/controllers/api/v1/users_controller.rb:21:in `create'
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api/v1/users_controller.rb:21:in `create'
Completed 201 Created in 6ms (Views: 0.3ms | ActiveRecord: 2.9ms | Allocations: 3330)


  [1m[35m (0.2ms)[0m  [1m[35mSET search_path TO public[0m
  â†³ app/middleware/tenant_switcher.rb:42:in `set_public_schema'
Started GET "/api/v1/users" for ::1 at 2026-02-20 16:45:55 +0530
Header received: volopay
Current path: /api/v1/users
  [1m[35m (0.2ms)[0m  [1m[35mSET search_path TO public[0m
  â†³ app/middleware/tenant_switcher.rb:31:in `switch_schema'
  [1m[36mCompany Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "companies" WHERE "companies"."subdomain" = $1 LIMIT $2[0m  [["subdomain", "volopay"], ["LIMIT", 1]]
  â†³ app/middleware/tenant_switcher.rb:33:in `switch_schema'
  [1m[35m (0.1ms)[0m  [1m[35mSET search_path TO volopay, public[0m
  â†³ app/middleware/tenant_switcher.rb:34:in `switch_schema'
Switched to schema: volopay
Processing by Api::V1::UsersController#index as */*
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  â†³ app/controllers/api/v1/users_controller.rb:10:in `index'
Completed 200 OK in 1ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 822)


  [1m[35m (0.1ms)[0m  [1m[35mSET search_path TO public[0m
  â†³ app/middleware/tenant_switcher.rb:42:in `set_public_schema'
Started GET "/api/v1/users" for ::1 at 2026-02-20 16:46:20 +0530
Header received: company1
Current path: /api/v1/users
  [1m[35m (0.2ms)[0m  [1m[35mSET search_path TO public[0m
  â†³ app/middleware/tenant_switcher.rb:31:in `switch_schema'
  [1m[36mCompany Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "companies" WHERE "companies"."subdomain" = $1 LIMIT $2[0m  [["subdomain", "company1"], ["LIMIT", 1]]
  â†³ app/middleware/tenant_switcher.rb:33:in `switch_schema'
  [1m[35m (0.1ms)[0m  [1m[35mSET search_path TO company1, public[0m
  â†³ app/middleware/tenant_switcher.rb:34:in `switch_schema'
Switched to schema: company1
Processing by Api::V1::UsersController#index as */*
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  â†³ app/controllers/api/v1/users_controller.rb:10:in `index'
Completed 200 OK in 3ms (Views: 1.6ms | ActiveRecord: 0.9ms | Allocations: 922)


  [1m[35m (0.2ms)[0m  [1m[35mSET search_path TO public[0m
  â†³ app/middleware/tenant_switcher.rb:42:in `set_public_schema'
Started GET "/api/v1/users" for ::1 at 2026-02-20 16:46:27 +0530
Header received: volopay
Current path: /api/v1/users
  [1m[35m (0.2ms)[0m  [1m[35mSET search_path TO public[0m
  â†³ app/middleware/tenant_switcher.rb:31:in `switch_schema'
  [1m[36mCompany Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "companies" WHERE "companies"."subdomain" = $1 LIMIT $2[0m  [["subdomain", "volopay"], ["LIMIT", 1]]
  â†³ app/middleware/tenant_switcher.rb:33:in `switch_schema'
  [1m[35m (0.2ms)[0m  [1m[35mSET search_path TO volopay, public[0m
  â†³ app/middleware/tenant_switcher.rb:34:in `switch_schema'
Switched to schema: volopay
Processing by Api::V1::UsersController#index as */*
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  â†³ app/controllers/api/v1/users_controller.rb:10:in `index'
Completed 200 OK in 2ms (Views: 1.6ms | ActiveRecord: 0.6ms | Allocations: 824)


  [1m[35m (0.2ms)[0m  [1m[35mSET search_path TO public[0m
  â†³ app/middleware/tenant_switcher.rb:42:in `set_public_schema'
Started GET "/api/v1/users" for ::1 at 2026-02-20 18:58:40 +0530
  [1m[36mActiveRecord::SchemaMigration Pluck (1.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Header received: 
Current path: /api/v1/users
  [1m[35m (0.2ms)[0m  [1m[35mSET search_path TO public[0m
  â†³ app/middleware/tenant_switcher.rb:44:in `set_public_schema'
Processing by Api::V1::UsersController#index as */*
  [1m[36mUser Load (3.1ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  â†³ app/controllers/api/v1/users_controller.rb:8:in `index'
Completed 200 OK in 30ms (Views: 5.0ms | ActiveRecord: 12.7ms | Allocations: 10057)


  [1m[35m (0.3ms)[0m  [1m[35mSET search_path TO public[0m
  â†³ app/middleware/tenant_switcher.rb:44:in `set_public_schema'
Started GET "/api/v1/users" for ::1 at 2026-02-20 18:58:46 +0530
Header received: volopay
Current path: /api/v1/users
  [1m[35m (0.2ms)[0m  [1m[35mSET search_path TO public[0m
  â†³ app/middleware/tenant_switcher.rb:33:in `switch_schema'
  [1m[36mCompany Exists? (1.2ms)[0m  [1m[34mSELECT 1 AS one FROM "companies" WHERE "companies"."subdomain" = $1 LIMIT $2[0m  [["subdomain", "volopay"], ["LIMIT", 1]]
  â†³ app/middleware/tenant_switcher.rb:35:in `switch_schema'
  [1m[35m (0.2ms)[0m  [1m[35mSET search_path TO volopay, public[0m
  â†³ app/middleware/tenant_switcher.rb:36:in `switch_schema'
Switched to schema: volopay
Processing by Api::V1::UsersController#index as */*
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  â†³ app/controllers/api/v1/users_controller.rb:8:in `index'
Completed 200 OK in 3ms (Views: 1.9ms | ActiveRecord: 1.2ms | Allocations: 828)


  [1m[35m (0.5ms)[0m  [1m[35mSET search_path TO public[0m
  â†³ app/middleware/tenant_switcher.rb:44:in `set_public_schema'
Started GET "/api/v1/users" for ::1 at 2026-02-20 18:58:54 +0530
Header received: company1
Current path: /api/v1/users
  [1m[35m (0.2ms)[0m  [1m[35mSET search_path TO public[0m
  â†³ app/middleware/tenant_switcher.rb:33:in `switch_schema'
  [1m[36mCompany Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "companies" WHERE "companies"."subdomain" = $1 LIMIT $2[0m  [["subdomain", "company1"], ["LIMIT", 1]]
  â†³ app/middleware/tenant_switcher.rb:35:in `switch_schema'
  [1m[35m (0.1ms)[0m  [1m[35mSET search_path TO company1, public[0m
  â†³ app/middleware/tenant_switcher.rb:36:in `switch_schema'
Switched to schema: company1
Processing by Api::V1::UsersController#index as */*
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  â†³ app/controllers/api/v1/users_controller.rb:8:in `index'
Completed 200 OK in 3ms (Views: 1.8ms | ActiveRecord: 1.4ms | Allocations: 925)


  [1m[35m (0.2ms)[0m  [1m[35mSET search_path TO public[0m
  â†³ app/middleware/tenant_switcher.rb:44:in `set_public_schema'
Started GET "/api/v1/users" for ::1 at 2026-02-20 18:59:05 +0530
Header received: volopay
Current path: /api/v1/users
  [1m[35m (3.6ms)[0m  [1m[35mSET search_path TO public[0m
  â†³ app/middleware/tenant_switcher.rb:33:in `switch_schema'
  [1m[36mCompany Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "companies" WHERE "companies"."subdomain" = $1 LIMIT $2[0m  [["subdomain", "volopay"], ["LIMIT", 1]]
  â†³ app/middleware/tenant_switcher.rb:35:in `switch_schema'
  [1m[35m (0.2ms)[0m  [1m[35mSET search_path TO volopay, public[0m
  â†³ app/middleware/tenant_switcher.rb:36:in `switch_schema'
Switched to schema: volopay
Processing by Api::V1::UsersController#index as */*
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  â†³ app/controllers/api/v1/users_controller.rb:8:in `index'
Completed 200 OK in 3ms (Views: 1.8ms | ActiveRecord: 0.7ms | Allocations: 825)


  [1m[35m (0.2ms)[0m  [1m[35mSET search_path TO public[0m
  â†³ app/middleware/tenant_switcher.rb:44:in `set_public_schema'
Started GET "/api/v1/users" for ::1 at 2026-02-20 19:16:42 +0530
  [1m[36mActiveRecord::SchemaMigration Pluck (3.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Header received: volopay
Current path: /api/v1/users
  [1m[36mCompany Load (1.2ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."subdomain" = $1 LIMIT $2[0m  [["subdomain", "volopay"], ["LIMIT", 1]]
  â†³ app/middleware/tenant_switcher.rb:29:in `switch_schema'
Switched to schema: volopay
Processing by Api::V1::UsersController#index as */*
  [1m[36mUser Load (4.3ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  â†³ app/controllers/api/v1/users_controller.rb:8:in `index'
Completed 200 OK in 26ms (Views: 4.2ms | ActiveRecord: 10.1ms | Allocations: 7523)


Started GET "/api/v1/users" for ::1 at 2026-02-20 19:16:49 +0530
Header received: company1
Current path: /api/v1/users
  [1m[36mCompany Load (0.4ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."subdomain" = $1 LIMIT $2[0m  [["subdomain", "company1"], ["LIMIT", 1]]
  â†³ app/middleware/tenant_switcher.rb:29:in `switch_schema'
Switched to schema: company1
Processing by Api::V1::UsersController#index as */*
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  â†³ app/controllers/api/v1/users_controller.rb:8:in `index'
Completed 200 OK in 2ms (Views: 1.4ms | ActiveRecord: 0.9ms | Allocations: 925)


Started GET "/api/v1/companies" for ::1 at 2026-02-20 19:16:55 +0530
Header received: company1
Current path: /api/v1/companies
  [1m[36mCompany Load (0.3ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."subdomain" = $1 LIMIT $2[0m  [["subdomain", "company1"], ["LIMIT", 1]]
  â†³ app/middleware/tenant_switcher.rb:29:in `switch_schema'
Switched to schema: company1
Processing by Api::V1::CompaniesController#index as */*
  [1m[36mCompany Load (1.0ms)[0m  [1m[34mSELECT "companies".* FROM "companies"[0m
  â†³ app/controllers/api/v1/companies_controller.rb:5:in `index'
Completed 200 OK in 3ms (Views: 2.0ms | ActiveRecord: 1.0ms | Allocations: 909)


Started GET "/api/v1/companies" for ::1 at 2026-02-20 19:16:58 +0530
Header received: 
Current path: /api/v1/companies
Processing by Api::V1::CompaniesController#index as */*
  [1m[36mCompany Load (0.4ms)[0m  [1m[34mSELECT "companies".* FROM "companies"[0m
  â†³ app/controllers/api/v1/companies_controller.rb:5:in `index'
Completed 200 OK in 3ms (Views: 2.0ms | ActiveRecord: 0.4ms | Allocations: 1083)


Started GET "/api/v1/companies" for ::1 at 2026-02-20 19:17:03 +0530
Header received: company1
Current path: /api/v1/companies
  [1m[36mCompany Load (0.3ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."subdomain" = $1 LIMIT $2[0m  [["subdomain", "company1"], ["LIMIT", 1]]
  â†³ app/middleware/tenant_switcher.rb:29:in `switch_schema'
Switched to schema: company1
Processing by Api::V1::CompaniesController#index as */*
  [1m[36mCompany Load (0.3ms)[0m  [1m[34mSELECT "companies".* FROM "companies"[0m
  â†³ app/controllers/api/v1/companies_controller.rb:5:in `index'
Completed 200 OK in 2ms (Views: 1.4ms | ActiveRecord: 0.3ms | Allocations: 809)


Started GET "/api/v1/companies" for ::1 at 2026-02-20 19:17:10 +0530
Header received: 
Current path: /api/v1/companies
Processing by Api::V1::CompaniesController#index as */*
  [1m[36mCompany Load (0.3ms)[0m  [1m[34mSELECT "companies".* FROM "companies"[0m
  â†³ app/controllers/api/v1/companies_controller.rb:5:in `index'
Completed 200 OK in 2ms (Views: 1.5ms | ActiveRecord: 0.3ms | Allocations: 1074)


Started GET "/api/v1/companies" for ::1 at 2026-02-20 19:17:17 +0530
Header received: volopay
Current path: /api/v1/companies
  [1m[36mCompany Load (0.3ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."subdomain" = $1 LIMIT $2[0m  [["subdomain", "volopay"], ["LIMIT", 1]]
  â†³ app/middleware/tenant_switcher.rb:29:in `switch_schema'
Switched to schema: volopay
Processing by Api::V1::CompaniesController#index as */*
  [1m[36mCompany Load (2.3ms)[0m  [1m[34mSELECT "companies".* FROM "companies"[0m
  â†³ app/controllers/api/v1/companies_controller.rb:5:in `index'
Completed 200 OK in 4ms (Views: 1.1ms | ActiveRecord: 2.3ms | Allocations: 710)


Started GET "/api/v1/users" for ::1 at 2026-02-20 19:17:30 +0530
Header received: volopay
Current path: /api/v1/users
  [1m[36mCompany Load (0.3ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."subdomain" = $1 LIMIT $2[0m  [["subdomain", "volopay"], ["LIMIT", 1]]
  â†³ app/middleware/tenant_switcher.rb:29:in `switch_schema'
Switched to schema: volopay
Processing by Api::V1::UsersController#index as */*
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  â†³ app/controllers/api/v1/users_controller.rb:8:in `index'
Completed 200 OK in 3ms (Views: 2.0ms | ActiveRecord: 0.3ms | Allocations: 822)


Started GET "/api/v1/users" for ::1 at 2026-02-20 19:17:41 +0530
Header received: company1
Current path: /api/v1/users
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."subdomain" = $1 LIMIT $2[0m  [["subdomain", "company1"], ["LIMIT", 1]]
  â†³ app/middleware/tenant_switcher.rb:29:in `switch_schema'
Switched to schema: company1
Processing by Api::V1::UsersController#index as */*
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  â†³ app/controllers/api/v1/users_controller.rb:8:in `index'
Completed 200 OK in 3ms (Views: 1.8ms | ActiveRecord: 0.5ms | Allocations: 922)


Started GET "/api/v1/users" for ::1 at 2026-02-20 19:17:45 +0530
Header received: company2
Current path: /api/v1/users
  [1m[36mCompany Load (0.4ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."subdomain" = $1 LIMIT $2[0m  [["subdomain", "company2"], ["LIMIT", 1]]
  â†³ app/middleware/tenant_switcher.rb:29:in `switch_schema'
Switched to schema: company2
Processing by Api::V1::UsersController#index as */*
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  â†³ app/controllers/api/v1/users_controller.rb:8:in `index'
Completed 200 OK in 3ms (Views: 1.5ms | ActiveRecord: 1.4ms | Allocations: 821)


Started GET "/api/v1/users" for ::1 at 2026-02-20 19:17:52 +0530
Header received: company1
Current path: /api/v1/users
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."subdomain" = $1 LIMIT $2[0m  [["subdomain", "company1"], ["LIMIT", 1]]
  â†³ app/middleware/tenant_switcher.rb:29:in `switch_schema'
Switched to schema: company1
Processing by Api::V1::UsersController#index as */*
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  â†³ app/controllers/api/v1/users_controller.rb:8:in `index'
Completed 200 OK in 2ms (Views: 1.6ms | ActiveRecord: 0.4ms | Allocations: 922)


Started GET "/api/v1/users" for ::1 at 2026-02-20 19:18:00 +0530
Header received: volopay
Current path: /api/v1/users
  [1m[36mCompany Load (0.3ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."subdomain" = $1 LIMIT $2[0m  [["subdomain", "volopay"], ["LIMIT", 1]]
  â†³ app/middleware/tenant_switcher.rb:29:in `switch_schema'
Switched to schema: volopay
Processing by Api::V1::UsersController#index as */*
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  â†³ app/controllers/api/v1/users_controller.rb:8:in `index'
Completed 200 OK in 1ms (Views: 0.8ms | ActiveRecord: 0.2ms | Allocations: 822)


[ActionDispatch::HostAuthorization::DefaultResponseApp] Blocked hosts: lvh.me:3000
Started GET "/api/v1/companies" for ::1 at 2026-02-20 23:15:51 +0530
  [1m[36mActiveRecord::SchemaMigration Pluck (3.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Header received: volopay
Current path: /api/v1/companies
  [1m[36mCompany Load (0.9ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."subdomain" = $1 LIMIT $2[0m  [["subdomain", "volopay"], ["LIMIT", 1]]
  â†³ app/middleware/tenant_switcher.rb:29:in `switch_schema'
Switched to schema: volopay
Processing by Api::V1::CompaniesController#index as */*
  [1m[36mCompany Load (5.8ms)[0m  [1m[34mSELECT "companies".* FROM "companies"[0m
  â†³ app/controllers/api/v1/companies_controller.rb:5:in `index'
Completed 200 OK in 8ms (Views: 1.9ms | ActiveRecord: 5.8ms | Allocations: 975)


Started GET "/api/v1/companies" for ::1 at 2026-02-20 23:15:58 +0530
Header received: 
Current path: /api/v1/companies
Processing by Api::V1::CompaniesController#index as */*
  [1m[36mCompany Load (0.4ms)[0m  [1m[34mSELECT "companies".* FROM "companies"[0m
  â†³ app/controllers/api/v1/companies_controller.rb:5:in `index'
Completed 200 OK in 5ms (Views: 4.1ms | ActiveRecord: 0.4ms | Allocations: 1239)


Started DELETE "/api/v1/companies" for ::1 at 2026-02-20 23:16:16 +0530
Header received: 
Current path: /api/v1/companies
  
ActionController::RoutingError (No route matches [DELETE] "/api/v1/companies"):
  
Started DELETE "/api/v1/companies/1" for ::1 at 2026-02-20 23:16:30 +0530
Header received: 
Current path: /api/v1/companies/1
Processing by Api::V1::CompaniesController#destroy as */*
  Parameters: {"id"=>"1"}
  [1m[36mCompany Load (0.3ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/companies_controller.rb:33:in `destroy'
Completed 404 Not Found in 2ms (Views: 0.1ms | ActiveRecord: 0.3ms | Allocations: 787)


Started DELETE "/api/v1/companies/2" for ::1 at 2026-02-20 23:16:36 +0530
Header received: 
Current path: /api/v1/companies/2
Processing by Api::V1::CompaniesController#destroy as */*
  Parameters: {"id"=>"2"}
  [1m[36mCompany Load (0.3ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/companies_controller.rb:33:in `destroy'
Completed 404 Not Found in 2ms (Views: 0.2ms | ActiveRecord: 0.3ms | Allocations: 593)


Started DELETE "/api/v1/companies/3" for ::1 at 2026-02-20 23:16:40 +0530
Header received: 
Current path: /api/v1/companies/3
Processing by Api::V1::CompaniesController#destroy as */*
  Parameters: {"id"=>"3"}
  [1m[36mCompany Load (0.3ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/companies_controller.rb:33:in `destroy'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api/v1/companies_controller.rb:34:in `destroy'
  [1m[36mCompany Destroy (0.3ms)[0m  [1m[31mDELETE FROM "companies" WHERE "companies"."id" = $1[0m  [["id", 3]]
  â†³ app/controllers/api/v1/companies_controller.rb:34:in `destroy'
  [1m[36mTRANSACTION (1.8ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api/v1/companies_controller.rb:34:in `destroy'
Completed 200 OK in 7ms (Views: 0.3ms | ActiveRecord: 2.5ms | Allocations: 2303)


Started DELETE "/api/v1/companies/4" for ::1 at 2026-02-20 23:16:45 +0530
Header received: 
Current path: /api/v1/companies/4
Processing by Api::V1::CompaniesController#destroy as */*
  Parameters: {"id"=>"4"}
  [1m[36mCompany Load (0.4ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/companies_controller.rb:33:in `destroy'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api/v1/companies_controller.rb:34:in `destroy'
  [1m[36mCompany Destroy (0.5ms)[0m  [1m[31mDELETE FROM "companies" WHERE "companies"."id" = $1[0m  [["id", 4]]
  â†³ app/controllers/api/v1/companies_controller.rb:34:in `destroy'
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api/v1/companies_controller.rb:34:in `destroy'
Completed 200 OK in 6ms (Views: 0.2ms | ActiveRecord: 1.8ms | Allocations: 2103)


Started DELETE "/api/v1/companies/5" for ::1 at 2026-02-20 23:16:49 +0530
Header received: 
Current path: /api/v1/companies/5
Processing by Api::V1::CompaniesController#destroy as */*
  Parameters: {"id"=>"5"}
  [1m[36mCompany Load (0.3ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/companies_controller.rb:33:in `destroy'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api/v1/companies_controller.rb:34:in `destroy'
  [1m[36mCompany Destroy (0.3ms)[0m  [1m[31mDELETE FROM "companies" WHERE "companies"."id" = $1[0m  [["id", 5]]
  â†³ app/controllers/api/v1/companies_controller.rb:34:in `destroy'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api/v1/companies_controller.rb:34:in `destroy'
Completed 200 OK in 5ms (Views: 0.2ms | ActiveRecord: 1.3ms | Allocations: 2108)


Started DELETE "/api/v1/companies/6" for ::1 at 2026-02-20 23:16:52 +0530
Header received: 
Current path: /api/v1/companies/6
Processing by Api::V1::CompaniesController#destroy as */*
  Parameters: {"id"=>"6"}
  [1m[36mCompany Load (0.4ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/companies_controller.rb:33:in `destroy'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api/v1/companies_controller.rb:34:in `destroy'
  [1m[36mCompany Destroy (0.3ms)[0m  [1m[31mDELETE FROM "companies" WHERE "companies"."id" = $1[0m  [["id", 6]]
  â†³ app/controllers/api/v1/companies_controller.rb:34:in `destroy'
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api/v1/companies_controller.rb:34:in `destroy'
Completed 200 OK in 5ms (Views: 0.1ms | ActiveRecord: 1.5ms | Allocations: 2102)


Started DELETE "/api/v1/companies/7" for ::1 at 2026-02-20 23:16:55 +0530
Header received: 
Current path: /api/v1/companies/7
Processing by Api::V1::CompaniesController#destroy as */*
  Parameters: {"id"=>"7"}
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/companies_controller.rb:33:in `destroy'
Completed 404 Not Found in 1ms (Views: 0.1ms | ActiveRecord: 0.2ms | Allocations: 583)


Started GET "/api/v1/companies" for ::1 at 2026-02-20 23:17:00 +0530
Header received: 
Current path: /api/v1/companies
Processing by Api::V1::CompaniesController#index as */*
  [1m[36mCompany Load (0.3ms)[0m  [1m[34mSELECT "companies".* FROM "companies"[0m
  â†³ app/controllers/api/v1/companies_controller.rb:5:in `index'
Completed 200 OK in 1ms (Views: 0.4ms | ActiveRecord: 0.3ms | Allocations: 711)


Started GET "/api/v1/companies" for ::1 at 2026-02-20 23:17:06 +0530
Header received: volopay
Current path: /api/v1/companies
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."subdomain" = $1 LIMIT $2[0m  [["subdomain", "volopay"], ["LIMIT", 1]]
  â†³ app/middleware/tenant_switcher.rb:29:in `switch_schema'
  
ActiveRecord::RecordNotFound (Company not found):
  
app/middleware/tenant_switcher.rb:30:in `switch_schema'
app/middleware/tenant_switcher.rb:14:in `call'
  [1m[36mCompany Load (2.3ms)[0m  [1m[34mSELECT "companies".* FROM "companies"[0m
  [1m[35m (4.6ms)[0m  [1m[34mSELECT schema_name FROM information_schema.schemata[0m
  [1m[35m (4.2ms)[0m  [1m[35mdrop schema volopay FROM information_schema.schemata[0m
  [1m[35m (71.3ms)[0m  [1m[35mDROP SCHEMA company1 CASCADE[0m
  [1m[35m (39.2ms)[0m  [1m[35mDROP SCHEMA company2 CASCADE[0m
  [1m[35m (38.4ms)[0m  [1m[35mDROP SCHEMA volopay CASCADE[0m
  [1m[35m (2.1ms)[0m  [1m[34mSELECT schema_name FROM information_schema.schemata[0m
Started POST "/api/v1/companies" for ::1 at 2026-02-20 23:24:50 +0530
Header received: 
Current path: /api/v1/companies
Processing by Api::V1::CompaniesController#create as */*
  Parameters: {"company"=>{"name"=>"Company One", "subdomain"=>"company1"}}
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api/v1/companies_controller.rb:18:in `block in create'
  [1m[36mCompany Exists? (1.5ms)[0m  [1m[34mSELECT 1 AS one FROM "companies" WHERE "companies"."subdomain" = $1 LIMIT $2[0m  [["subdomain", "company1"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/companies_controller.rb:18:in `block in create'
  [1m[36mCompany Create (0.5ms)[0m  [1m[32mINSERT INTO "companies" ("name", "subdomain", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Company One"], ["subdomain", "company1"], ["created_at", "2026-02-20 17:54:50.493675"], ["updated_at", "2026-02-20 17:54:50.493675"]]
  â†³ app/controllers/api/v1/companies_controller.rb:18:in `block in create'
  [1m[35m (1.7ms)[0m  [1m[35mCREATE SCHEMA "company1"[0m
  â†³ app/services/company_provisioning_service.rb:5:in `call'
  [1m[35mSQL (0.6ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  â†³ app/services/company_provisioning_service.rb:9:in `load'
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "accounts" CASCADE[0m
  â†³ app/services/company_provisioning_service.rb:9:in `load'
  [1m[35m (41.2ms)[0m  [1m[35mCREATE TABLE "accounts" ("id" bigserial primary key, "name" character varying, "balance" decimal, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  â†³ app/services/company_provisioning_service.rb:9:in `load'
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "approvals" CASCADE[0m
  â†³ app/services/company_provisioning_service.rb:9:in `load'
  [1m[35m (2.2ms)[0m  [1m[35mCREATE TABLE "approvals" ("id" bigserial primary key, "expense_id" bigint NOT NULL, "approver_id" bigint, "status" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  â†³ app/services/company_provisioning_service.rb:9:in `load'
  [1m[35m (2.2ms)[0m  [1m[35mCREATE INDEX "index_approvals_on_expense_id" ON "approvals" ("expense_id")[0m
  â†³ app/services/company_provisioning_service.rb:9:in `load'
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "categories" CASCADE[0m
  â†³ app/services/company_provisioning_service.rb:9:in `load'
  [1m[35m (4.0ms)[0m  [1m[35mCREATE TABLE "categories" ("id" bigserial primary key, "name" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  â†³ app/services/company_provisioning_service.rb:9:in `load'
  [1m[35m (0.8ms)[0m  [1m[35mDROP TABLE IF EXISTS "companies" CASCADE[0m
  â†³ app/services/company_provisioning_service.rb:9:in `load'
  [1m[35m (1.5ms)[0m  [1m[35mCREATE TABLE "companies" ("id" bigserial primary key, "name" character varying, "subdomain" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  â†³ app/services/company_provisioning_service.rb:9:in `load'
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "expenses" CASCADE[0m
  â†³ app/services/company_provisioning_service.rb:9:in `load'
  [1m[35m (1.4ms)[0m  [1m[35mCREATE TABLE "expenses" ("id" bigserial primary key, "amount" decimal, "description" text, "status" character varying, "user_id" bigint NOT NULL, "category_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  â†³ app/services/company_provisioning_service.rb:9:in `load'
  [1m[35m (0.8ms)[0m  [1m[35mCREATE INDEX "index_expenses_on_category_id" ON "expenses" ("category_id")[0m
  â†³ app/services/company_provisioning_service.rb:9:in `load'
  [1m[35m (1.0ms)[0m  [1m[35mCREATE INDEX "index_expenses_on_user_id" ON "expenses" ("user_id")[0m
  â†³ app/services/company_provisioning_service.rb:9:in `load'
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE IF EXISTS "tenants" CASCADE[0m
  â†³ app/services/company_provisioning_service.rb:9:in `load'
  [1m[35m (1.7ms)[0m  [1m[35mCREATE TABLE "tenants" ("id" bigserial primary key, "name" character varying, "subdomain" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  â†³ app/services/company_provisioning_service.rb:9:in `load'
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE IF EXISTS "transactions" CASCADE[0m
  â†³ app/services/company_provisioning_service.rb:9:in `load'
  [1m[35m (4.5ms)[0m  [1m[35mCREATE TABLE "transactions" ("id" bigserial primary key, "amount" decimal, "transaction_type" character varying, "account_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  â†³ app/services/company_provisioning_service.rb:9:in `load'
  [1m[35m (0.6ms)[0m  [1m[35mCREATE INDEX "index_transactions_on_account_id" ON "transactions" ("account_id")[0m
  â†³ app/services/company_provisioning_service.rb:9:in `load'
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "users" CASCADE[0m
  â†³ app/services/company_provisioning_service.rb:9:in `load'
  [1m[35m (3.2ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "name" character varying, "email" character varying, "role" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  â†³ app/services/company_provisioning_service.rb:9:in `load'
  [1m[35m (2.3ms)[0m  [1m[35mALTER TABLE "approvals" ADD CONSTRAINT "fk_rails_a8b2d49d72"
FOREIGN KEY ("expense_id")
  REFERENCES "expenses" ("id")
[0m
  â†³ app/services/company_provisioning_service.rb:9:in `load'
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "expenses" ADD CONSTRAINT "fk_rails_06966d0da0"
FOREIGN KEY ("category_id")
  REFERENCES "categories" ("id")
[0m
  â†³ app/services/company_provisioning_service.rb:9:in `load'
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "expenses" ADD CONSTRAINT "fk_rails_c3ee69df61"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  â†³ app/services/company_provisioning_service.rb:9:in `load'
  [1m[35m (1.1ms)[0m  [1m[35mALTER TABLE "transactions" ADD CONSTRAINT "fk_rails_01f020e267"
FOREIGN KEY ("account_id")
  REFERENCES "accounts" ("id")
[0m
  â†³ app/services/company_provisioning_service.rb:9:in `load'
  [1m[35m (1.3ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  â†³ app/services/company_provisioning_service.rb:9:in `load'
  [1m[36mActiveRecord::SchemaMigration Pluck (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ app/services/company_provisioning_service.rb:9:in `load'
  [1m[35m (0.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20260219090403)[0m
  â†³ app/services/company_provisioning_service.rb:9:in `load'
  [1m[35m (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20260219080021),
(20260219080617),
(20260219090116),
(20260219090209),
(20260219090304),
(20260219090321),
(20260219090333);

[0m
  â†³ app/services/company_provisioning_service.rb:9:in `load'
  [1m[35m (1.6ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  â†³ app/services/company_provisioning_service.rb:9:in `load'
  [1m[36mActiveRecord::InternalMetadata Load (0.8ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  â†³ app/services/company_provisioning_service.rb:9:in `load'
  [1m[36mActiveRecord::InternalMetadata Create (0.8ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2026-02-20 17:54:50.651157"], ["updated_at", "2026-02-20 17:54:50.651157"]]
  â†³ app/services/company_provisioning_service.rb:9:in `load'
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api/v1/companies_controller.rb:17:in `create'
Completed 201 Created in 168ms (Views: 0.3ms | ActiveRecord: 100.2ms | Allocations: 26419)


Started POST "/api/v1/companies" for ::1 at 2026-02-20 23:25:11 +0530
Header received: 
Current path: /api/v1/companies
Processing by Api::V1::CompaniesController#create as */*
  Parameters: {"company"=>{"name"=>"Company Two", "subdomain"=>"company2"}}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api/v1/companies_controller.rb:18:in `block in create'
  [1m[36mCompany Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "companies" WHERE "companies"."subdomain" = $1 LIMIT $2[0m  [["subdomain", "company2"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/companies_controller.rb:18:in `block in create'
  [1m[36mCompany Create (0.3ms)[0m  [1m[32mINSERT INTO "companies" ("name", "subdomain", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Company Two"], ["subdomain", "company2"], ["created_at", "2026-02-20 17:55:11.083249"], ["updated_at", "2026-02-20 17:55:11.083249"]]
  â†³ app/controllers/api/v1/companies_controller.rb:18:in `block in create'
  [1m[35m (0.3ms)[0m  [1m[35mCREATE SCHEMA "company2"[0m
  â†³ app/services/company_provisioning_service.rb:5:in `call'
  [1m[35mSQL (0.2ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  â†³ app/services/company_provisioning_service.rb:9:in `load'
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "accounts" CASCADE[0m
  â†³ app/services/company_provisioning_service.rb:9:in `load'
  [1m[35m (6.1ms)[0m  [1m[35mCREATE TABLE "accounts" ("id" bigserial primary key, "name" character varying, "balance" decimal, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  â†³ app/services/company_provisioning_service.rb:9:in `load'
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "approvals" CASCADE[0m
  â†³ app/services/company_provisioning_service.rb:9:in `load'
  [1m[35m (8.6ms)[0m  [1m[35mCREATE TABLE "approvals" ("id" bigserial primary key, "expense_id" bigint NOT NULL, "approver_id" bigint, "status" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  â†³ app/services/company_provisioning_service.rb:9:in `load'
  [1m[35m (1.1ms)[0m  [1m[35mCREATE INDEX "index_approvals_on_expense_id" ON "approvals" ("expense_id")[0m
  â†³ app/services/company_provisioning_service.rb:9:in `load'
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "categories" CASCADE[0m
  â†³ app/services/company_provisioning_service.rb:9:in `load'
  [1m[35m (3.2ms)[0m  [1m[35mCREATE TABLE "categories" ("id" bigserial primary key, "name" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  â†³ app/services/company_provisioning_service.rb:9:in `load'
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "companies" CASCADE[0m
  â†³ app/services/company_provisioning_service.rb:9:in `load'
  [1m[35m (8.9ms)[0m  [1m[35mCREATE TABLE "companies" ("id" bigserial primary key, "name" character varying, "subdomain" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  â†³ app/services/company_provisioning_service.rb:9:in `load'
  [1m[35m (1.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "expenses" CASCADE[0m
  â†³ app/services/company_provisioning_service.rb:9:in `load'
  [1m[35m (4.5ms)[0m  [1m[35mCREATE TABLE "expenses" ("id" bigserial primary key, "amount" decimal, "description" text, "status" character varying, "user_id" bigint NOT NULL, "category_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  â†³ app/services/company_provisioning_service.rb:9:in `load'
  [1m[35m (0.8ms)[0m  [1m[35mCREATE INDEX "index_expenses_on_category_id" ON "expenses" ("category_id")[0m
  â†³ app/services/company_provisioning_service.rb:9:in `load'
  [1m[35m (0.5ms)[0m  [1m[35mCREATE INDEX "index_expenses_on_user_id" ON "expenses" ("user_id")[0m
  â†³ app/services/company_provisioning_service.rb:9:in `load'
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "tenants" CASCADE[0m
  â†³ app/services/company_provisioning_service.rb:9:in `load'
  [1m[35m (2.6ms)[0m  [1m[35mCREATE TABLE "tenants" ("id" bigserial primary key, "name" character varying, "subdomain" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  â†³ app/services/company_provisioning_service.rb:9:in `load'
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "transactions" CASCADE[0m
  â†³ app/services/company_provisioning_service.rb:9:in `load'
  [1m[35m (15.6ms)[0m  [1m[35mCREATE TABLE "transactions" ("id" bigserial primary key, "amount" decimal, "transaction_type" character varying, "account_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  â†³ app/services/company_provisioning_service.rb:9:in `load'
  [1m[35m (0.8ms)[0m  [1m[35mCREATE INDEX "index_transactions_on_account_id" ON "transactions" ("account_id")[0m
  â†³ app/services/company_provisioning_service.rb:9:in `load'
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "users" CASCADE[0m
  â†³ app/services/company_provisioning_service.rb:9:in `load'
  [1m[35m (1.9ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "name" character varying, "email" character varying, "role" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  â†³ app/services/company_provisioning_service.rb:9:in `load'
  [1m[35m (1.6ms)[0m  [1m[35mALTER TABLE "approvals" ADD CONSTRAINT "fk_rails_a8b2d49d72"
FOREIGN KEY ("expense_id")
  REFERENCES "expenses" ("id")
[0m
  â†³ app/services/company_provisioning_service.rb:9:in `load'
  [1m[35m (1.1ms)[0m  [1m[35mALTER TABLE "expenses" ADD CONSTRAINT "fk_rails_06966d0da0"
FOREIGN KEY ("category_id")
  REFERENCES "categories" ("id")
[0m
  â†³ app/services/company_provisioning_service.rb:9:in `load'
  [1m[35m (2.8ms)[0m  [1m[35mALTER TABLE "expenses" ADD CONSTRAINT "fk_rails_c3ee69df61"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  â†³ app/services/company_provisioning_service.rb:9:in `load'
  [1m[35m (0.9ms)[0m  [1m[35mALTER TABLE "transactions" ADD CONSTRAINT "fk_rails_01f020e267"
FOREIGN KEY ("account_id")
  REFERENCES "accounts" ("id")
[0m
  â†³ app/services/company_provisioning_service.rb:9:in `load'
  [1m[35m (7.6ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  â†³ app/services/company_provisioning_service.rb:9:in `load'
  [1m[36mActiveRecord::SchemaMigration Pluck (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ app/services/company_provisioning_service.rb:9:in `load'
  [1m[35m (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20260219090403)[0m
  â†³ app/services/company_provisioning_service.rb:9:in `load'
  [1m[35m (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20260219080021),
(20260219080617),
(20260219090116),
(20260219090209),
(20260219090304),
(20260219090321),
(20260219090333);

[0m
  â†³ app/services/company_provisioning_service.rb:9:in `load'
  [1m[35m (1.6ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  â†³ app/services/company_provisioning_service.rb:9:in `load'
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  â†³ app/services/company_provisioning_service.rb:9:in `load'
  [1m[36mActiveRecord::InternalMetadata Create (0.5ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2026-02-20 17:55:11.183393"], ["updated_at", "2026-02-20 17:55:11.183393"]]
  â†³ app/services/company_provisioning_service.rb:9:in `load'
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api/v1/companies_controller.rb:17:in `create'
Completed 201 Created in 105ms (Views: 0.2ms | ActiveRecord: 80.3ms | Allocations: 20873)


  [1m[36mCompany Load (2.6ms)[0m  [1m[34mSELECT "companies".* FROM "companies"[0m
  [1m[35m (4.1ms)[0m  [1m[34mSELECT schema_name FROM information_schema.schemata[0m
Started GET "/api/v1/users" for ::1 at 2026-02-20 23:26:32 +0530
Header received: 
Current path: /api/v1/users
Processing by Api::V1::UsersController#index as */*
  [1m[36mUser Load (2.3ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  â†³ app/controllers/api/v1/users_controller.rb:8:in `index'
Completed 200 OK in 21ms (Views: 5.7ms | ActiveRecord: 12.9ms | Allocations: 5263)


Started DELETE "/api/v1/users/1" for ::1 at 2026-02-20 23:26:45 +0530
Header received: 
Current path: /api/v1/users/1
Processing by Api::V1::UsersController#destroy as */*
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/users_controller.rb:44:in `set_user'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api/v1/users_controller.rb:37:in `destroy'
  [1m[36mUser Destroy (3.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 1]]
  â†³ app/controllers/api/v1/users_controller.rb:37:in `destroy'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api/v1/users_controller.rb:37:in `destroy'
Completed 200 OK in 9ms (Views: 0.2ms | ActiveRecord: 4.0ms | Allocations: 2305)


Started POST "/api/v1/users" for ::1 at 2026-02-20 23:28:21 +0530
Header received: company1
Current path: /api/v1/users
  [1m[36mCompany Load (0.3ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."subdomain" = $1 LIMIT $2[0m  [["subdomain", "company1"], ["LIMIT", 1]]
  â†³ app/middleware/tenant_switcher.rb:29:in `switch_schema'
Switched to schema: company1
Processing by Api::V1::UsersController#create as */*
  Parameters: {"user"=>{"name"=>"Srinivas", "email"=>"sri@abc.com", "role"=>"admin"}}
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api/v1/users_controller.rb:19:in `create'
  [1m[36mUser Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "sri@abc.com"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/users_controller.rb:19:in `create'
  [1m[36mUser Create (1.9ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Srinivas"], ["email", "sri@abc.com"], ["role", "admin"], ["created_at", "2026-02-20 17:58:21.531294"], ["updated_at", "2026-02-20 17:58:21.531294"]]
  â†³ app/controllers/api/v1/users_controller.rb:19:in `create'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api/v1/users_controller.rb:19:in `create'
Completed 201 Created in 10ms (Views: 0.3ms | ActiveRecord: 3.6ms | Allocations: 3284)


Started POST "/api/v1/users" for ::1 at 2026-02-20 23:28:46 +0530
Header received: company1
Current path: /api/v1/users
  [1m[36mCompany Load (0.3ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."subdomain" = $1 LIMIT $2[0m  [["subdomain", "company1"], ["LIMIT", 1]]
  â†³ app/middleware/tenant_switcher.rb:29:in `switch_schema'
Switched to schema: company1
Processing by Api::V1::UsersController#create as */*
  Parameters: {"user"=>{"name"=>"Nikhil", "email"=>"nick@abc.com", "role"=>"user"}}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api/v1/users_controller.rb:19:in `create'
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "nick@abc.com"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/users_controller.rb:19:in `create'
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Nikhil"], ["email", "nick@abc.com"], ["role", "user"], ["created_at", "2026-02-20 17:58:46.393124"], ["updated_at", "2026-02-20 17:58:46.393124"]]
  â†³ app/controllers/api/v1/users_controller.rb:19:in `create'
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api/v1/users_controller.rb:19:in `create'
Completed 201 Created in 4ms (Views: 0.3ms | ActiveRecord: 1.5ms | Allocations: 2960)


Started POST "/api/v1/users" for ::1 at 2026-02-20 23:29:18 +0530
Header received: company2
Current path: /api/v1/users
  [1m[36mCompany Load (0.3ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."subdomain" = $1 LIMIT $2[0m  [["subdomain", "company2"], ["LIMIT", 1]]
  â†³ app/middleware/tenant_switcher.rb:29:in `switch_schema'
Switched to schema: company2
Processing by Api::V1::UsersController#create as */*
  Parameters: {"user"=>{"name"=>"Anushree", "email"=>"anu@abc.com", "role"=>"admin"}}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api/v1/users_controller.rb:19:in `create'
  [1m[36mUser Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "anu@abc.com"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/users_controller.rb:19:in `create'
  [1m[36mUser Create (1.0ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Anushree"], ["email", "anu@abc.com"], ["role", "admin"], ["created_at", "2026-02-20 17:59:18.253966"], ["updated_at", "2026-02-20 17:59:18.253966"]]
  â†³ app/controllers/api/v1/users_controller.rb:19:in `create'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api/v1/users_controller.rb:19:in `create'
Completed 201 Created in 5ms (Views: 0.3ms | ActiveRecord: 2.1ms | Allocations: 2957)


Started POST "/api/v1/users" for ::1 at 2026-02-20 23:29:40 +0530
Header received: company2
Current path: /api/v1/users
  [1m[36mCompany Load (0.3ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."subdomain" = $1 LIMIT $2[0m  [["subdomain", "company2"], ["LIMIT", 1]]
  â†³ app/middleware/tenant_switcher.rb:29:in `switch_schema'
Switched to schema: company2
Processing by Api::V1::UsersController#create as */*
  Parameters: {"user"=>{"name"=>"Deepshika", "email"=>"deep@abc.com", "role"=>"user"}}
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api/v1/users_controller.rb:19:in `create'
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "deep@abc.com"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/users_controller.rb:19:in `create'
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Deepshika"], ["email", "deep@abc.com"], ["role", "user"], ["created_at", "2026-02-20 17:59:40.272150"], ["updated_at", "2026-02-20 17:59:40.272150"]]
  â†³ app/controllers/api/v1/users_controller.rb:19:in `create'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api/v1/users_controller.rb:19:in `create'
Completed 201 Created in 4ms (Views: 0.1ms | ActiveRecord: 1.4ms | Allocations: 2956)


Started GET "/api/v1/users" for ::1 at 2026-02-20 23:30:01 +0530
Header received: company2
Current path: /api/v1/users
  [1m[36mCompany Load (0.3ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."subdomain" = $1 LIMIT $2[0m  [["subdomain", "company2"], ["LIMIT", 1]]
  â†³ app/middleware/tenant_switcher.rb:29:in `switch_schema'
Switched to schema: company2
Processing by Api::V1::UsersController#index as */*
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  â†³ app/controllers/api/v1/users_controller.rb:8:in `index'
Completed 200 OK in 2ms (Views: 1.5ms | ActiveRecord: 0.3ms | Allocations: 921)


Started GET "/api/v1/users" for ::1 at 2026-02-20 23:30:21 +0530
Header received: company1
Current path: /api/v1/users
  [1m[36mCompany Load (0.4ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."subdomain" = $1 LIMIT $2[0m  [["subdomain", "company1"], ["LIMIT", 1]]
  â†³ app/middleware/tenant_switcher.rb:29:in `switch_schema'
Switched to schema: company1
Processing by Api::V1::UsersController#index as */*
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  â†³ app/controllers/api/v1/users_controller.rb:8:in `index'
Completed 200 OK in 1ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 921)


Started GET "/api/v1/users" for ::1 at 2026-02-20 23:30:42 +0530
Header received: company2
Current path: /api/v1/users
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."subdomain" = $1 LIMIT $2[0m  [["subdomain", "company2"], ["LIMIT", 1]]
  â†³ app/middleware/tenant_switcher.rb:29:in `switch_schema'
Switched to schema: company2
Processing by Api::V1::UsersController#index as */*
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  â†³ app/controllers/api/v1/users_controller.rb:8:in `index'
Completed 200 OK in 4ms (Views: 3.5ms | ActiveRecord: 0.3ms | Allocations: 922)


Started GET "/api/v1/users" for ::1 at 2026-02-20 23:31:28 +0530
Header received: company3
Current path: /api/v1/users
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."subdomain" = $1 LIMIT $2[0m  [["subdomain", "company3"], ["LIMIT", 1]]
  â†³ app/middleware/tenant_switcher.rb:29:in `switch_schema'
  
ActiveRecord::RecordNotFound (Company not found):
  
app/middleware/tenant_switcher.rb:30:in `switch_schema'
app/middleware/tenant_switcher.rb:14:in `call'
Started GET "/api/v1/users" for ::1 at 2026-02-20 23:31:46 +0530
Header received: 
Current path: /api/v1/users
Processing by Api::V1::UsersController#index as */*
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  â†³ app/controllers/api/v1/users_controller.rb:8:in `index'
Completed 200 OK in 2ms (Views: 1.5ms | ActiveRecord: 0.3ms | Allocations: 712)


Started GET "/api/v1/users" for ::1 at 2026-02-20 23:36:34 +0530
Header received: company1
Current path: /api/v1/users
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."subdomain" = $1 LIMIT $2[0m  [["subdomain", "company1"], ["LIMIT", 1]]
  â†³ app/middleware/tenant_switcher.rb:29:in `switch_schema'
Switched to schema: company1
Processing by Api::V1::UsersController#index as */*
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  â†³ app/controllers/api/v1/users_controller.rb:8:in `index'
Completed 200 OK in 1ms (Views: 0.7ms | ActiveRecord: 0.2ms | Allocations: 920)


Started GET "/api/v1/users" for ::1 at 2026-02-20 23:36:41 +0530
Header received: company2
Current path: /api/v1/users
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."subdomain" = $1 LIMIT $2[0m  [["subdomain", "company2"], ["LIMIT", 1]]
  â†³ app/middleware/tenant_switcher.rb:29:in `switch_schema'
Switched to schema: company2
Processing by Api::V1::UsersController#index as */*
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  â†³ app/controllers/api/v1/users_controller.rb:8:in `index'
Completed 200 OK in 1ms (Views: 0.8ms | ActiveRecord: 0.3ms | Allocations: 920)


Started GET "/api/v1/users" for ::1 at 2026-02-20 23:37:10 +0530
Header received: 
Current path: /api/v1/users
Processing by Api::V1::UsersController#index as */*
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  â†³ app/controllers/api/v1/users_controller.rb:8:in `index'
Completed 200 OK in 2ms (Views: 1.2ms | ActiveRecord: 0.4ms | Allocations: 712)


  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_try_advisory_lock(7684012389382155225)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (1.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to AddDeviseToUsers (20260220214222)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "users" ADD "email" character varying DEFAULT '' NOT NULL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_advisory_unlock(7684012389382155225)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (1.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(7684012389382155225)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateTransactions (20260219090403)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.9ms)[0m  [1m[35mDROP TABLE "transactions"[0m
  [1m[36mActiveRecord::SchemaMigration Delete All (6.0ms)[0m  [1m[31mDELETE FROM "schema_migrations" WHERE "schema_migrations"."version" = $1[0m  [["version", "20260219090403"]]
  [1m[36mTRANSACTION (7.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(7684012389382155225)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (1.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(7684012389382155225)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateTransactions (20260219090403)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (10.5ms)[0m  [1m[35mCREATE TABLE "transactions" ("id" bigserial primary key, "amount" decimal, "transaction_type" character varying, "account_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_01f020e267"
FOREIGN KEY ("account_id")
  REFERENCES "accounts" ("id")
)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE INDEX "index_transactions_on_account_id" ON "transactions" ("account_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20260219090403"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddDeviseToUsers (20260220214915)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "users" ADD "email" character varying DEFAULT '' NOT NULL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_advisory_unlock(7684012389382155225)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(7684012389382155225)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (1.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to AddDeviseFieldsToUsers (20260220215059)
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.4ms)[0m  [1m[35mALTER TABLE "users" ADD "encrypted_password" character varying DEFAULT '' NOT NULL[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" ADD "reset_password_token" character varying[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" ADD "reset_password_sent_at" timestamp(6)[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" ADD "remember_created_at" timestamp(6)[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "users" ADD "jti" character varying NOT NULL[0m
  [1m[35m (2.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_reset_password_token" ON "users" ("reset_password_token")[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_jti" ON "users" ("jti")[0m
  [1m[36mActiveRecord::SchemaMigration Create (1.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20260220215059"]]
  [1m[36mTRANSACTION (2.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.9ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(7684012389382155225)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (1.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Started POST "/api/v1/register" for ::1 at 2026-02-21 03:42:49 +0530
  [1m[36mActiveRecord::SchemaMigration Pluck (1.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Header received: 
Current path: /api/v1/register
  
ActionController::RoutingError (No route matches [POST] "/api/v1/register"):
  
Started POST "/api/v1/register" for ::1 at 2026-02-21 03:45:51 +0530
  [1m[36mActiveRecord::SchemaMigration Pluck (3.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Header received: 
Current path: /api/v1/register
Processing by Api::V1::RegistrationsController#create as */*
  Parameters: {"user"=>{"email"=>"srinivas@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "role"=>"admin"}, "registration"=>{"user"=>{"email"=>"srinivas@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "role"=>"admin"}}}
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/middleware/tenant_switcher.rb:19:in `call'
  [1m[36mUser Exists? (1.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/middleware/tenant_switcher.rb:19:in `call'
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/middleware/tenant_switcher.rb:19:in `call'
Completed 422 Unprocessable Entity in 32ms (Views: 0.1ms | ActiveRecord: 12.5ms | Allocations: 14666)


Started POST "/api/v1/register" for ::1 at 2026-02-21 03:47:39 +0530
  [1m[36mActiveRecord::SchemaMigration Pluck (1.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Header received: 
Current path: /api/v1/register
Processing by Api::V1::RegistrationsController#create as */*
  Parameters: {"user"=>{"email"=>"srinivas@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "role"=>"admin"}, "registration"=>{"user"=>{"email"=>"srinivas@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "role"=>"admin"}}}
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/middleware/tenant_switcher.rb:19:in `call'
  [1m[36mUser Exists? (1.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/middleware/tenant_switcher.rb:19:in `call'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/middleware/tenant_switcher.rb:19:in `call'
Completed 422 Unprocessable Entity in 24ms (Views: 0.1ms | ActiveRecord: 8.6ms | Allocations: 14370)


Started POST "/api/v1/register" for ::1 at 2026-02-21 03:48:20 +0530
Header received: 
Current path: /api/v1/register
Processing by Api::V1::RegistrationsController#create as */*
  Parameters: {"user"=>{"email"=>"nick@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "role"=>"admin"}, "registration"=>{"user"=>{"email"=>"nick@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "role"=>"admin"}}}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/middleware/tenant_switcher.rb:19:in `call'
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/middleware/tenant_switcher.rb:19:in `call'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/middleware/tenant_switcher.rb:19:in `call'
Completed 422 Unprocessable Entity in 9ms (Views: 0.0ms | ActiveRecord: 0.6ms | Allocations: 2932)


Started POST "/api/v1/register" for ::1 at 2026-02-21 03:48:31 +0530
Header received: 
Current path: /api/v1/register
Processing by Api::V1::RegistrationsController#create as */*
  Parameters: {"user"=>{"email"=>"rock@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "role"=>"admin"}, "registration"=>{"user"=>{"email"=>"rock@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "role"=>"admin"}}}
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/middleware/tenant_switcher.rb:19:in `call'
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/middleware/tenant_switcher.rb:19:in `call'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/middleware/tenant_switcher.rb:19:in `call'
Completed 422 Unprocessable Entity in 3ms (Views: 0.0ms | ActiveRecord: 0.8ms | Allocations: 2925)


Started POST "/api/v1/register" for ::1 at 2026-02-21 03:48:51 +0530
Header received: 
Current path: /api/v1/register
Processing by Api::V1::RegistrationsController#create as */*
  Parameters: {"user"=>{"email"=>"rock@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "role"=>"admin"}, "registration"=>{"user"=>{"email"=>"rock@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "role"=>"admin"}}}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/middleware/tenant_switcher.rb:19:in `call'
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/middleware/tenant_switcher.rb:19:in `call'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/middleware/tenant_switcher.rb:19:in `call'
Completed 422 Unprocessable Entity in 4ms (Views: 0.1ms | ActiveRecord: 0.7ms | Allocations: 2925)


Started POST "/api/v1/register" for ::1 at 2026-02-21 03:49:20 +0530
Header received: company1
Current path: /api/v1/register
  [1m[36mCompany Load (0.8ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."subdomain" = $1 LIMIT $2[0m  [["subdomain", "company1"], ["LIMIT", 1]]
  â†³ app/middleware/tenant_switcher.rb:29:in `switch_schema'
Switched to schema: company1
Processing by Api::V1::RegistrationsController#create as */*
  Parameters: {"user"=>{"email"=>"rock@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "role"=>"admin"}, "registration"=>{"user"=>{"email"=>"rock@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "role"=>"admin"}}}
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
  â†³ app/middleware/tenant_switcher.rb:19:in `call'
  [1m[36mUser Exists? (1.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/middleware/tenant_switcher.rb:19:in `call'
  [1m[36mTRANSACTION (3.4ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/middleware/tenant_switcher.rb:19:in `call'
Completed 422 Unprocessable Entity in 8ms (Views: 0.1ms | ActiveRecord: 5.3ms | Allocations: 2921)


Started POST "/api/v1/register" for ::1 at 2026-02-21 03:49:25 +0530
Header received: company1
Current path: /api/v1/register
  [1m[36mCompany Load (0.3ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."subdomain" = $1 LIMIT $2[0m  [["subdomain", "company1"], ["LIMIT", 1]]
  â†³ app/middleware/tenant_switcher.rb:29:in `switch_schema'
Switched to schema: company1
Processing by Api::V1::RegistrationsController#create as */*
  Parameters: {"user"=>{"email"=>"srinivas@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "role"=>"admin"}, "registration"=>{"user"=>{"email"=>"srinivas@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "role"=>"admin"}}}
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/middleware/tenant_switcher.rb:19:in `call'
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/middleware/tenant_switcher.rb:19:in `call'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/middleware/tenant_switcher.rb:19:in `call'
Completed 422 Unprocessable Entity in 5ms (Views: 0.1ms | ActiveRecord: 0.7ms | Allocations: 2915)


Started POST "/api/v1/register" for ::1 at 2026-02-21 03:49:52 +0530
Header received: company1
Current path: /api/v1/register
  [1m[36mCompany Load (0.3ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."subdomain" = $1 LIMIT $2[0m  [["subdomain", "company1"], ["LIMIT", 1]]
  â†³ app/middleware/tenant_switcher.rb:29:in `switch_schema'
Switched to schema: company1
Processing by Api::V1::RegistrationsController#create as */*
  Parameters: {"user"=>{"email"=>"srinivas@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}, "registration"=>{"user"=>{"email"=>"srinivas@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/middleware/tenant_switcher.rb:19:in `call'
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/middleware/tenant_switcher.rb:19:in `call'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/middleware/tenant_switcher.rb:19:in `call'
Completed 422 Unprocessable Entity in 3ms (Views: 0.1ms | ActiveRecord: 0.6ms | Allocations: 2915)


  [1m[36mCompany Pluck (1.7ms)[0m  [1m[34mSELECT "companies"."subdomain" FROM "companies"[0m
Started POST "/api/v1/register" for ::1 at 2026-02-21 03:53:49 +0530
  [1m[36mActiveRecord::SchemaMigration Pluck (1.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Header received: company1
Current path: /api/v1/register
  [1m[36mCompany Load (1.0ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."subdomain" = $1 LIMIT $2[0m  [["subdomain", "company1"], ["LIMIT", 1]]
  â†³ app/middleware/tenant_switcher.rb:29:in `switch_schema'
Switched to schema: company1
Processing by Api::V1::RegistrationsController#create as */*
  Parameters: {"user"=>{"email"=>"srinivas@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "role"=>"admin"}, "registration"=>{"user"=>{"email"=>"srinivas@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "role"=>"admin"}}}
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/middleware/tenant_switcher.rb:19:in `call'
  [1m[36mUser Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/middleware/tenant_switcher.rb:19:in `call'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/middleware/tenant_switcher.rb:19:in `call'
Completed 422 Unprocessable Entity in 19ms (Views: 0.1ms | ActiveRecord: 5.8ms | Allocations: 10002)


Started POST "/api/v1/register" for ::1 at 2026-02-21 03:53:55 +0530
Header received: 
Current path: /api/v1/register
Processing by Api::V1::RegistrationsController#create as */*
  Parameters: {"user"=>{"email"=>"srinivas@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "role"=>"admin"}, "registration"=>{"user"=>{"email"=>"srinivas@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "role"=>"admin"}}}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/middleware/tenant_switcher.rb:19:in `call'
  [1m[36mUser Exists? (1.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/middleware/tenant_switcher.rb:19:in `call'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/middleware/tenant_switcher.rb:19:in `call'
Completed 422 Unprocessable Entity in 8ms (Views: 0.0ms | ActiveRecord: 1.7ms | Allocations: 2922)


Started POST "/api/v1/register" for ::1 at 2026-02-21 03:53:57 +0530
Header received: 
Current path: /api/v1/register
Processing by Api::V1::RegistrationsController#create as */*
  Parameters: {"user"=>{"email"=>"srinivas@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "role"=>"admin"}, "registration"=>{"user"=>{"email"=>"srinivas@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "role"=>"admin"}}}
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/middleware/tenant_switcher.rb:19:in `call'
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/middleware/tenant_switcher.rb:19:in `call'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/middleware/tenant_switcher.rb:19:in `call'
Completed 422 Unprocessable Entity in 2ms (Views: 0.0ms | ActiveRecord: 0.6ms | Allocations: 2915)


  [1m[35m (47.7ms)[0m  [1m[35mDROP SCHEMA company1 CASCADE[0m
  [1m[35m (57.4ms)[0m  [1m[35mDROP SCHEMA company2 CASCADE[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCompany Exists? (2.2ms)[0m  [1m[34mSELECT 1 AS one FROM "companies" WHERE "companies"."subdomain" = $1 LIMIT $2[0m  [["subdomain", "company1"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (8.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mCompany Load (1.3ms)[0m  [1m[34mSELECT "companies".* FROM "companies"[0m
  [1m[36mCompany Load (0.5ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCompany Destroy (0.4ms)[0m  [1m[31mDELETE FROM "companies" WHERE "companies"."id" = $1[0m  [["id", 7]]
  [1m[36mTRANSACTION (1.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mCompany Load (1.2ms)[0m  [1m[34mSELECT "companies".* FROM "companies"[0m
  [1m[36mCompany Load (1.2ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCompany Destroy (0.8ms)[0m  [1m[31mDELETE FROM "companies" WHERE "companies"."id" = $1[0m  [["id", 8]]
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCompany Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "companies" WHERE "companies"."subdomain" = $1 LIMIT $2[0m  [["subdomain", "company1"], ["LIMIT", 1]]
  [1m[36mCompany Create (0.9ms)[0m  [1m[32mINSERT INTO "companies" ("name", "subdomain", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Company 1"], ["subdomain", "company1"], ["created_at", "2026-02-20 22:29:13.203502"], ["updated_at", "2026-02-20 22:29:13.203502"]]
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCompany Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "companies" WHERE "companies"."subdomain" = $1 LIMIT $2[0m  [["subdomain", "company2"], ["LIMIT", 1]]
  [1m[36mCompany Create (0.4ms)[0m  [1m[32mINSERT INTO "companies" ("name", "subdomain", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Company 2"], ["subdomain", "company2"], ["created_at", "2026-02-20 22:29:28.890111"], ["updated_at", "2026-02-20 22:29:28.890111"]]
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mCompany Load (1.3ms)[0m  [1m[34mSELECT "companies".* FROM "companies"[0m
Started POST "/api/v1/register" for ::1 at 2026-02-21 03:59:56 +0530
  [1m[36mActiveRecord::SchemaMigration Pluck (1.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Header received: 
Current path: /api/v1/register
Processing by Api::V1::RegistrationsController#create as */*
  Parameters: {"user"=>{"email"=>"srinivas@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "role"=>"admin"}, "registration"=>{"user"=>{"email"=>"srinivas@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "role"=>"admin"}}}
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/middleware/tenant_switcher.rb:19:in `call'
  [1m[36mUser Exists? (1.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/middleware/tenant_switcher.rb:19:in `call'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/middleware/tenant_switcher.rb:19:in `call'
Completed 422 Unprocessable Entity in 26ms (Views: 0.1ms | ActiveRecord: 10.7ms | Allocations: 14376)


Started POST "/api/v1/register" for ::1 at 2026-02-21 04:00:01 +0530
Header received: company1
Current path: /api/v1/register
  [1m[36mCompany Load (1.1ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."subdomain" = $1 LIMIT $2[0m  [["subdomain", "company1"], ["LIMIT", 1]]
  â†³ app/middleware/tenant_switcher.rb:29:in `switch_schema'
Switched to schema: company1
Processing by Api::V1::RegistrationsController#create as */*
  Parameters: {"user"=>{"email"=>"srinivas@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "role"=>"admin"}, "registration"=>{"user"=>{"email"=>"srinivas@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "role"=>"admin"}}}
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/middleware/tenant_switcher.rb:19:in `call'
  [1m[36mUser Exists? (1.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/middleware/tenant_switcher.rb:19:in `call'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/middleware/tenant_switcher.rb:19:in `call'
Completed 422 Unprocessable Entity in 4ms (Views: 0.0ms | ActiveRecord: 1.9ms | Allocations: 2926)


Started POST "/api/v1/register" for ::1 at 2026-02-21 04:00:04 +0530
Header received: company1
Current path: /api/v1/register
  [1m[36mCompany Load (0.3ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."subdomain" = $1 LIMIT $2[0m  [["subdomain", "company1"], ["LIMIT", 1]]
  â†³ app/middleware/tenant_switcher.rb:29:in `switch_schema'
Switched to schema: company1
Processing by Api::V1::RegistrationsController#create as */*
  Parameters: {"user"=>{"email"=>"srinivas@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "role"=>"admin"}, "registration"=>{"user"=>{"email"=>"srinivas@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "role"=>"admin"}}}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/middleware/tenant_switcher.rb:19:in `call'
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/middleware/tenant_switcher.rb:19:in `call'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/middleware/tenant_switcher.rb:19:in `call'
Completed 422 Unprocessable Entity in 3ms (Views: 0.1ms | ActiveRecord: 0.4ms | Allocations: 2918)


Started POST "/api/v1/register" for ::1 at 2026-02-21 04:01:41 +0530
  [1m[36mActiveRecord::SchemaMigration Pluck (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Header received: 
Current path: /api/v1/register
Processing by Api::V1::RegistrationsController#create as */*
  Parameters: {"user"=>{"email"=>"srinivas@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "role"=>"admin"}, "registration"=>{"user"=>{"email"=>"srinivas@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "role"=>"admin"}}}
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/middleware/tenant_switcher.rb:19:in `call'
  [1m[36mUser Exists? (2.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/middleware/tenant_switcher.rb:19:in `call'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/middleware/tenant_switcher.rb:19:in `call'
Completed 422 Unprocessable Entity in 32ms (Views: 0.1ms | ActiveRecord: 16.1ms | Allocations: 14376)


Started POST "/api/v1/register" for ::1 at 2026-02-21 04:05:46 +0530
Header received: company1
Current path: /api/v1/register
  [1m[36mCompany Load (1.3ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."subdomain" = $1 LIMIT $2[0m  [["subdomain", "company1"], ["LIMIT", 1]]
  â†³ app/middleware/tenant_switcher.rb:29:in `switch_schema'
Switched to schema: company1
Processing by Api::V1::RegistrationsController#create as */*
  Parameters: {"user"=>{"email"=>"srinivas@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "role"=>"admin"}, "registration"=>{"user"=>{"email"=>"srinivas@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "role"=>"admin"}}}
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/middleware/tenant_switcher.rb:19:in `call'
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/middleware/tenant_switcher.rb:19:in `call'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/middleware/tenant_switcher.rb:19:in `call'
Completed 422 Unprocessable Entity in 2ms (Views: 0.0ms | ActiveRecord: 0.8ms | Allocations: 2926)


Started POST "/api/v1/register" for ::1 at 2026-02-21 04:06:17 +0530
Header received: 
Current path: /api/v1/register
Processing by Api::V1::RegistrationsController#create as */*
  Parameters: {"user"=>{"email"=>"srinivas@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "role"=>"admin"}, "registration"=>{"user"=>{"email"=>"srinivas@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "role"=>"admin"}}}
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/middleware/tenant_switcher.rb:19:in `call'
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/middleware/tenant_switcher.rb:19:in `call'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/middleware/tenant_switcher.rb:19:in `call'
Completed 422 Unprocessable Entity in 3ms (Views: 0.0ms | ActiveRecord: 0.7ms | Allocations: 2925)


